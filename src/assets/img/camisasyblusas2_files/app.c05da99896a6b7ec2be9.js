webpackJsonp([1],{"../assets/icons/icons.js":function(e,t,n){"use strict";const o={FILE:"M4.8,1.77635684e-15 C3.48,1.77635684e-15 2.412,1.08 2.412,2.4 L2.4,21.6 C2.4,22.92 3.468,24 4.788,24 L19.2,24 C20.52,24 21.6,22.92 21.6,21.6 L21.6,7.2 L14.4,1.77635684e-15 L4.8,1.77635684e-15 Z M13.2,8.4 L13.2,1.8 L19.8,8.4 L13.2,8.4 Z",VIDEO:"M19.2,2.4 L21.6,7.2 L18,7.2 L15.6,2.4 L13.2,2.4 L15.6,7.2 L12,7.2 L9.6,2.4 L7.2,2.4 L9.6,7.2 L6,7.2 L3.6,2.4 L2.4,2.4 C1.08,2.4 0.012,3.48 0.012,4.8 L0,19.2 C0,20.52 1.08,21.6 2.4,21.6 L21.6,21.6 C22.92,21.6 24,20.52 24,19.2 L24,2.4 L19.2,2.4 Z",AUDIO:"M11.3333333,0 L11.3333333,12.3733333 C10.7066667,12.1466667 10.04,12 9.33333333,12 C6.01333333,12 3.33333333,14.68 3.33333333,18 C3.33333333,21.32 6.01333333,24 9.33333333,24 C12.4133333,24 14.9333333,21.6666667 15.2666667,18.6666667 L15.3333333,18.6666667 L15.3333333,4 L20.6666667,4 L20.6666667,0 L11.3333333,0 Z",PHOTO:"M24,21.3333333 L24,2.66666667 C24,1.2 22.8,1.99840144e-15 21.3333333,1.99840144e-15 L2.66666667,1.99840144e-15 C1.2,1.99840144e-15 0,1.2 0,2.66666667 L0,21.3333333 C0,22.8 1.2,24 2.66666667,24 L21.3333333,24 C22.8,24 24,22.8 24,21.3333333 Z M7.33333333,14 L10.6666667,18.0133333 L15.3333333,12 L21.3333333,20 L2.66666667,20 L7.33333333,14 Z",USER:"M12,12 C15.315,12 18,9.315 18,6 C18,2.685 15.315,0 12,0 C8.685,0 6,2.685 6,6 C6,9.315 8.685,12 12,12 Z M12,15 C7.995,15 0,17.01 0,21 L0,24 L24,24 L24,21 C24,17.01 16.005,15 12,15 Z",BACK:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",FOLDER:"M9.6,2.4 L2.4,2.4 C1.08,2.4 0.012,3.48 0.012,4.8 L0,19.2 C0,20.52 1.08,21.6 2.4,21.6 L21.6,21.6 C22.92,21.6 24,20.52 24,19.2 L24,7.2 C24,5.88 22.92,4.8 21.6,4.8 L12,4.8 L9.6,2.4 Z",SEARCH:"M17.1526587,15.0943396 L16.0686106,15.0943396 L15.6843911,14.7238422 C17.0291595,13.1595197 17.838765,11.1286449 17.838765,8.9193825 C17.838765,3.99313894 13.8456261,1.45661261e-13 8.9193825,1.45661261e-13 C3.99313894,1.45661261e-13 -2.48689958e-14,3.99313894 -2.48689958e-14,8.9193825 C-2.48689958e-14,13.8456261 3.99313894,17.838765 8.9193825,17.838765 C11.1286449,17.838765 13.1595197,17.0291595 14.7238422,15.6843911 L15.0943396,16.0686106 L15.0943396,17.1526587 L21.9554031,24 L24,21.9554031 L17.1526587,15.0943396 Z M8.9193825,15.0943396 C5.5025729,15.0943396 2.74442539,12.3361921 2.74442539,8.9193825 C2.74442539,5.5025729 5.5025729,2.74442539 8.9193825,2.74442539 C12.3361921,2.74442539 15.0943396,5.5025729 15.0943396,8.9193825 C15.0943396,12.3361921 12.3361921,15.0943396 8.9193825,15.0943396 Z",CLOSE:"M24 2.417 21.583 0 12 9.583 2.417 0 0 2.417 9.583 12 0 21.583 2.417 24 12 14.417 21.583 24 24 21.583 14.417 12z",PC:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z",SMARTPHONE:"M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z",WEB:"M12,0 C5.376,0 0,5.376 0,12 C0,18.624 5.376,24 12,24 C18.624,24 24,18.624 24,12 C24,5.376 18.624,0 12,0 Z M10.8,21.516 C6.06,20.928 2.4,16.896 2.4,12 C2.4,11.256 2.496,10.548 2.652,9.852 L8.4,15.6 L8.4,16.8 C8.4,18.12 9.48,19.2 10.8,19.2 L10.8,21.516 Z M19.08,18.468 C18.768,17.496 17.88,16.8 16.8,16.8 L15.6,16.8 L15.6,13.2 C15.6,12.54 15.06,12 14.4,12 L7.2,12 L7.2,9.6 L9.6,9.6 C10.26,9.6 10.8,9.06 10.8,8.4 L10.8,6 L13.2,6 C14.52,6 15.6,4.92 15.6,3.6 L15.6,3.108 C19.116,4.536 21.6,7.98 21.6,12 C21.6,14.496 20.64,16.764 19.08,18.468 Z",CAMERA:"M12,9.4c-2.1,0-3.8,1.7-3.8,3.8S9.9,17,12,17s3.8-1.7,3.8-3.8S14.1,9.4,12,9.4z M8.4,1.2L6.2,3.6H2.4    C1.1,3.6,0,4.7,0,6v14.4c0,1.3,1.1,2.4,2.4,2.4h19.2c1.3,0,2.4-1.1,2.4-2.4V6c0-1.3-1.1-2.4-2.4-2.4h-3.8l-2.2-2.4H8.4z M12,19.2    c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,19.2,12,19.2z",CAMERA_INFO:"M12,9.4c-2.1,0-3.8,1.7-3.8,3.8S9.9,17,12,17s3.8-1.7,3.8-3.8S14.1,9.4,12,9.4z M8.4,1.2L6.2,3.6H2.4    C1.1,3.6,0,4.7,0,6v14.4c0,1.3,1.1,2.4,2.4,2.4h19.2c1.3,0,2.4-1.1,2.4-2.4V6c0-1.3-1.1-2.4-2.4-2.4h-3.8l-2.2-2.4H8.4z M12,19.2    c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,19.2,12,19.2z",GOOGLE_SEARCH:"M21.660768,11.142744 L12.79692,11.137368 L12.79692,14.737416 L17.862264,14.737416 C17.589072,16.261056 16.09152,19.040544 12.207984,19.040544 C8.790192,19.040544 6.001728,16.155312 6.001728,12.59988 C6.001728,9.04452 8.790192,6.159312 12.207984,6.159312 C14.152968,6.159312 15.454248,7.004472 16.19808,7.732992 L18.915,5.066448 C17.170488,3.40536 14.910912,2.39988 12.207984,2.39988 C6.673752,2.39988 2.197752,6.960816 2.197752,12.59988 C2.197752,18.23904 6.673752,22.799856 12.207984,22.799856 C19.095024,22.799856 22.642368,16.975344 21.660768,11.142744 Z",DROPBOX:"M12.0159787,4.64047936 L6.00798935,8.47536618 L12.0159787,12.310253 L6.00798935,16.1451398 L0,12.2782956 L6.00798935,8.44340879 L0,4.64047936 L6.00798935,0.805592543 L12.0159787,4.64047936 Z M5.97603196,17.3595206 L11.9840213,13.5246338 L17.9920107,17.3595206 L11.9840213,21.1944075 L5.97603196,17.3595206 Z M12.0159787,12.2782956 L18.023968,8.44340879 L12.0159787,4.64047936 L17.9920107,0.805592543 L24,4.64047936 L17.9920107,8.47536618 L24,12.310253 L17.9920107,16.1451398 L12.0159787,12.2782956 Z",FACEBOOK:"M20.632416,1.89592926 L2.107512,1.89592926 C1.642776,1.89592926 1.265616,2.27292884 1.265616,2.73805642 L1.265616,21.2627394 C1.265616,21.7277078 1.642776,22.1047074 2.107512,22.1047074 L12.001704,22.1047074 L12.001704,14.5264497 L9.475584,14.5264497 L9.475584,11.3689162 L12.001704,11.3689162 L12.001704,8.84276211 C12.001704,6.23234526 13.65396,4.94810021 15.982416,4.94810021 C17.097864,4.94810021 18.056352,5.03113516 18.336096,5.06830989 L18.336096,7.79604884 L16.721112,7.79675368 C15.45456,7.79675368 15.159072,8.39857516 15.159072,9.28169684 L15.159072,11.3689162 L18.31716,11.3689162 L17.68536,14.5264497 L15.159072,14.5264497 L15.209328,22.1047074 L20.632416,22.1047074 C21.09756,22.1047074 21.474312,21.7277078 21.474312,21.2627394 L21.474312,2.73805642 C21.474312,2.27292884 21.09756,1.89592926 20.632416,1.89592926 Z",INSTAGRAM:"M23.93,7.05 C23.9089806,6.05533859 23.7196359,5.07142251 23.37,4.14 C23.0747624,3.3353419 22.6071795,2.60495698 22,2 C21.395043,1.39282049 20.6646581,0.925237617 19.86,0.63 C18.9285775,0.280364112 17.9446614,0.091019437 16.95,0.07 C15.67,0 15.26,0 12,0 C8.74,0 8.33,0 7.05,0.07 C6.05533859,0.091019437 5.07142251,0.280364112 4.14,0.63 C3.3353419,0.925237617 2.60495698,1.39282049 2,2 C1.39282049,2.60495698 0.925237617,3.3353419 0.63,4.14 C0.280364112,5.07142251 0.091019437,6.05533859 0.07,7.05 C0,8.33 0,8.74 0,12 C0,15.26 0,15.67 0.07,16.95 C0.091019437,17.9446614 0.280364112,18.9285775 0.63,19.86 C0.925237617,20.6646581 1.39282049,21.395043 2,22 C2.60107643,22.6095702 3.32800742,23.0805395 4.13,23.38 C5.06142251,23.7296359 6.04533859,23.9189806 7.04,23.94 C8.33,24 8.74,24 12,24 C15.26,24 15.67,24 16.95,23.93 C17.9446614,23.9089806 18.9285775,23.7196359 19.86,23.37 C21.4718745,22.7461736 22.7461736,21.4718745 23.37,19.86 C23.7196359,18.9285775 23.9089806,17.9446614 23.93,16.95 C24,15.67 24,15.26 24,12 C24,8.74 24,8.33 23.93,7.05 Z M21.78,16.85 C21.7719985,17.6113231 21.6333164,18.3656182 21.37,19.08 C20.9635455,20.1262253 20.1362253,20.9535455 19.09,21.36 C18.3756182,21.6233164 17.6213231,21.7619985 16.86,21.77 C15.59,21.83 15.21,21.84 12,21.84 C8.79,21.84 8.41,21.84 7.14,21.77 C6.37867687,21.7619985 5.62438182,21.6233164 4.91,21.36 C4.38851372,21.1669155 3.91694979,20.8593738 3.53,20.46 C3.13062621,20.0730502 2.82308451,19.6014863 2.63,19.08 C2.36668356,18.3656182 2.22800151,17.6113231 2.22,16.85 C2.16,15.58 2.15,15.2 2.15,11.99 C2.15,8.78 2.15,8.4 2.22,7.13 C2.22800151,6.36867687 2.36668356,5.61438182 2.63,4.9 C2.82308451,4.37851372 3.13062621,3.90694979 3.53,3.52 C3.91694979,3.12062621 4.38851372,2.81308451 4.91,2.62 C5.62438182,2.35668356 6.37867687,2.21800151 7.14,2.21 C8.41,2.15 8.79,2.14 12,2.14 C15.21,2.14 15.59,2.14 16.86,2.21 C17.6213231,2.21800151 18.3756182,2.35668356 19.09,2.62 C19.6114863,2.81308451 20.0830502,3.12062621 20.47,3.52 C20.8693738,3.90694979 21.1769155,4.37851372 21.37,4.9 C21.6333164,5.61438182 21.7719985,6.36867687 21.78,7.13 C21.84,8.4 21.85,8.78 21.85,11.99 C21.85,15.2 21.84,15.59 21.78,16.86 L21.78,16.85 Z M12,5.84 C8.59792594,5.84 5.84,8.59792594 5.84,12 C5.84,15.4020741 8.59792594,18.16 12,18.16 C15.4020741,18.16 18.16,15.4020741 18.16,12 C18.16,10.3662664 17.5110019,8.79944632 16.3557778,7.64422223 C15.2005537,6.48899814 13.6337336,5.84 12,5.84 Z M12,16 C9.790861,16 8,14.209139 8,12 C8,9.790861 9.790861,8 12,8 C14.209139,8 16,9.790861 16,12 C16,13.060866 15.5785726,14.0782816 14.8284271,14.8284271 C14.0782816,15.5785726 13.060866,16 12,16 Z M18.39,4.17 C17.59471,4.17 16.95,4.81470996 16.95,5.61 C16.95,6.40529004 17.59471,7.05 18.39,7.05 C19.18529,7.05 19.83,6.40529004 19.83,5.61 C19.83,5.22808825 19.6782861,4.86181862 19.4082338,4.59176624 C19.1381814,4.32171385 18.7719117,4.17 18.39,4.17 Z",ARROW_RIGHT:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z",ARROW_FORWARD:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z",MENU:"M0,20 L24,20 L24,17.3333333 L0,17.3333333 L0,20 Z M0,13.3333333 L24,13.3333333 L24,10.6666667 L0,10.6666667 L0,13.3333333 Z M0,4 L0,6.66666667 L24,6.66666667 L24,4 L0,4 Z",OPEN_IN_NEW:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z",CHECKED:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z",CANCEL:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z",UPLOAD:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z",UPLOAD_MORE:"M19.3 10c2.6.3 4.6 2.4 4.7 5a5 5 0 0 1-5 5H6a6 6 0 0 1-.7-12 7.5 7.5 0 0 1 14 2zM13 12V9h-2v3H8v2h3v3h2v-3h3v-2h-3z",KEYBOARD_UP:"M2.8 19.4l9.2-9.1 9.2 9.1 2.8-2.8-12-12-12 12z",KEYBOARD_DOWN:"M2.8 4.6l9.2 9.2 9.2-9.2L24 7.4l-12 12-12-12z",ARROW_DROP_UP:"M7 14l5-5 5 5z",ARROW_DROP_DOWN:"M7 10l5 5 5-5z",WARNING:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z",ERROR:"M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z",FILES_DRAG:"M9.86230578,18.2138676 L9.86230578,10.5085598 C9.86287991,10.2164442 9.74761305,9.93612678 9.54198396,9.72956943 C9.33635484,9.52301206 9.05729718,9.40722486 8.76649426,9.40780159 L1.09581365,9.40780159 C0.805010736,9.40722486 0.525953075,9.52301206 0.320323962,9.72956943 C0.114694849,9.93612678 -0.000572009144,10.2164442 2.13461315e-06,10.5085598 L2.13461315e-06,18.2138676 C-0.000572009144,18.5059833 0.114694849,18.7863006 0.320323962,18.992858 C0.525953075,19.1994154 0.805010736,19.3152026 1.09581365,19.3146258 L8.76649426,19.3146258 C9.05729718,19.3152026 9.33635484,19.1994154 9.54198396,18.992858 C9.74761305,18.7863006 9.86287991,18.5059833 9.86230578,18.2138676 Z M3.0134838,15.1802819 L4.3832482,16.8335861 L6.30091835,14.3547132 L8.76649426,17.6569879 L1.09581365,17.6569879 L3.0134838,15.1802819 Z M22.0240879,10.3872164 L22.4382529,12.6472378 L20.9649473,12.2138684 L20.5507823,9.95384702 L19.5692976,9.67215692 L19.9834625,11.9321783 L18.5101569,11.4988089 L18.0959919,9.24095437 L17.1145072,8.95493058 L17.5265151,11.2149519 L16.0532094,10.7815826 L15.6412015,8.52156119 L15.1493806,8.37854929 C14.8893518,8.30303211 14.6100903,8.33463263 14.3733033,8.46636819 C14.1365163,8.59810378 13.961696,8.81913001 13.8874717,9.0806077 L12.1747269,15.0004336 C12.0971007,15.2645395 12.1283049,15.5488961 12.2613353,15.7896763 C12.3943658,16.0304565 12.6180785,16.2074901 12.8822588,16.2810401 L20.7406079,18.5670636 C21.0014925,18.6433563 21.2818788,18.6122017 21.5198573,18.4804787 C21.7578359,18.3487556 21.9338329,18.1272986 22.0089881,17.8650052 L24,10.9570972 L22.0240879,10.3872164 Z M7.54125619,4.25503955 C7.29113106,4.31978718 7.07690612,4.48179478 6.945803,4.70535103 C6.81469987,4.92890728 6.7774818,5.19565874 6.84235278,5.44680537 L8.71903786,13.0697729 C8.78028908,13.3219212 8.93887905,13.5392362 9.15982884,13.6737866 C9.38077863,13.808337 9.64593678,13.8490692 9.89681953,13.7869993 L15.591588,12.3677145 C16.1149481,12.2375528 16.4344627,11.70618 16.3055912,11.1802824 L14.8948417,5.46414014 L11.3442399,3.31462798 L7.54125619,4.25503955 Z M11.6850631,6.76208146 L11.0379303,4.14236351 L14.2908511,6.11202738 L11.6850631,6.76208146 Z",CLOUD_DONE:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM10 17l-3.5-3.5 1.41-1.41L10 14.17 15.18 9l1.41 1.41L10 17z",RETRY:"M0 12c0 3 1.2 5.6 3.1 7.5L0 22.7h8v-8l-3 3A8 8 0 0 1 8 4.5V1.7C3.4 2.9 0 7 0 12zm10.7 6.7h2.6V16h-2.6v2.7zM24 1.3h-8v8l3-3a8 8 0 0 1-3 13.2v2.8a10.7 10.7 0 0 0 4.9-17.8L24 1.3zm-13.3 12h2.6v-8h-2.6v8z",COMPLETE:"M12 7.6a4.4 4.4 0 1 0 0 8.8 4.4 4.4 0 0 0 0-8.8zm9.8 3.3A9.8 9.8 0 0 0 13 2.2V0h-2.2v2.2A9.8 9.8 0 0 0 2.2 11H0v2.2h2.2a9.8 9.8 0 0 0 8.7 8.7V24h2.2v-2.2a9.8 9.8 0 0 0 8.7-8.7H24v-2.2h-2.2zM12 19.6a7.6 7.6 0 1 1 0-15.2 7.6 7.6 0 0 1 0 15.2z",CHECK_CIRCLE:"M12,0 C5.372583,1.59872116e-15 2.30926389e-15,5.372583 1.77635684e-15,12 C1.24344979e-15,18.627417 5.372583,24 12,24 C18.627417,24 24,18.627417 24,12 C24,5.372583 18.627417,2.66453526e-15 12,0 Z M9.6,18 L3.6,12 L5.28,10.32 L9.6,14.64 L18.72,5.52 L20.4,7.2 L9.6,18 Z",WARNING_NO_CIRCLE:"M13.2 18h-2.4v-2.4h2.4V18zm0-4.8h-2.4V6h2.4v7.2z",DONE_NO_CIRCLE:"M9.6 18l-6-6 1.7-1.7 4.3 4.3 9.1-9.1 1.7 1.7z",RESET:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z",CROP:"M18.290483,15.1633523 L20.4723011,15.1633523 L20.4723011,6.43607955 C20.4723011,5.23607955 19.490483,4.25426136 18.290483,4.25426136 L9.56321023,4.25426136 L9.56321023,6.43607955 L18.290483,6.43607955 L18.290483,15.1633523 Z M7.38139205,17.3451705 L7.38139205,-0.109375 L5.19957386,-0.109375 L5.19957386,4.25426136 L0.8359375,4.25426136 L0.8359375,6.43607955 L5.19957386,6.43607955 L5.19957386,17.3451705 C5.19957386,18.5451705 6.18139205,19.5269886 7.38139205,19.5269886 L18.290483,19.5269886 L18.290483,23.890625 L20.4723011,23.890625 L20.4723011,19.5269886 L24.8359375,19.5269886 L24.8359375,17.3451705 L7.38139205,17.3451705 Z"},r={local:o.PC,dropbox:o.DROPBOX,camera:o.CAMERA,url:o.WEB,image_search:o.GOOGLE_SEARCH,facebook:o.FACEBOOK,g_photos:o.FACEBOOK,instagram:o.INSTAGRAM};t.a=r,t.b=o},"../assets/images/about/about-bullet-1.svg":function(e,t,n){e.exports=n.p+"_/assets/images/about/about-bullet-1.svg?564af73db38b264fdf2400714d585001"},"../assets/images/about/about-bullet-2.svg":function(e,t,n){e.exports=n.p+"_/assets/images/about/about-bullet-2.svg?e2591849fcca581c0441631e1df856f9"},"../assets/images/about/about-bullet-3.svg":function(e,t,n){e.exports=n.p+"_/assets/images/about/about-bullet-3.svg?f7172be8ac25b26b1e9ea2a3060e1c2c"},"../assets/images/about/about-bullet-4.svg":function(e,t,n){e.exports=n.p+"_/assets/images/about/about-bullet-4.svg?88c02773b285e0c707575961c049834a"},"../assets/images/about/powered-by-logo-big.svg":function(e,t,n){e.exports=n.p+"_/assets/images/about/powered-by-logo-big.svg?03f74cecd7ad56305580fc0544a95314"},"../assets/images/lanscape-lock.svg":function(e,t,n){e.exports=n.p+"_/assets/images/lanscape-lock.svg?0d581cffe28dfdf921488ce0132be6ac"},"../assets/scss/main.scss":function(e,t){e.exports={breakpointNotSmall:'"screen and (min-width: 767px)"',breakpointMedium:'"screen and (min-width: 30em) and (max-width: 60em)"',breakpointLarge:'"screen and (min-width: 60em)"',landscape:'"screen and (orientation : landscape)"'}},"../assets/scss/tachyons/_variables.scss":function(e,t){e.exports={breakpointNotSmall:'"screen and (min-width: 767px)"',breakpointMedium:'"screen and (min-width: 30em) and (max-width: 60em)"',breakpointLarge:'"screen and (min-width: 60em)"',landscape:'"screen and (orientation : landscape)"'}},"../node_modules/moment/locale recursive en":function(e,t,n){var o={"./en-au":"../node_modules/moment/locale/en-au.js","./en-au.js":"../node_modules/moment/locale/en-au.js","./en-ca":"../node_modules/moment/locale/en-ca.js","./en-ca.js":"../node_modules/moment/locale/en-ca.js","./en-gb":"../node_modules/moment/locale/en-gb.js","./en-gb.js":"../node_modules/moment/locale/en-gb.js","./en-ie":"../node_modules/moment/locale/en-ie.js","./en-ie.js":"../node_modules/moment/locale/en-ie.js","./en-il":"../node_modules/moment/locale/en-il.js","./en-il.js":"../node_modules/moment/locale/en-il.js","./en-nz":"../node_modules/moment/locale/en-nz.js","./en-nz.js":"../node_modules/moment/locale/en-nz.js"};function r(e){return n(a(e))}function a(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(o)},r.resolve=a,e.exports=r,r.id="../node_modules/moment/locale recursive en"},"./ recursive ^\\.\\/.*\\/index\\.js$":function(e,t,n){var o={"./pages/about/routes/index.js":"./pages/about/routes/index.js","./pages/crop/index.js":"./pages/crop/index.js","./pages/crop/reducers/index.js":"./pages/crop/reducers/index.js","./pages/crop/routes/index.js":"./pages/crop/routes/index.js","./pages/crop/selectors/index.js":"./pages/crop/selectors/index.js","./pages/crop/translations/index.js":"./pages/crop/translations/index.js","./queue/actions/index.js":"./queue/actions/index.js","./queue/components/PreviewImage/index.js":"./queue/components/PreviewImage/index.js","./queue/components/QueueView/index.js":"./queue/components/QueueView/index.js","./queue/reducers/index.js":"./queue/reducers/index.js","./queue/routes/index.js":"./queue/routes/index.js","./queue/selectors/index.js":"./queue/selectors/index.js","./queue/translations/index.js":"./queue/translations/index.js","./root/actions/index.js":"./root/actions/index.js","./root/components/AdvancedOptions/index.js":"./root/components/AdvancedOptions/index.js","./root/components/App/index.js":"./root/components/App/index.js","./root/components/Button/index.js":"./root/components/Button/index.js","./root/components/DefaultPanel/index.js":"./root/components/DefaultPanel/index.js","./root/components/Dropdown/index.js":"./root/components/Dropdown/index.js","./root/components/DynamicImage/index.js":"./root/components/DynamicImage/index.js","./root/components/Footer/index.js":"./root/components/Footer/index.js","./root/components/GridWaypoint/index.js":"./root/components/GridWaypoint/index.js","./root/components/NoResults/index.js":"./root/components/NoResults/index.js","./root/components/ProgressIndicator/index.js":"./root/components/ProgressIndicator/index.js","./root/components/ResponsiveWidthMonitor/index.js":"./root/components/ResponsiveWidthMonitor/index.js","./root/components/ResultImageGrid/GridTile/index.js":"./root/components/ResultImageGrid/GridTile/index.js","./root/components/ResultImageGrid/index.js":"./root/components/ResultImageGrid/index.js","./root/components/RouteWithSubRoutes/index.js":"./root/components/RouteWithSubRoutes/index.js","./root/components/SearchBox/index.js":"./root/components/SearchBox/index.js","./root/components/SelectedCounter/index.js":"./root/components/SelectedCounter/index.js","./root/components/ServiceLoginIntro/index.js":"./root/components/ServiceLoginIntro/index.js","./root/components/SvgIcon/index.js":"./root/components/SvgIcon/index.js","./root/components/TabFooter/index.js":"./root/components/TabFooter/index.js","./root/components/TabHeader/index.js":"./root/components/TabHeader/index.js","./root/components/TabTitle/index.js":"./root/components/TabTitle/index.js","./root/components/TaggedInput/index.js":"./root/components/TaggedInput/index.js","./root/components/TopErrorBoundary/index.js":"./root/components/TopErrorBoundary/index.js","./root/components/TopMenu/index.js":"./root/components/TopMenu/index.js","./root/components/UploadContainer/index.js":"./root/components/UploadContainer/index.js","./root/components/UploadPresetInput/index.js":"./root/components/UploadPresetInput/index.js","./root/components/UserBlock/index.js":"./root/components/UserBlock/index.js","./root/hocs/ModalWrapper/index.js":"./root/hocs/ModalWrapper/index.js","./root/reducers/index.js":"./root/reducers/index.js","./root/selectors/index.js":"./root/selectors/index.js","./root/translations/index.js":"./root/translations/index.js","./routing/index.js":"./routing/index.js","./services/index.js":"./services/index.js","./store/index.js":"./store/index.js","./tabs/Camera/actions/index.js":"./tabs/Camera/actions/index.js","./tabs/Camera/index.js":"./tabs/Camera/index.js","./tabs/Camera/reducers/index.js":"./tabs/Camera/reducers/index.js","./tabs/Camera/routes/index.js":"./tabs/Camera/routes/index.js","./tabs/Camera/selectors/index.js":"./tabs/Camera/selectors/index.js","./tabs/Camera/service/index.js":"./tabs/Camera/service/index.js","./tabs/Camera/translations/index.js":"./tabs/Camera/translations/index.js","./tabs/Dropbox/actions/index.js":"./tabs/Dropbox/actions/index.js","./tabs/Dropbox/components/Breadcrumb/index.js":"./tabs/Dropbox/components/Breadcrumb/index.js","./tabs/Dropbox/components/ContextItems/index.js":"./tabs/Dropbox/components/ContextItems/index.js","./tabs/Dropbox/components/FolderList/FileRow/index.js":"./tabs/Dropbox/components/FolderList/FileRow/index.js","./tabs/Dropbox/components/FolderList/FolderRow/index.js":"./tabs/Dropbox/components/FolderList/FolderRow/index.js","./tabs/Dropbox/components/FolderList/index.js":"./tabs/Dropbox/components/FolderList/index.js","./tabs/Dropbox/index.js":"./tabs/Dropbox/index.js","./tabs/Dropbox/reducers/index.js":"./tabs/Dropbox/reducers/index.js","./tabs/Dropbox/routes/index.js":"./tabs/Dropbox/routes/index.js","./tabs/Dropbox/selectors/index.js":"./tabs/Dropbox/selectors/index.js","./tabs/Dropbox/service/index.js":"./tabs/Dropbox/service/index.js","./tabs/Dropbox/translations/index.js":"./tabs/Dropbox/translations/index.js","./tabs/Facebook/actions/index.js":"./tabs/Facebook/actions/index.js","./tabs/Facebook/components/AlbumBar/index.js":"./tabs/Facebook/components/AlbumBar/index.js","./tabs/Facebook/components/ContextPhotos/index.js":"./tabs/Facebook/components/ContextPhotos/index.js","./tabs/Facebook/index.js":"./tabs/Facebook/index.js","./tabs/Facebook/reducers/index.js":"./tabs/Facebook/reducers/index.js","./tabs/Facebook/routes/index.js":"./tabs/Facebook/routes/index.js","./tabs/Facebook/selectors/index.js":"./tabs/Facebook/selectors/index.js","./tabs/Facebook/service/index.js":"./tabs/Facebook/service/index.js","./tabs/Facebook/translations/index.js":"./tabs/Facebook/translations/index.js","./tabs/GoogleDrive/actions/index.js":"./tabs/GoogleDrive/actions/index.js","./tabs/GoogleDrive/components/ContextItems/index.js":"./tabs/GoogleDrive/components/ContextItems/index.js","./tabs/GoogleDrive/index.js":"./tabs/GoogleDrive/index.js","./tabs/GoogleDrive/reducers/index.js":"./tabs/GoogleDrive/reducers/index.js","./tabs/GoogleDrive/selectors/index.js":"./tabs/GoogleDrive/selectors/index.js","./tabs/GoogleDrive/service/index.js":"./tabs/GoogleDrive/service/index.js","./tabs/GoogleDrive/translations/index.js":"./tabs/GoogleDrive/translations/index.js","./tabs/ImageSearch/actions/index.js":"./tabs/ImageSearch/actions/index.js","./tabs/ImageSearch/index.js":"./tabs/ImageSearch/index.js","./tabs/ImageSearch/reducers/index.js":"./tabs/ImageSearch/reducers/index.js","./tabs/ImageSearch/routes/index.js":"./tabs/ImageSearch/routes/index.js","./tabs/ImageSearch/selectors/index.js":"./tabs/ImageSearch/selectors/index.js","./tabs/ImageSearch/service/index.js":"./tabs/ImageSearch/service/index.js","./tabs/ImageSearch/translations/index.js":"./tabs/ImageSearch/translations/index.js","./tabs/Instagram/actions/index.js":"./tabs/Instagram/actions/index.js","./tabs/Instagram/components/ContextItems/index.js":"./tabs/Instagram/components/ContextItems/index.js","./tabs/Instagram/index.js":"./tabs/Instagram/index.js","./tabs/Instagram/reducers/index.js":"./tabs/Instagram/reducers/index.js","./tabs/Instagram/routes/index.js":"./tabs/Instagram/routes/index.js","./tabs/Instagram/selectors/index.js":"./tabs/Instagram/selectors/index.js","./tabs/Instagram/service/index.js":"./tabs/Instagram/service/index.js","./tabs/Instagram/translations/index.js":"./tabs/Instagram/translations/index.js","./tabs/Local/components/UploadButton/index.js":"./tabs/Local/components/UploadButton/index.js","./tabs/Local/index.js":"./tabs/Local/index.js","./tabs/Local/routes/index.js":"./tabs/Local/routes/index.js","./tabs/Local/selectors/index.js":"./tabs/Local/selectors/index.js","./tabs/Local/translations/index.js":"./tabs/Local/translations/index.js","./tabs/URL/index.js":"./tabs/URL/index.js","./tabs/URL/routes/index.js":"./tabs/URL/routes/index.js","./tabs/URL/translations/index.js":"./tabs/URL/translations/index.js","./uploader/index.js":"./uploader/index.js","./uploader/store/index.js":"./uploader/store/index.js","./uploader/translations/index.js":"./uploader/translations/index.js"};function r(e){return n(a(e))}function a(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(o)},r.resolve=a,e.exports=r,r.id="./ recursive ^\\.\\/.*\\/index\\.js$"},"./appConfig.js":function(e,t,n){"use strict";var o=n("../node_modules/lodash/fp.js"),r=n("./utils/envUtils.js"),a=n("./common/logger.js"),s={logLevel:a.a.ERROR,uwVersion:2,notifications:{timeout:3e3},ui:{responsiveWidth:"768px",cameraPreviewHeight:420},api:{widgetBase:"https://widget.cloudinary.com/",info:"info",uploadBase:"https://api.cloudinary.com/",uploadVersion:"v1_1/",upload:"upload",widgetAuth:"v2.0/global/auth/index.html",devAuthDomains:[]},upload:{cors:"/cloudinary_cors.html",maxImageSize:4e7,minChunkSize:5242880,maxChunkSize:2e7,source:"uw",consoleSource:"ml"},customization:{defaultFontFamily:"'Arial', 'Helvetica Neue', 'Helvetica', sans-serif",fontDomains:["fonts.googleapis.com"],imageLoadTimeout:2e3},google:{cx:"016831625641068449605:-e0gosfo6bg",searchBase:"https://www.googleapis.com/",searchPath:"customsearch/v1",searchItemsLimit:10,resultsMaxLimit:101,drive:{jsApi:"https://apis.google.com/js/api.js?onload=googleDriveCheckAuth",clientId:"124980147196-6pln31lupl374tjgg6ubg1jdohh37reg.apps.googleusercontent.com",pageSize:10,scopes:["https://www.googleapis.com/auth/drive.photos.readonly"]}},facebook:{appId:"2026152450945878",sdk:"https://connect.facebook.net/en_US/sdk.js",version:"v2.7"},dropbox:{clientId:"dg5sop6irbeg8ta",maxResults:10},instagram:{clientId:"ddf49b3fd1b8474c8f704713b15a7a87",authUrl:"https://api.instagram.com/oauth/authorize/",maxResults:10},crop:{blackList:[/application\//,/audio\//,/text\//,/video\//,/image\/svg\+xml/,/hei[c|f]/]}},i={logLevel:a.a.LOG,api:{uploadBase:"//api-dev.cloudinary.com/",widgetAuth:"global/auth/index.html",devAuthDomains:["localhost","widget-dev.cloudinary.com"]},upload:{callbackUrl:"https://widget.cloudinary.com/v2.0/cloudinary_cors.html"},facebook:{sdk:"https://connect.facebook.net/en_US/sdk/debug.js"}},c=Object(r.a)(),u={development:i,staging:{api:{uploadBase:"https://api-staging.cloudinary.com/",widgetBase:"https://widget-staging.cloudinary.com/"},facebook:{appId:"1803062876599883"}},production:{google:{drive:{clientId:"680300757358-rs1s18mqn7t3sd783eq24gc1ghd473ju.apps.googleusercontent.com"}},facebook:{appId:"1803062876599883",sdk:"https://connect.facebook.net/en_US/sdk.js"},dropbox:{clientId:"981xsfu2dl846i2"},instagram:{clientId:"68dd42b5e2e34365be4162252399cc6c"}}};t.a=Object(o.merge)(s,u[c]||u.development)},"./base.scss":function(e,t){},"./common/actionsBase.js":function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u});var o=n("../node_modules/redux/es/redux.js"),r=n("../node_modules/lodash/isFunction.js"),a=n.n(r),s=function(e,t,n){return{type:e,payload:a()(t[e])?t[e].apply(t,n):n[0]}},i=function(e){return function(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n=e,(Array.isArray(t)?t:[[t,o]]).forEach(function(e){return n({type:e[0],payload:e[1]})})}},c=function(e){var t=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return function(t,o){return e.apply(void 0,n.concat([t,o,i(t)]))}};return t._customAC=!0,t},u=function(e){return function(t){return Object.keys(e).reduce(function(n,o){return n[o]=e[o](t),n},{})}};t.d=function(e,t){return n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.values(e).reduce(function(e,n){return e[n]=t&&t[n]||!0,e},{})}(e,t),function(e){return Object(o.bindActionCreators)(Object.keys(n).reduce(function(e,t){return e[t]=function(){for(var e=arguments.length,o=Array(e),r=0;r<e;r++)o[r]=arguments[r];return!0===n[t]._customAC?n[t].apply(n,o):s(t,n,o)},e},{}),e)};var n}},"./common/consts.js":function(e,t,n){"use strict";t.a={WIDGET_VIEW_TYPES:{INITIAL:"initial",EXPANDED:"expanded",MINI:"minimized"},NOTIFICATION_TYPES:{WARNING:1,ERROR:2},QUEUE:"queue",CROP:"crop",ABOUT:"about",OAUTH_STORAGE_TOKEN:"CLD_UW_SERVICE_OAUTH_TOKEN"}},"./common/i18n.js":function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"c",function(){return l});var o=n("../node_modules/i18next/dist/es/index.js"),r=n("./utils/envUtils.js"),a=n("./common/logger.js"),s=Object(a.b)(),i=Object(r.d)("TRANSLATIONS",!0),c=void 0,u=function(e,t){return c.changeLanguage(e,function(n){n?s.error("[i18n]: encountered error changing language! ",n):s.log("[i18n]: successfully change language to: "+e),t&&t(n)})},l=function(e,t){~c.languages[e]?u(e,t):c.loadLanguages([e],function(n){n?s.error("[i18n]: failed to load language: "+e):u(e,t)})},d=function(e){Object.keys(e).forEach(function(t){s.log("[i18n]: adding resources for language: "+t),c.addResourceBundle(t,"translation",e[t],!0,!0)})};(c=o.a.createInstance()).init({lng:"en",fallbackLng:"en",resources:i,defaultNS:"translation"},function(e){e&&s.error("[i18n]: encountered error while initializing languages! ",e)});t.b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.t(e,t)}},"./common/logger.js":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return m});var o=self.console,r=Object.freeze({NONE:0,ERROR:1,WARN:2,INFO:3,LOG:4}),a=["error","warn","info","log"],s=window.Rollbar&&window.Rollbar.options.enabled,i={debug:["critical","error","warn","debug","log"],info:["critical","error","warn","info"],warning:["critical","error","warn"],error:["critical","error"],critical:["critical"]},c=void 0!==o&&void 0!==o.log&&void 0!==o.error&&void 0!==o.debug&&void 0!==o.warn&&"function"==typeof Function.prototype.apply,u=void 0,l=void 0,d=function(e,t,n,r){return o[t]?n?o[t](n):o[t]():e.log("----------- "+(n||r)+" ----------- ")},p=function(e){var t=e.level,n={};return n.setLevel=function(e){return t=e,n},n.getLevel=function(){return t||u},a.forEach(function(e){n[e]=function(){for(var t=arguments.length,r=Array(t),u=0;u<t;u++)r[u]=arguments[u];return function(e,t,n){if(c){var r,u=a.indexOf(t),l=e.getLevel();return~u&&l>=u+1&&o[t].apply(o,n),s&&~i[window.Rollbar.options.reportLevel].indexOf(t)&&(r=window.Rollbar)[t].apply(r,n),e}}(n,e,r)}}),n.groupCollapsed=function(e){return d(n,"groupCollapsed",e,"GROUP START")},n.group=function(e){return d(n,"group",e,"GROUP START")},n.groupEnd=function(){return d(n,"groupEnd",null,"GROUP END")},n.devError=function(){0},n.debug=n.log,n},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.level=e.level||r.NONE;var t=e.newInstance||!l?p(e):l;return l||e.newInstance||(l=t),t},m=function(e){return u=e};t.b=f},"./common/reducerBase.js":function(e,t,n){"use strict";var o=n("../node_modules/lodash/isFunction.js"),r=n.n(o),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.a=function(e,t){return function(n,o){return t[o.type]?r()(t[o.type])?t[o.type](n||e,o):function(e,t){throw"Reducer must provide a function only per type, \n                found "+a(e[t.type])+" for type: "+t.type}(t,o):n||e}}},"./pages/about/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./routing/utils.js"),r=n("./common/consts.js"),a=n("../node_modules/react/index.js"),s=n.n(a),i=n("../node_modules/glamorous/dist/glamorous.esm.js"),c=n("../node_modules/prop-types/index.js"),u=n.n(c),l=n("../assets/icons/icons.js"),d=n("./common/i18n.js"),p=n("./root/components/Button/index.js"),f=n("../assets/images/about/powered-by-logo-big.svg"),m=n.n(f),b=n("../assets/images/about/about-bullet-1.svg"),E=n.n(b),g=n("../assets/images/about/about-bullet-2.svg"),h=n.n(g),_=n("../assets/images/about/about-bullet-3.svg"),O=n.n(_),S=n("../assets/images/about/about-bullet-4.svg"),v=n.n(S);function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var T="https://cloudinary.com/features/image_video_upload",I=i.b.img({width:51,height:50,marginRight:20}),x=i.b.li("flex items-center",{marginBottom:8}),C=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=j(this,e.call.apply(e,[this].concat(a))),o.onBackClick=function(){o.context.router.history.goBack()},j(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return s.a.createElement("div",{className:"flex w-100 h-100 flex-column absolute absolute--fill items-center justify-center z-10 overflow-auto",style:{backgroundColor:"#fff",color:"#7C7C7C",padding:"20px"}},s.a.createElement("section",{className:"flex flex-column items-center f4",style:{maxWidth:600}},s.a.createElement("h1",{className:"f1"},"About the Upload Widget"),s.a.createElement("p",{className:"w-100"},"The ",s.a.createElement("a",{target:"_blank",href:T},"Cloudinary Upload Widget")," allows you to locate, select and upload files from different sources, easily, quickly and securely."),s.a.createElement("ul",{className:"list pa0"},s.a.createElement(x,null,s.a.createElement(I,{src:E.a}),"Upload files from any computer, mobile device or from various cloud services."),s.a.createElement(x,null,s.a.createElement(I,{src:h.a}),"Upload single or multiple files: you can also add files after an upload has completed."),s.a.createElement(x,null,s.a.createElement(I,{src:O.a}),"Crop images before uploading."),s.a.createElement(x,null,s.a.createElement(I,{src:v.a}),"Handle upload issues by retrying failed uploads.")),s.a.createElement("p",{className:"w-100"},s.a.createElement("a",{target:"_blank",href:T},"Cloudinary's Upload Widget")," enables website and application owners to provide the best content upload user experience with just a few lines of code."),s.a.createElement("hr",{className:"w-100",style:{margin:"10px 0",color:"#646464"}}),s.a.createElement("div",{className:"flex justify-between items-center w-100 flex-shrink-0",style:{marginBottom:"20px"}},s.a.createElement(p.default,{"data-test":"about-back-button",text:Object(d.b)("back"),colorName:"link",icon:l.b.BACK,onClick:this.onBackClick}),s.a.createElement("span",{style:{color:"#BEC6D1"}},"Version:",s.a.createElement("br",null),"2.0"),s.a.createElement("a",{target:"_blank",href:"https://cloudinary.com"},s.a.createElement("img",{src:m.a,width:"200px"})))))},t}(a.PureComponent);C.contextTypes={router:u.a.object};var y=C;t.default=[{path:Object(o.a)(r.a.ABOUT),component:y}]},"./pages/crop/CropWidget.scss":function(e,t){},"./pages/crop/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/prop-types/index.js"),s=n.n(a),i=n("../node_modules/react-redux/es/index.js"),c=n("../node_modules/reselect/lib/index.js"),u=n("./common/i18n.js"),l=n("./common/actionsBase.js"),d=n("./root/actions/index.js"),p=n("./root/data/NotificationsData.js"),f=n("./root/components/TabFooter/index.js"),m=n("./root/selectors/index.js"),b=n("./root/components/Button/index.js"),E=n("./root/components/MenuButton/MenuButton.js"),g=n("../assets/icons/icons.js"),h=n("../node_modules/glamorous/dist/glamorous.esm.js"),_=n("../node_modules/glamor/lib/index.js"),O=n("../node_modules/classnames/index.js"),S=n.n(O),v=n("./utils/sassVarsUtils.js"),j=n("./queue/components/ExpandedItem/ExpandedItem.js"),T=n("./pages/crop/selectors/index.js"),I=n("../node_modules/react-image-crop/dist/ReactCrop.js"),x=n.n(I),C=(n("../node_modules/react-image-crop/dist/ReactCrop.css"),n("../node_modules/tippy.js/dist/esm/tippy.standalone.js")),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},A=function(e,t){return Math.round(parseFloat(e)/100*t)},R=function(e,t){return Math.min(100*e/t,100)},L=function(e,t){var n={},o={},r=100*e.cropDefaultSelectSize,a=e.croppingAspectRatio,s=t.naturalWidth/t.naturalHeight;return e.minImageWidth&&(n.minWidth=R(e.minImageWidth,t.naturalWidth),n.width=Math.max(n.minWidth,r)),e.minImageHeight&&(n.minHeight=R(e.minImageHeight,t.naturalHeight),n.height=Math.max(n.minHeight,r)),a?(n.aspect=a,a>=1?(n.width=Math.max(n.width,r)||r,n.height&&(delete n.height,delete n.minHeight)):a<1&&(n.height=Math.max(n.height,r)||r,n.height&&(delete n.width,delete n.minWidth)),(n=Object(I.makeAspectCrop)(n,s)).height&&n.height>100&&(n.height=r,delete n.width,n=Object(I.makeAspectCrop)(n,s)),n.width&&n.width>100&&(n.width=r,delete n.height,n=Object(I.makeAspectCrop)(n,s))):(n.width=Math.max(n.width,r)||r,n.height=Math.max(n.height,r)||r),n.width&&n.height&&(n.y=(100-n.height)/2,n.x=(100-n.width)/2,o.width=A(n.width,t.naturalWidth),o.height=A(n.height,t.naturalHeight),o.x=A(n.x,t.naturalWidth),o.y=A(n.y,t.naturalHeight)),y({},n,{pixelCrop:o})},w=(n("./pages/crop/CropWidget.scss"),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e});function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var P=h.b.div("bg-window-c bg-window","absolute o-70 br1 pv2 ph3 f6 nowrap",function(e){return{top:(e.crop.y+e.crop.height||100)+"%",left:(e.crop.x+e.crop.width/2||50)+"%",transform:"translate(-50%, -35px)",pointerEvents:"none"}});_.css.insert("\n    .ReactCrop, .ReactCrop__image {\n        max-height: 100%;\n    }\n");var U=60,N=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=o=D(this,e.call.apply(e,[this].concat(s))),o.state={hideHandles:[],style:{}},o.onChange=function(e,t){e.width&&e.height&&o.props.setCrop(w({},e,{pixelCrop:t}))},o.onImageLoaded=function(e){if(o.widgetRef.current){var t=o.widgetRef.current.componentRef.parentElement.clientHeight;e.clientHeight>t&&o.setState({style:{height:"100%"}});var n=[];e.clientHeight<=U&&(n=n.concat(["w","e"])),e.clientWidth<=U&&(n=n.concat(["n","s"])),n.length>0&&o.setState({hideHandles:n}),o.handleList=o.widgetRef.current.componentRef.getElementsByClassName("ReactCrop__drag-handle"),document.body&&(document.body.addEventListener("mouseup",o.enableAllTips,!0),o.setTooltips())}var r=L(o.props.options,e);o.props.setDefaultCrop(w({},r)),o.props.setCrop(w({},r,{dimensions:[e.naturalWidth,e.naturalHeight]}))},o.setTooltips=function(){if(o.handleList){var e=function(e){e.setAttribute("data-tippy-content",e.dataset.ord.length>1?Object(u.b)("crop.corner_tooltip"):Object(u.b)("crop.handle_tooltip")),Object(C.a)(e,{animateFill:!1,animation:"shift-toward",delay:[500,100]}),e.addEventListener("mousedown",function(){var t=e._tippy;t.hide(),t.disable()})},t=o.handleList,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var a;if(n){if(r>=t.length)break;a=t[r++]}else{if((r=t.next()).done)break;a=r.value}e(a)}}},o.getHiddenHandlesAsClassNames=function(){return o.state.hideHandles.reduce(function(e,t){return e+"hide-handle-"+t+" "},"")},o.enableAllTips=function(){if(o.handleList){var e=o.handleList,t=Array.isArray(e),n=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if((n=e.next()).done)break;r=n.value}r._tippy.enable()}}},o.handleList=null,o.widgetRef=r.a.createRef(),D(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillUnmount=function(){document.body&&document.body.removeEventListener("mouseup",this.enableAllTips)},t.prototype.render=function(){var e=this.props,t=e.cropSource,n=e.crop,o=e.options,a=t.src||"";return a?r.a.createElement(x.a,w({},this.state,{outputPixelUnits:!0,crop:n,src:a,minWidth:n.minWidth||void 0,minHeight:n.minHeight||void 0,onChange:this.onChange,onImageLoaded:this.onImageLoaded,onImageError:this.props.onError,ref:this.widgetRef,className:this.getHiddenHandlesAsClassNames()}),o.croppingShowDimensions&&n.pixelCrop&&r.a.createElement(P,{crop:n},parseInt(n.pixelCrop.width)+" x "+parseInt(n.pixelCrop.height)+" px")):null},t}(o.Component);N.defaultProps={cropSource:{},options:{}};var M,F,k,B=N;n.d(t,"CropView",function(){return z});var G=h.b.div(S()("GCropView","absolute left-0 right-0 bottom-0 top-0","w-100 h-100","block flex-column z-5"),((M={borderRadius:6,boxShadow:"0 20px 30px rgba(0,0,0,.5)"})[Object(v.a)("ns")]={display:"flex"},M)),H=h.b.div(S()("crop-header flex bg-window ph6 bc-window-border bb"),{height:"62"}),V=h.b.div(S()("self-center relative pl5 f5 fw6 c-window-border bl"),{lineHeight:"40px"}),W=h.b.div(S()("flex items-center justify-center","bg-source-bg bg-source-bg-c"),((F={height:"calc(100% - 165px)"})[Object(v.a)("ns")]={height:"calc(100% - 132px)"},F)),q=Object(_.css)({"& .advance-box":(k={bottom:"70px",left:0},k[Object(v.a)("ns")]={left:"72px",bottom:"16"},k)}),z=function(e,t){var n=function(t){e.rootActions[d.types.ADD_UPLOAD_TO_QUEUE]({files:e.cropSources.data.files,cropInfo:[Object.assign({},t,{file:e.cropSources.data.files[0]})]})},a=r.a.createElement(E.a,{onClick:function(){t.router.history.goBack()},className:"relative self-center mr5",icon:g.b.BACK,iconSize:30}),s=r.a.createElement(E.a,{className:"btn-back relative self-center ml1 mr6",icon:g.b.CROP,iconSize:24}),i=e.isInline?null:r.a.createElement(E.a,{onClick:function(){e.rootActions[d.types.SET_PROMPT]({text:Object(u.b)("crop.close_prompt"),width:70,actions:[{label:Object(u.b)("crop.cancel_btn"),onClick:function(){return e.rootActions[d.types.CLEAR_NOTIFICATION]({id:p.a.PROMPT})}},{label:Object(u.b)("crop.close_btn"),color:"link",onClick:function(){e.rootActions[d.types.CLEAR_NOTIFICATION]({id:p.a.PROMPT}),t.router.history.goBack(),e.rootActions[d.types.DO_CLOSE_WIDGET]()}}]})},className:"self-center ml5 btn-close-popup ml-auto",icon:g.b.CLOSE,iconSize:16}),c=e.crop&&e.defaultCrop&&e.crop.width===e.defaultCrop.width&&e.crop.height===e.defaultCrop.height,l=100!==e.crop.width||100!==e.crop.height,m=r.a.createElement(b.default,{onClick:function(){e.rootActions[d.types.SET_CROP](e.defaultCrop)},className:"ml-auto self-center fw9 mr3",text:Object(u.b)("crop.reset_btn"),icon:g.b.RESET,fontSize:12,iconSize:20,disabled:c,textColorName:"link"}),h=r.a.createElement(o.Fragment,null,r.a.createElement(b.default,{dataTest:"cropBtn",onClick:function(){return n(e.crop)},className:"ml3",text:Object(u.b)("crop.crop_btn"),disabled:!l,icon:g.b.CROP,colorName:"action",fontSize:14,iconSize:22}),r.a.createElement(b.default,{onClick:function(){return n(Object.assign({},e.crop,{width:100,height:100,x:0,y:0,pixelCrop:{width:0,height:0,x:0,y:0}}))},className:"ml3",text:Object(u.b)("crop.skip_btn"),icon:g.b.UPLOAD,colorName:"link",fontSize:14,iconSize:22}));return r.a.createElement(G,q,r.a.createElement(H,null,e.cropOptions.croppingShowBackButton?a:s,r.a.createElement(V,null,Object(u.b)("crop.title")),i),r.a.createElement(W,null,!e.crop||e.crop.imageError?r.a.createElement(j.a,{item:{failed:!0,statusText:Object(u.b)("crop.image_error")+": "+e.cropSources.src},className:S()("self-start w-100"),paddingBottom:"60.6%"}):r.a.createElement(B,{cropSource:e.cropSources,setCrop:e.rootActions[d.types.SET_CROP],crop:e.crop,options:e.cropOptions,setDefaultCrop:e.rootActions[d.types.SET_DEFAULT_CROP],onError:function(){e.rootActions[d.types.SET_CROP]({imageError:!0})}})),r.a.createElement(f.default,{actionButton:e.crop.imageError?null:h,secondaryButton:m}))};z.contextTypes={router:s.a.object};t.default=Object(i.b)(Object(c.createStructuredSelector)({cropSources:T.selectCropSources,crop:T.selectCrop,defaultCrop:T.selectDefaultCrop,cropOptions:T.selectCropOptions,shouldShowAdvanced:m.selectShouldShowAdvancedOptions,isInline:m.selectIsInlineMode}),Object(l.a)({rootActions:d.default}))(z)},"./pages/crop/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),a=n.n(r),s=n("./common/reducerBase.js"),i=n("./root/actions/index.js"),c=function(){return a()({cropSources:{data:{files:[]},src:""},crop:{x:0,y:0,width:100,height:100}})},u=function(e){var t=c();return e.set("cropSources",t.cropSources).set("crop",t.crop)};t.default={cropWidget:Object(s.a)(c(),(o={},o[i.types.SET_UPLOADER_CROP_SOURCES]=function(e,t){var n=t.payload;return e.set("cropSources",n)},o[i.types.SET_DEFAULT_CROP]=function(e,t){var n=t.payload;return e.set("defaultCrop",n)},o[i.types.SET_CROP]=function(e,t){var n=t.payload;return e.set("crop",n)},o[i.types.CLEAR_QUEUE]=u,o[i.types.SET_BATCH_STARTED]=u,o))}},"./pages/crop/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./common/consts.js"),r=n("./routing/utils.js"),a=n("./pages/crop/index.js");t.default=[{path:Object(r.a)(o.a.CROP),component:a.default,routes:[]}]},"./pages/crop/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectCropSources",function(){return r}),n.d(t,"selectCrop",function(){return a}),n.d(t,"selectDefaultCrop",function(){return s}),n.d(t,"selectCropOptions",function(){return i});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),Object(o.createSelector)(function(e){return e.cropWidget&&e.cropWidget.cropSources?e.cropWidget.cropSources:{}},function(e){return e})),a=Object(o.createSelector)(function(e){return e.cropWidget.crop},function(e){return e}),s=Object(o.createSelector)(function(e){return e.cropWidget.defaultCrop},function(e){return e}),i=Object(o.createSelector)(function(e){return e.widgetConfig.croppingShowBackButton},function(e){return e.widgetConfig.croppingAspectRatio},function(e){return e.widgetConfig.croppingShowDimensions},function(e){return e.widgetConfig.croppingCoordinatesMode},function(e){return e.widgetConfig.croppingDefaultSelectionRatio},function(e){return e.widgetConfig.minImageWidth},function(e){return e.widgetConfig.minImageHeight},function(e,t,n,o,r,a,s){return{croppingShowBackButton:e,croppingAspectRatio:t,croppingShowDimensions:n,croppingCoordinatesMode:o,cropDefaultSelectSize:r,minImageWidth:a,minImageHeight:s}})},"./pages/crop/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{crop:{title:"Crop",crop_btn:"Crop",skip_btn:"Skip",cancel_btn:"Cancel",reset_btn:"Reset",close_btn:"Close",close_prompt:"Closing will cancel all uploads, Are you sure?",image_error:"Error loading image",corner_tooltip:"Drag corner to resize",handle_tooltip:"Drag handle to resize"}}}}},"./queue/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return a});var o=n("./common/actionsBase.js"),r=n("./queue/selectors/index.js"),a={SEND_SHOW_COMPLETED:"SEND_SHOW_COMPLETED"};t.default=Object(o.d)(a,{SEND_SHOW_COMPLETED:Object(o.b)(function(e,t,n){var o=Object(r.selectCompletedIds)(n());e.sendShowCompleted(o)})})},"./queue/components/ExpandedItem/ExpandedItem.js":function(e,t,n){"use strict";var o=n("../node_modules/fbjs/lib/shallowEqual.js"),r=n.n(o),a=n("../node_modules/react/index.js"),s=n.n(a),i=n("../node_modules/glamorous/dist/glamorous.esm.js"),c=n("../node_modules/classnames/index.js"),u=n.n(c),l=n("../node_modules/react-redux/es/index.js"),d=n("../node_modules/reselect/lib/index.js"),p=n("../node_modules/tinycolor2/tinycolor.js"),f=n.n(p),m=n("./root/components/SvgIcon/index.js"),b=n("../assets/icons/icons.js"),E=n("./root/selectors/index.js"),g=n("./utils/sassVarsUtils.js"),h=n("./utils/fileUtils.js"),_=n("./utils/domUtils.js"),O={ERROR:"error",ABORTED:"aborted",UPLOADING:"uploading",DONE:"uploaded"},S=n("./queue/components/PreviewImage/index.js"),v=Object.freeze({IMAGE:"PHOTO",AUDIO:"AUDIO",VIDEO:"VIDEO",TXT:"FILE"}),j=Object.freeze({jpg:v.IMAGE,jpeg:v.IMAGE,gif:v.IMAGE,png:v.IMAGE,pdf:v.IMAGE,mp4:v.VIDEO,mov:v.VIDEO,mp3:v.AUDIO,word:v.TXT,doc:v.TXT,docx:v.TXT,bmp:v.IMAGE,ico:v.IMAGE,tiff:v.IMAGE,eps:v.IMAGE,jpc:v.IMAGE,jp2:v.IMAGE,psd:v.IMAGE,webp:v.IMAGE,svg:v.IMAGE,wdp:v.IMAGE,hpx:v.IMAGE,djvu:v.IMAGE,ai:v.IMAGE,flif:v.IMAGE,bpg:v.IMAGE,miff:v.IMAGE,tga:v.IMAGE,css:v.TXT,js:v.TXT,zip:v.TXT,aac:v.AUDIO,ogg:v.AUDIO,m4a:v.AUDIO,wav:v.AUDIO,aiff:v.AUDIO,flac:v.AUDIO,avi:v.VIDEO,"3gp":v.VIDEO,"3g2":v.VIDEO,wmv:v.VIDEO,mpeg:v.VIDEO,mkv:v.VIDEO,webm:v.VIDEO,ogv:v.VIDEO,flv:v.VIDEO,m3u8:v.VIDEO,ts:v.VIDEO,mpd:v.VIDEO,quicktime:v.VIDEO}),T=n("./common/i18n.js"),I=n("./root/components/Progress/Progress.js"),x=O,C=i.b.div(function(e){var t=e.error;return u()("EXPANDED_ITEM--ASSET_STATUS","absolute pa3 right-0 top-0 w-100 h-100 flex items-start",{"justify-between":t,"justify-end":!t})},function(e){return{backgroundColor:e.error?"rgba(0,0,0,0.6)":null,"& > div:last-child":{boxShadow:"0 2px 4px 0 rgba(0,0,0,0.5)"}}}),y=function(e){var t=e.message,n=i.b.div(u()("f7 mr5 flex-grow"),{wordBreak:"break-all",color:"#FFFFFF"});return a.createElement(n,{"data-test":"error-message"},t)},A=function(e){var t=e.status,n=e.text,o=e.progress,r=t===x.ERROR||t===x.ABORTED;return n=n||Object(T.b)("queue.statuses."+t),a.createElement(C,{"data-test":"asset-status-icon",error:r},t===x.UPLOADING&&a.createElement(i.a,{"data-test":"uploading-status",backgroundColor:"#FFF",width:16,height:16,className:"br-100 flex items-center justify-center"},a.createElement(I.a,{size:12,percentage:o})),r&&a.createElement(a.Fragment,null,a.createElement(y,{color:"#FFFFFF",message:n}),a.createElement(m.default,{dataTest:"error-status-icon",path:b.b.WARNING_NO_CIRCLE,size:16,colorName:"error-c",className:"br-100 bg-error flex-none z-2"})),t===x.DONE&&a.createElement(m.default,{dataTest:"completed-status-icon",path:b.b.DONE_NO_CIRCLE,size:16,colorName:"complete-c",className:"br-100 bg-complete z-2"}))},R=O,L=i.b.div(u()("EXPANDED_ITEM--ASSET_ACTION","absolute w-100 h-100 top-0 left-0","flex items-center justify-center")),w=i.b.div("flex items-center justify-center pointer",{boxShadow:"0 2px 4px 0 rgba(0,0,0,0.5)",backgroundColor:"rgba(0,0,0,0.6)",padding:"10px 14px",borderRadius:5}),D=function(e){var t=e.status,n=e.onRetry,o=e.onAbort;return a.createElement(L,null,(t===R.ERROR||t===R.ABORTED)&&a.createElement(w,{onClick:n},a.createElement(m.default,{path:b.b.RETRY,size:20,color:"#FFFFFF"})),t===R.UPLOADING&&a.createElement(w,{onClick:o},a.createElement(m.default,{path:b.b.CLOSE,size:20,color:"#FFFFFF"})))},P=i.b.div(u()("EXPANDED_ITEM--ASSET_INFO","absolute left-0 bottom-0","flex items-center justify-between","w-100","f7 fw4 z-1"),{padding:"30px 5px 3px 5px",color:"#FFFFFF",background:"linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.85) 100%)"}),U=function(e){var t,n,o,r,s=e.item,i=Object(h.a)(s),c=j[i.toLowerCase()]||v.TXT,u=(n=(t=s).imageDimensions,o=t.customCoordinates,r={},o&&o.width&&o.height?(r.width=o.width,r.height=o.height,r.cropped=!0):n[0]&&n[1]&&(r.width=n[0],r.height=n[1]),r),l=!u.cropped&&s.size?Object(h.b)(s.size):null;return a.createElement(P,null,a.createElement("div",{className:"flex items-center"},a.createElement(m.default,{size:10,color:"#FFFFFF",path:b.b[c],className:"mr2"}),i.substr(0,10)),l&&a.createElement("div",{className:"asset-info-size"},Object(T.b)("uploader.filesize."+l.text,l)),u.width&&u.height&&a.createElement("div",{className:"asset-info-dims"},u.width+" X "+u.height))},N=n("./queue/selectors/index.js"),M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var F=O,k=function(e){var t=e.status,n=e.item,o=e.color,r=Object(h.a)(n),a=t===F.ERROR||t===F.ABORTED?"WARNING":j[r.toLowerCase()]||"FILE";return s.a.createElement(m.default,{dataTest:"default-thumbnail-place-holder",size:70,color:o,path:b.b[a],className:"absolute z-negative-1"})},B=i.b.div("aspect-ratio--object",function(e){var t,n,o,r={backgroundColor:(t=e.palette.sourceBg,n=f()(t).toHsl(),n.l=n.l>.5?n.l-.1:n.l+.1,f()(n).toHslString())};Object(_.d)()||(r=M({},r,((o={})["& .EXPANDED_ITEM--ASSET_ACTION,\n            & .EXPANDED_ITEM--ASSET_INFO"]={transition:"opacity 0.25s ease-in-out",opacity:0},o["&:HOVER .EXPANDED_ITEM--ASSET_ACTION,\n            &:HOVER .EXPANDED_ITEM--ASSET_INFO"]={opacity:1},o)));return r}),G=i.b.div(u()("EXPANDED_ITEM--PREVIEW","flex items-center justify-center w-100 h-100"),{"& img":{width:"100%",height:"auto",maxHeight:"100%",objectFit:"contain"}}),H=i.b.div("EXPANDED-ITEM relative",function(e){var t=e.gutter;if(t)return{borderRightWidth:t,borderRightStyle:"solid",borderRightColor:"transparent"}}),V=i.b.div("EXPANDED-ITEM-ASPECT-RATIO aspect-ratio",function(e){var t,n=e.paddingBottom,o=void 0===n?"100%":n;return(t={paddingBottom:"100%"})[Object(g.a)("ns")]={paddingBottom:o},t}),W=function(e){var t=e.title;return s.a.createElement(i.b.Div,{"data-test":"asset-name",className:"f6 fw5 pt3 truncate",paddingBottom:17,title:t},t)},q=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){if(!!window.MSInputMethodContext&&!!document.documentMode){var e=this.element;setTimeout(function(){e.style.top="0"},100)}},t.prototype.render=function(){var e,t=this,n=this.props,o=n.item,r=n.retryFailed,i=n.abort,c=n.palette,u=n.className,l=n.gutter,d=n.paddingBottom,p=o.getPreviewObject&&o.getPreviewObject(o)||{},m=(e=o).aborted?F.ABORTED:e.failed?F.ERROR:e.done?F.DONE:F.UPLOADING,b=o.customCoordinates,E=b&&b.width&&o.dimensions&&o.dimensions.length?o.dimensions:o.imageDimensions,g=function(){return s.a.createElement(k,{status:m,item:o,color:(e=c.sourceBg,f()(e).darken(25).toString())});var e},h=p.url||p.img?s.a.createElement(S.default,{img:p.img,url:p.url,noPreview:g,crop:b,dimensions:E}):g();return s.a.createElement(H,{innerRef:function(e){t.element=e},className:u,gutter:l,"data-test":"asset-container"},s.a.createElement(V,{paddingBottom:d},s.a.createElement(B,{palette:c},s.a.createElement(A,{status:m,text:o.statusText,progress:o.progress}),o.id&&s.a.createElement(a.Fragment,null,s.a.createElement(U,{item:o}),s.a.createElement(D,{status:m,onRetry:function(){return r(o.id)},onAbort:function(){return i(o.id)},item:o})),s.a.createElement(G,null,h))),s.a.createElement(W,{title:o.name||""}))},t}(a.Component),z=["status","progress","done","failed","aborted","paused"];t.a=Object(l.b)(Object(d.createStructuredSelector)({palette:E.selectPalette,queueItems:N.selectUploadQueueItems}),null,function(e,t,n){return M({palette:e.palette,item:e.queueItems.find(function(e){return e.id===n.id})},t,n)},{areMergedPropsEqual:function(e,t){var n=M({},e,{item:null}),o=M({},t,{item:null}),a=r()(o,n);if(a){var s=e.item,i=t.item;a=!z.find(function(e){return s[e]!==i[e]})}return a}})(q)},"./queue/components/PreviewImage/PreviewImage.scss":function(e,t){},"./queue/components/PreviewImage/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/glamor/lib/index.js"),s=(n.n(a),n("./utils/sassVarsUtils.js")),i=n("./queue/components/PreviewImage/PreviewImage.scss");n.n(i);function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=r=c(this,e.call.apply(e,[this].concat(s))),r.state={loadFailed:!1,loadSuccess:!1},r.containerRef=Object(o.createRef)(),c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.containerRef.current&&this.props.img&&(this.containerRef.current.appendChild(this.props.img),this.onImageLoad())},t.prototype.onImageError=function(){this.setState({loadFailed:!0})},t.prototype.onImageLoad=function(){this.setState({loadSuccess:!0})},t.prototype.render=function(){var e,t=this,n=!this.props.img&&!this.state.loadSuccess||this.state.loadFailed?this.props.noPreview():null,i=this.props,c=i.crop,u=i.dimensions,l=Object(a.css)({height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden","& .cropper":c&&u?(e={position:"relative",overflow:"hidden",height:0,width:c.width<c.height?100*c.width/c.height+"%":"100%",paddingTop:c.height<c.width?100*c.height/c.width+"%":"100%"},e[Object(s.a)("ns")]={width:c.width<=c.height?56*c.width/c.height+"%":"100%",paddingTop:c.height<c.width?100*c.height/c.width+"%":"56%"},e):{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},"& img":c&&u?{position:"absolute",objectFit:"initial",width:u[0]/c.width*100+"%",height:"auto",maxHeight:"none",maxWidth:"none",left:0,top:0,transform:"translate("+-100*c.x/u[0]+"%, "+-100*c.y/u[1]+"%)"}:{}});return r.a.createElement(o.Fragment,null,n,!this.state.loadFailed&&r.a.createElement("div",{className:l,"data-test":"preview-img-container"},r.a.createElement("div",{className:"cropper",ref:this.props.url?null:this.containerRef},this.props.url&&r.a.createElement("img",{src:this.props.url,onError:function(){return t.onImageError()},onLoad:function(){return t.onImageLoad()}}))))},t}(o.PureComponent);t.default=u},"./queue/components/QueueView/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/reselect/lib/index.js"),i=n("./common/consts.js"),c=n("./common/actionsBase.js"),u=n("./root/selectors/index.js"),l=n("./root/actions/index.js"),d=n("./root/components/UploadContainer/uploaderContext.js"),p=n("./root/data/NotificationsData.js"),f=n("./queue/actions/index.js"),m=n("./queue/selectors/index.js"),b=n("../node_modules/prop-types/index.js"),E=n.n(b),g=n("../node_modules/glamorous/dist/glamorous.esm.js"),h=n("../node_modules/classnames/index.js"),_=n.n(h),O=n("./common/i18n.js"),S=n("./root/components/MenuButton/MenuButton.js"),v=n("./root/components/LinkButton/LinkButton.js"),j=n("./root/components/PoweredBy/PoweredBy.js"),T=n("../assets/icons/icons.js"),I=n("./root/components/Button/index.js"),x=n("./root/components/Progress/Progress.js"),C=n("./root/components/CloseButton/CloseButton.js"),y=n("./queue/components/ExpandedItem/ExpandedItem.js"),A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},R=g.b.div(_()("ExpandedQueue","relative left-0 right-0 bottom-0 top-0","w-100 h-100","flex flex-column"),{borderRadius:6,boxShadow:"0 20px 30px rgba(0,0,0,.5)"}),L=g.b.div(_()("ExpandedQueue--HEAD","flex-none","flex items-center justify-between","bg-window bg-window-c","bb bc-window-border"),{height:52,paddingLeft:20,paddingRight:20,boxShadow:"0 2px 4px 0 rgba(0,0,0,0.5)"}),w=g.b.div(_()("ExpandedQueue--BODY","overflow-y-auto","flex-grow flex-wrap","flex content-start","bg-source-bg bg-source-bg-c"),{padding:9}),D=g.b.div(function(e){return _()("ExpandedQueue--FOOTER","flex items-center","bg-window bg-window-c","bt bc-window-border",{"justify-end":!e.showPoweredBy,"justify-between":e.showPoweredBy})},{height:"70px",padding:"9px 16px"}),P=function(e,t){var n,o,a,s=e.isDone?Object(O.b)("queue.title"):e.isSimulated?Object(O.b)("queue.title_uploading"):Object(O.b)("queue.title_uploading_with_counter",{num:e.active}),c=function(t){return e.rootActions[l.types.SET_QUEUE_ITEMS_RETRY]({ids:[t]})},u=function(t){return e.rootActions[l.types.SET_QUEUE_ITEMS_ABORT]({ids:[t]})},d=e.active?r.a.createElement(v.a,{text:Object(O.b)("queue.abort_all"),className:"mr3",textBreakpoint:"ns",icon:T.b.CLOSE,dataTest:"abort-all-btn",onClick:function(){return e.rootActions[l.types.SET_QUEUE_ITEMS_ABORT]()},fontSize:12,iconSize:14}):null,p=e.failed>0?r.a.createElement(v.a,{dataTest:"retry-all-btn",text:Object(O.b)("queue.retry_failed"),textBreakpoint:"ns",className:"mr3",icon:T.b.RETRY,onClick:function(){return e.rootActions[l.types.SET_QUEUE_ITEMS_RETRY]()},textColorName:"link",fontSize:12,iconSize:14}):null,f=e.done>0&&e.showCompletedButton?r.a.createElement(v.a,{dataTest:"show-completed-btn",text:Object(O.b)("queue.show_completed"),textBreakpoint:"ns",className:"mr3",icon:T.b.COMPLETE,onClick:function(){return e.showCompleted()},textColorName:"link",fontSize:12,iconSize:14}):null,m=e.isMultiple&&e.showUploadMoreButton&&r.a.createElement(v.a,{dataTest:"upload-btn",text:Object(O.b)("queue.upload_more"),textBreakpoint:"ns",className:"mr3",icon:T.b.UPLOAD_MORE,fontSize:12,iconSize:14,onClick:function(){return e.rootActions[l.types.SET_WIDGET_VIEW_TYPE]({type:i.a.WIDGET_VIEW_TYPES.INITIAL,router:t.router})}}),b=r.a.createElement(I.default,{dataTest:"queue-done",disabled:!e.isDone||e.isInline,colorName:"action",icon:T.b.CHECKED,text:Object(O.b)("queue.done"),onClick:function(){return e.rootActions[l.types.DO_CLOSE_WIDGET]()}});return r.a.createElement(R,{"data-test":"expanded-upload-queue"},r.a.createElement(L,{"data-test":"upload-queue-header"},r.a.createElement(g.b.Div,{className:"flex items-center fw5 f5","data-test":"upload-queue-title"},e.isDone?null:r.a.createElement(x.a,{size:33,percentage:e.queueProgress,className:"mr3"}),s),e.isInline?null:r.a.createElement(g.b.Div,{className:"flex flex-nowrap items-center justify-end","data-test":"eq-close-mini-box"},r.a.createElement(S.a,{dataTest:"minimize-dialog-icon",iconSize:"sm",className:"mr6",icon:T.b.KEYBOARD_DOWN,onClick:function(){return e.rootActions[l.types.SET_WIDGET_VIEW_TYPE]({type:i.a.WIDGET_VIEW_TYPES.MINI})}}),r.a.createElement(C.a,null))),r.a.createElement(w,null,(n=e.queueIds,o=1===n.length,a=_()("self-start",{"w-50 w-25-ns":!o,"w-100":o}),n.map(function(e){return r.a.createElement(y.a,{className:a,key:"q_ex_item_"+e,id:e,paddingBottom:o?"430px":"100%",gutter:o?0:17,retryFailed:c,abort:u})}))),r.a.createElement(D,{showPoweredBy:e.showPoweredBy},e.showPoweredBy?r.a.createElement(j.a,null):null,r.a.createElement("div",{className:"flex items-center"},d,p,f,m,b)))};P.contextTypes={router:E.a.object};var U=Object(a.b)(function(e){return A({},Object(m.selectQueueCounters)(e),{queueIds:Object(m.selectUploadQueueItemIds)(e),showCompletedButton:Object(m.selectShowCompletedButton)(e),showUploadMoreButton:Object(m.selectShowUploadMoreButton)(e),showPoweredBy:Object(u.selectShowPoweredBy)(e),queueProgress:Object(m.selectQueueProgress)(e),isInline:Object(u.selectIsInlineMode)(e),isMultiple:Object(u.selectIsMultipleEnabled)(e)})},Object(c.a)({rootActions:l.default}))(P),N=n("../node_modules/tinycolor2/tinycolor.js"),M=n.n(N),F=n("./root/components/SvgIcon/index.js"),k=n("./utils/domUtils.js"),B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},G=g.b.div(_()("pl2 pr2 pl0-ns pr0-ns","h-100 w-100")),H=g.b.div("MinimizedQueue-LEFT-BLOCK flex items-center w-25 pointer"),V=g.b.div("MinimizedQueue-MID-BLOCK flex items-center justify-end w-50"),W=g.b.div("MinimizedQueue-RIGHT-BLOCK flex items-center"),q=g.b.div(function(e){var t=e.palette;return{width:1,height:51,backgroundColor:M()(t.windowBorder).setAlpha(.2).toRgbString()}}),z=g.b.div(_()("w-100 pointer","flex items-center justify-between","bg-window bg-window-c ba bc-window-border","br1-ns"),function(e){var t=e.styles;return B({height:51,padding:"0 15px",boxShadow:"0 2px 4px 0 rgba(0,0,0,0.5)"},t)}),Q=Object(a.b)(function(e){return B({},Object(m.selectQueueCounters)(e),{showCompletedButton:Object(m.selectShowCompletedButton)(e),palette:u.selectPalette,queueProgress:Object(m.selectQueueProgress)(e)})},Object(c.a)({rootActions:l.default}))(function(e){var t=function(t){e.rootActions[l.types.SET_QUEUE_ITEMS_RETRY](),t.stopPropagation()},n=function(t){e.showCompleted(),t.stopPropagation()};return r.a.createElement(G,null,r.a.createElement(z,B({"data-test":"minimized-upload-queue"},e,{onClick:function(){e.rootActions[l.types.SET_WIDGET_VIEW_TYPE]({type:i.a.WIDGET_VIEW_TYPES.EXPANDED,userAction:!0})}}),r.a.createElement(H,{"data-test":"left-block"},e.hasActive?r.a.createElement("div",{"data-test":"uploading-place-holder",className:"flex items-center pl2 pr2"},r.a.createElement(x.a,{size:33,percentage:e.queueProgress}),r.a.createElement("div",{className:_()("ml4 f5",{"dn db-ns":Object(k.d)()})},Object(O.b)("queue.mini_title_uploading"))):null,e.isDone?r.a.createElement("div",{"data-test":"done-place-holder",className:_()("flex items-center pl2 pr2 pointer")},r.a.createElement(F.default,{path:T.b.UPLOAD,size:24,colorName:"link"}),r.a.createElement("div",{className:"ml4 f5"},Object(O.b)("queue.statuses.uploaded"))):null),r.a.createElement(V,{"data-test":"middle-block"},!!e.done&&r.a.createElement(o.Fragment,null,r.a.createElement(q,e),r.a.createElement("div",{"data-test":"complete-place-holder",className:_()("flex items-center c-link pointer pl2 pr2 lh-solid w-50-b1 justify-center")},r.a.createElement("div",{className:_()("mr2 fw6 f6 nowrap",{"dn db-ns":Object(k.d)()}),"data-test":"min-queue-upload-count",onClick:function(t){return e.showCompletedButton&&n(t)}},Object(O.b)("queue.mini_upload_count",{num:e.done})),e.showCompletedButton?r.a.createElement(F.default,{dataTest:"show-completed-button",path:T.b.COMPLETE,size:Object(k.d)()?"md":"xs",colorName:"link",onClick:n,title:Object(O.b)("queue.show_completed")}):null)),!!e.failed&&r.a.createElement(o.Fragment,null,r.a.createElement(q,e),r.a.createElement("div",{"data-test":"failed-place-holder",className:_()("flex items-center c-link pointer pl2 pr2 lh-solid w-50-b1 justify-center")},r.a.createElement("div",{className:_()("mr2 fw6 f6 nowrap",{"dn db-ns":Object(k.d)()})},Object(O.b)("queue.mini_failed",{num:e.failed})),r.a.createElement(F.default,{path:T.b.RETRY,size:Object(k.d)()?"md":"xs",colorName:"link",onClick:t})))),r.a.createElement(W,{"data-test":"right-block"},r.a.createElement(S.a,{dataTest:"maximize-dialog-icon",iconSize:"sm",className:"ml6 pointer",icon:T.b.KEYBOARD_UP}),r.a.createElement(S.a,{dataTest:"close-dialog-icon",iconSize:"sm",className:"min-close-btn ml6 pointer",icon:T.b.CLOSE,onClick:function(t){e.rootActions[l.types.DO_CLOSE_WIDGET](),t.stopPropagation()}}))))});function X(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.d(t,"QueueView",function(){return Y});var Y=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=X(this,e.call.apply(e,[this].concat(a))),o.showCompleted=function(){o.props.actions[f.types.SEND_SHOW_COMPLETED](o.props.uploader)},X(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.clearErrorMessage()},t.prototype.componentDidUpdate=function(){var e=this.props,t=e.isMultiple,n=e.doneWithSuccess,o=e.rootActions,r=e.isInline;e.singleUploadAutoClose&&!t&&!r&&n&&o[l.types.DO_CLOSE_WIDGET]()},t.prototype.clearErrorMessage=function(){this.props.rootActions[l.types.CLEAR_NOTIFICATION]({id:p.a.SELECTION_MAX_REACHED})},t.prototype.render=function(){return this.props.widgetViewType===i.a.WIDGET_VIEW_TYPES.MINI?r.a.createElement(Q,{showCompleted:this.showCompleted}):r.a.createElement(U,{showCompleted:this.showCompleted})},t}(o.Component);t.default=Object(a.b)(Object(s.createStructuredSelector)({isMultiple:u.selectIsMultipleEnabled,widgetViewType:u.selectWidgetViewType,doneWithSuccess:m.selectIsDoneWithSuccess,isInline:u.selectIsInlineMode,singleUploadAutoClose:u.selectSingleUploadAutoClose}),Object(c.a)({actions:f.default,rootActions:l.default}))(Object(d.b)(Y))},"./queue/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./common/reducerBase.js"),r=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),a=n.n(r);t.default={queueView:Object(o.a)(a()({__record:"QueueRecord"}),{})}},"./queue/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./common/consts.js"),r=n("./routing/utils.js"),a=n("./queue/components/QueueView/index.js");t.default=[{path:Object(r.a)(o.a.QUEUE),component:a.default,routes:[]}]},"./queue/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectUploadQueueItemIds",function(){return i}),n.d(t,"selectUploadQueueItems",function(){return s}),n.d(t,"selectQueueCounters",function(){return u}),n.d(t,"selectCompletedIds",function(){return c}),n.d(t,"selectShowCompletedButton",function(){return d}),n.d(t,"selectShowUploadMoreButton",function(){return p}),n.d(t,"selectQueueProgress",function(){return f}),n.d(t,"selectIsDoneWithSuccess",function(){return l});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),n("./root/selectors/index.js")),a=function(e){return e.uploadQueue.queueIds.map(function(t){return e.uploadQueue.queueItems[t]})},s=Object(o.createSelector)(a,function(e){return e}),i=Object(o.createSelector)(function(e){return e.uploadQueue.queueIds},function(e){return e}),c=Object(o.createSelector)(a,function(e){return e.reduce(function(e,t){return t.done&&!t.failed?e.concat(t.id):e},[])}),u=Object(o.createSelector)(function(e){return e.uploadQueue},r.getQueueCounters),l=Object(o.createSelector)(u,function(e){return e.isDone&&!e.failed}),d=Object(o.createSelector)(r.getWidgetConfig,function(e){return e.showCompletedButton}),p=Object(o.createSelector)(r.getWidgetConfig,function(e){return e.showUploadMoreButton}),f=Object(o.createSelector)(a,function(e){var t=e.reduce(function(e,t){return e+t.progress},0);return t&&Math.round(t/e.length)})},"./queue/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{queue:{title:"Upload Queue",title_uploading_with_counter:"Uploading {{num}} Assets",title_uploading:"Uploading Assets",mini_title:"Uploaded",mini_title_uploading:"Uploading",show_completed:"Show completed",retry_failed:"Retry failed",abort_all:"Abort all",upload_more:"Upload more",done:"Done",mini_upload_count:"{{num}} uploaded",mini_failed:"{{num}} failed",statuses:{uploading:"Uploading...",error:"Error",uploaded:"Done",aborted:"Aborted"}}}}}},"./root/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/voca/index.js"),r=n("./appConfig.js"),a=n("./common/consts.js"),s=n("./common/i18n.js"),i=n("./utils/domUtils.js"),c=n("./common/actionsBase.js"),u=n("./root/data/NotificationsData.js"),l=n("./root/selectors/index.js"),d=n("../node_modules/lodash/pick.js"),p=n.n(d),f=n("./common/logger.js"),m=n("./services/imagesPrefetcher.js"),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},E=this;var g,h,_,O=Object(f.b)(),S={cameraIcon:"sources",cameraIconActive:"sources",dropboxIcon:"sources",dropboxIconActive:"sources",facebookIcon:"source",facebookActiveIcon:"source",logoutIcon:"sourceSection"},v=Object.keys(S),j=(g=regeneratorRuntime.mark(function e(t,n,o){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m.a)(t);case 3:r=e.sent,O.log("[root.configImagesLoader]: image loader worker results: ",r),n(o.SET_CUSTOM_IMAGES_LOAD_RESULTS,{results:r}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),O.error("[configImageLoader]: unexpected error when trying to load custom images",e.t0),a=t,s=n,i=o,void 0,c=Object.keys(a).reduce(function(e,t){return e[t]={success:!1,key:t,reason:"unexpected"},e},{}),s(i.SET_CUSTOM_IMAGES_LOAD_RESULTS,{results:c});case 12:case"end":return e.stop()}var a,s,i,c},e,E,[[0,8]])}),h=function(){var e=g.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e,t,n){return h.apply(this,arguments)}),T=function(e,t){for(var n=t.split("."),o=e,r=0;r<n.length&&(o=o[n[r]]?o[n[r]]:null);r++);return o},I=function(e,t,n,r){if(e.styles){var a={};e.styles.elements&&(d=e.styles.elements,f={},a=v.reduce(function(e,t){var n=S[t],r=n.split(".");if(!f[n])for(var a=0;a<r.length;a++){var s=r.slice(0,a+1).join(".");f[s]||(f[s]=T(d,s))}return f[n]&&f[n][t]&&Object(o.startsWith)(f[n][t],"http")&&(e[t]=f[n][t]),e},{})),e.styles.images&&(a=b({},a,p()(e.styles.images,v))),Object.keys(a).length&&(s=a,i=r(),c=Object(l.selectCustomImagesToLoad)(i),u=Object(l.selectCustomImagesResults)(i),a=Object.keys(s).reduce(function(e,t){return u[t]||c[t]||(e[t]=s[t]),e},{}),Object.keys(a).length&&(O.log("[configImagesLoader]: about to prefetch custom images: ",a),t(n.SET_CUSTOM_IMAGES_TO_LOAD,{images:a}),j(a,t,n)))}var s,i,c,u,d,f};n.d(t,"types",function(){return A});var x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},C={},y=!1,A={SET_WIDGET_CONFIG:"SET_WIDGET_CONFIG",SET_WIDGET_STYLES:"SET_WIDGET_STYLES",SET_QUEUE_ITEMS:"SET_QUEUE_ITEMS",SET_QUEUE_ITEMS_RETRY:"SET_QUEUE_ITEMS_RETRY",SET_QUEUE_ITEMS_ABORT:"SET_QUEUE_ITEMS_ABORT",SET_ACTIVE_SOURCE:"SET_ACTIVE_SOURCE",SET_MAX_SELECT_REACHED:"SET_MAX_SELECT_REACHED",SET_INVALID_PUBLIC_ID_FOUND:"SET_INVALID_PUBLIC_ID_FOUND",SET_ERROR:"SET_ERROR",SET_PROMPT:"SET_PROMPT",SET_IS_RESPONSIVE:"SET_IS_RESPONSIVE",SET_UPLOAD_TAGS:"SET_UPLOAD_TAGS",SET_UPLOAD_PRESET:"SET_UPLOAD_PRESET",SET_PUBLIC_ID:"SET_PUBLIC_ID",SET_PUBLIC_ID_INVALID:"SET_PUBLIC_ID_INVALID",SET_WIDGET_SHOWING:"SET_WIDGET_SHOWING",SET_WIDGET_VIEW_TYPE:"SET_WIDGET_VIEW_TYPE",SET_SUGGESTED_TAGS:"SET_SUGGESTED_TAGS",SET_SUGGESTED_UPLOAD_PRESETS:"SET_SUGGESTED_UPLOAD_PRESETS",SET_TAGS_INPUT_VALUE:"SET_TAGS_INPUT_VALUE",SET_BATCH_STARTED:"SET_BATCH_STARTED",SET_IS_PREMIUM:"SET_IS_PREMIUM",SET_SUCCESSFUL_COUNTER:"SET_SUCCESSFUL_COUNTER",SET_CUSTOM_IMAGES_LOAD_RESULTS:"SET_CUSTOM_IMAGES_LOAD_RESULTS",SET_CUSTOM_IMAGES_TO_LOAD:"SET_CUSTOM_IMAGES_TO_LOAD",SET_DICTIONARY_TEXT_CHANGED:"SET_DICTIONARY_TEXT_CHANGED",SET_LAST_PRE_QUEUE_PATH:"SET_LAST_PRE_QUEUE_PATH",SET_UPLOADER_CROP_SOURCES:"SET_UPLOADER_CROP_SOURCES",SET_DEFAULT_CROP:"SET_DEFAULT_CROP",SET_CROP:"SET_CROP",ADD_UPLOAD_TO_QUEUE:"ADD_UPLOAD_TO_QUEUE",ADD_NOTIFICATION:"ADD_NOTIFICATION",DO_CLOSE_WIDGET:"DO_CLOSE_WIDGET",DO_INC_CLOSE_COUNTER:"DO_INC_CLOSE_COUNTER",DO_REGISTER_GLOBAL_KEY_EVENTS:"DO_REGISTER_GLOBAL_KEY_EVENTS",DO_NAV_TO_PREVIOUS_PATH:"DO_NAV_TO_PREVIOUS_PATH",TOGGLE_ADVANCED_OPTIONS:"TOGGLE_ADVANCED_OPTIONS_SHOW",TOGGLE_RESPONSIVE_MENU:"TOGGLE_RESPONSIVE_MENU",CLEAR_MAX_SELECT_REACHED:"CLEAR_MAX_SELECT_REACHED",CLEAR_NOTIFICATION:"CLEAR_NOTIFICATION",CLEAR_ALL_NOTIFICATIONS:"CLEAR_ALL_NOTIFICATIONS",CLEAR_QUEUE:"CLEAR_QUEUE",CLEAR_ADVANCED_VALUES:"CLEAR_ADVANCED_VALUES",CLEAR_CANCELLED_UPLOADS:"CLEAR_CANCELLED_UPLOADS",REMOVE_UPLOAD_TAG:"REMOVE_UPLOAD_TAG",REMOVE_LAST_UPLOAD_TAG:"REMOVE_LAST_UPLOAD_TAG"},R=function(e){C[e]&&(C[e](),C[e]=null)},L=function(e,t){Object(c.c)(t)(A.ADD_NOTIFICATION,{notification:e}),R(e.id),e.persist||(C[e.id]=Object(i.b)(function(){return w({id:e.id},t)},r.a.notifications.timeout))},w=function(e,t){var n=e.id;Object(c.c)(t)(A.CLEAR_NOTIFICATION,{id:n}),R(n)},D=/^(https?:\/|data:image)\//i,P=function(e){return!Object(o.isBlank)(e)&&D.test(e)},U=function(e){return Object(c.c)(e)(A.DO_INC_CLOSE_COUNTER)},N=function(e,t){var n=Object(l.selectPreQueuePath)(t);n?e.history.push(n):e.history.goBack()};t.default=Object(c.d)(A,((_={})[A.ADD_UPLOAD_TO_QUEUE]=Object(c.b)(function(e,t,n,r){if((p=e).files&&p.files.length&&!~p.files.findIndex(function(e){return Object(o.isString)(e)&&!P(e)||Object(o.isString)(e.file)&&!P(e.file)})){var a=(s=e,i=n(),c=Object(l.selectAddedUploads)(i),d={files:s.files,cropInfo:s.cropInfo?s.cropInfo:[]},c&&c.files&&c.files.length&&(d.files=[],d.cropInfo=[],s.files.forEach(function(e,t){-1===c.files.indexOf(e)?(d.files.push(e),s.cropInfo&&s.cropInfo[t]&&d.cropInfo.push(s.cropInfo[t])):c.cropInfo&&!c.cropInfo[c.files.indexOf(e)]&&s.cropInfo&&s.cropInfo[0]&&d.cropInfo.push(s.cropInfo[t])})),d);a.files.length||a.cropInfo.length?r(A.ADD_UPLOAD_TO_QUEUE,{files:a.files,cropInfo:a.cropInfo}):L(u.b[u.a.NO_NEW_FILES],t)}else L(u.b[u.a.INVALID_URL],t);var s,i,c,d,p}),_[A.SET_ERROR]=Object(c.b)(function(e,t){return L(x({},u.b[u.a.ERROR],{text:e.text}),t)}),_[A.SET_PROMPT]=Object(c.b)(function(e,t){return L(x({},u.b[u.a.PROMPT],{text:e.text,actions:e.actions,width:void 0===e.width?50:e.width,persist:void 0===e.persist||e.persist,underlay:void 0===e.underlay||e.underlay}),t)}),_[A.SET_INVALID_PUBLIC_ID_FOUND]=Object(c.b)(function(e,t,n){n(A.SET_INVALID_PUBLIC_ID_FOUND),L(u.b[u.a.INVALID_PUBLIC_ID],e)}),_[A.SET_MAX_SELECT_REACHED]=Object(c.b)(function(e){return L(u.b[u.a.SELECTION_MAX_REACHED],e)}),_[A.CLEAR_MAX_SELECT_REACHED]=Object(c.b)(function(e){return w({id:u.a.SELECTION_MAX_REACHED},e)}),_[A.CLEAR_NOTIFICATION]=Object(c.b)(function(e,t){return w(e,t)}),_[A.DO_CLOSE_WIDGET]=Object(c.b)(U),_[A.DO_REGISTER_GLOBAL_KEY_EVENTS]=Object(c.b)(function(e,t){!function(e,t){if(!y){var n=t(),o=Object(l.selectIsInlineMode)(n);!Object(l.selectCloudName)(n)||Object(i.d)()||o||(self.addEventListener("keyup",function(t){27===t.which&&U(e)}),y=!0)}}(e,t)}),_[A.SET_WIDGET_VIEW_TYPE]=Object(c.b)(function(e,t,n,o){if(e.router){var r=n();e.type===a.a.WIDGET_VIEW_TYPES.INITIAL&&e.type!==Object(l.selectWidgetViewType)(r)&&N(e.router,r)}o(A.SET_WIDGET_VIEW_TYPE,{type:e.type,userAction:e.userAction})}),_[A.SET_WIDGET_CONFIG]=Object(c.b)(function(e,t,n,o){var r=n();e.language&&Object(l.selectConfigLanguage)(r)!==e.language&&s.c(e.language);var a=[[A.SET_WIDGET_CONFIG,e]];e.text&&(s.a(e.text),a.push([A.SET_DICTIONARY_TEXT_CHANGED])),(e.styles||e.theme)&&a.push([A.SET_WIDGET_STYLES,x({theme:e.theme},e.styles)]),o(a),I(e,o,A,n)}),_[A.CLEAR_ALL_NOTIFICATIONS]=Object(c.b)(function(e){Object.keys(C).forEach(function(t){return w({id:t},e)})}),_[A.SET_BATCH_STARTED]=Object(c.b)(function(e,t,n){var o,r,s,i,c,u=(o=t(),r=Object(l.selectWidgetViewTypeChangeByUser)(o),s=Object(l.selectAutoMinimizeConfig)(o),i=Object(l.selectIsInlineMode)(o),(c=Object(l.selectWidgetViewType)(o))!==a.a.WIDGET_VIEW_TYPES.MINI&&(c=!s||r||i?a.a.WIDGET_VIEW_TYPES.EXPANDED:a.a.WIDGET_VIEW_TYPES.MINI),c);n([[A.SET_WIDGET_VIEW_TYPE,{type:u}],[A.SET_BATCH_STARTED]])}),_[A.DO_NAV_TO_PREVIOUS_PATH]=Object(c.b)(function(e,t,n){return N(e,n())}),_))},"./root/components/AdvancedOptions/AdvancedOptions.scss":function(e,t){},"./root/components/AdvancedOptions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"AdvancedOptions",function(){return _});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/lodash/throttle.js"),i=n.n(s),c=n("../node_modules/voca/index.js"),u=(n.n(c),n("../node_modules/classnames/index.js")),l=n.n(u),d=n("./common/i18n.js"),p=n("./root/actions/index.js"),f=n("./root/selectors/index.js"),m=n("./root/components/TaggedInput/index.js"),b=n("./root/components/UploadPresetInput/index.js"),E=n("./root/components/UploadContainer/uploaderContext.js"),g=n("./root/components/AdvancedOptions/AdvancedOptions.scss");n.n(g);function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=r=h(this,e.call.apply(e,[this].concat(s))),r.state={suggestionsOpen:!1},r.onPublicIdChange=function(e){e.target&&r.props[p.types.SET_PUBLIC_ID]({value:Object(c.trimLeft)(e.target.value)})},r.onTagsChange=function(e){r.props[p.types.SET_UPLOAD_TAGS]({tags:e})},r.onUploadPresetChange=function(e){r.props[p.types.SET_UPLOAD_PRESET]({uploadPreset:e})},r.onKeyUp=function(e){27!==e.which&&"Escape"!==e.key||e.stopPropagation()},r.removeTagHandler=function(e){r.props[p.types.REMOVE_UPLOAD_TAG]({index:e})},r.removeLastTagHandler=function(){r.props[p.types.REMOVE_LAST_UPLOAD_TAG]()},r.filterSuggestions=function(e){r.props.useTagsCallback&&r.props.uploader.retrieveClientTags(e)},r.filterPresetSuggestions=function(e){r.props.suggestedUploadPresets&&r.props.uploader.retrieveClientUploadPresets(e)},r.tagsInputChangeHandler=function(e){r.props[p.types.SET_TAGS_INPUT_VALUE]({value:e})},r.reportSuggestionsContainerState=function(e){var t=e===m.SUGGEST_CONTAINER_STATE.OPEN;r.state.suggestionsOpen!==t&&r.setState({suggestionsOpen:t})},r.idInputRef=Object(o.createRef)(),h(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.uploader;e.useUploadPresetsCallback&&t.retrieveClientUploadPresets()},t.prototype.componentDidUpdate=function(){this.props.publicIdError&&this.idInputRef.current&&this.idInputRef.current.focus()},t.prototype.render=function(){var e=this.props,t={"bc-window-border":!e.publicIdError,"bc-error":e.publicIdError};return r.a.createElement("div",{className:l()("slide bt",t),onKeyUp:this.onKeyUp},r.a.createElement("div",{className:"field id"},r.a.createElement("input",{type:"text","data-test":"public-id",ref:this.idInputRef,placeholder:Object(d.b)("advanced_options.public_id_ph"),className:l()(t),value:e.setPublicId||"",onChange:i()(this.onPublicIdChange,100)})),r.a.createElement("div",{className:l()("field tag",{"tags-suggestions-open":this.state.suggestionsOpen})},r.a.createElement(m.default,{className:"tagsinput",id:"adv-tag-select",placeholder:Object(d.b)("advanced_options.tags_ph"),values:e.setTags,suggestions:e.suggestedTags,changeHandler:this.onTagsChange,inputChangeHandler:i()(this.tagsInputChangeHandler,100),removeTag:this.removeTagHandler,removeLastTag:this.removeLastTagHandler,filterSuggestions:this.filterSuggestions,inputValue:e.tagsInputValue,reportSuggestionsContainerState:this.reportSuggestionsContainerState})),e.useUploadPresetsCallback&&r.a.createElement("div",{className:l()("field upload-preset")},r.a.createElement(b.default,{options:e.suggestedUploadPresets,onChange:this.onUploadPresetChange,value:e.setUploadPreset,filterSuggestions:this.filterPresetSuggestions})))},t}(o.Component);t.default=Object(a.b)(f.selectAdvancedOptions,p.default)(Object(E.b)(_))},"./root/components/App/App.scss":function(e,t){},"./root/components/App/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-router/es/index.js"),s=n("../node_modules/react-redux/es/index.js"),i=n("../node_modules/classnames/index.js"),c=n.n(i),u=n("../node_modules/glamorous/dist/glamorous.esm.js"),l=n("../node_modules/reselect/lib/index.js"),d=n("./appConfig.js"),p=n("./utils/sassVarsUtils.js"),f=n("./common/consts.js"),m=610,b=n("./root/components/CloseButton/CloseButton.js"),E=n("./root/actions/index.js"),g=n("./root/selectors/index.js"),h=n("./root/components/TopMenu/index.js"),_=n("./common/i18n.js"),O=n("./root/components/Button/index.js"),S=n("./root/components/MenuButton/MenuButton.js"),v=n("../assets/icons/icons.js"),j=n("./root/components/SvgIcon/index.js"),T=u.b.div(c()("Notification","absolute center","left-0 right-0","w-100","z-10"),{top:52}),I=u.b.div(c()("overflow-hidden","ma4","flex items-center justify-between","ba","bg-window bc-window-border bg-window-c","relative","z-1"),{padding:"14px 16px",boxShadow:"0 6px 15px rgba(0,0,0,0.24)"}),x=u.b.div(c()("flex items-center","f5")),C=u.b.div(c()("ml4 flex items-center")),y=u.b.div(c()("Notification-underlay","fixed","top-0","right-0","bottom-0","left-0"),{background:"rgba(0, 0, 0, 0.5)"}),A=g.selectNotification,R=Object(s.b)(A,E.default)(function(e){return e.id&&e.text?r.a.createElement(T,{className:c()(e.width?"w-"+e.width+"-ns":"w-50-ns")},e.underlay&&r.a.createElement(y,null),e.id&&r.a.createElement(I,null,r.a.createElement(x,null,r.a.createElement(j.default,{className:"mr3 flex-shrink-0",size:"xl2",path:v.b.ERROR,colorName:"error"}),Object(_.b)(e.text)),e.actions&&e.actions.length?r.a.createElement(C,null,e.actions.map(function(e){return r.a.createElement(O.default,{key:e.label,onClick:e.onClick,colorName:e.color,textColorName:e.textColor,text:e.label,fontSize:12})})):r.a.createElement(C,null,r.a.createElement(S.a,{iconSize:"sm",icon:v.b.CLOSE,onClick:function(){return e[E.types.CLEAR_NOTIFICATION]({id:e.id})}})))):null}),L=n("./root/components/ResponsiveWidthMonitor/index.js"),w=n("./root/components/Progress/Progress.js"),D=n("../node_modules/react-dom/index.js"),P=n.n(D),U=n("../node_modules/voca/index.js"),N=n("./utils/colorUtils.js"),M=function(e){return Object.keys(e).reduce(function(t,n){var o,r,a,s=e[n],i=Object(U.kebabCase)(n),c=(o=s,r=e.textLight,a=e.textDark,Object(N.b)(r,o,!0)?r:a);return"\n                "+t+"\n                \n                .bg-"+i+",\n                .bg-"+i+"-hover:hover {\n                    background-color: "+s+";\n                }\n    \n                /* -- */\n    \n                .bg-"+i+"-c,\n                .bg-"+i+"-c > a,\n                a.bg-"+i+"-c {\n                    color: "+c+";\n                }\n    \n                .bg-"+i+"-fill,\n                .fill-bg-"+i+" {\n                    fill: "+c+";\n                }\n                \n                /* -- */\n                .c-"+i+",\n                .c-"+i+" > a,\n                a.c-"+i+",\n                .c-"+i+"-hover:hover {\n                    color: "+s+";\n                }\n                \n                /* -- */\n    \n                .bc-"+i+" {\n                    border-color: "+s+";\n                }\n                \n                .fill-"+i+",\n                .fill-"+i+" path,\n                .fill-"+i+"-hover:hover path {\n                    fill: "+s+";\n                }\n                .bg-"+i+"-fill,\n                .fill-bg-"+i+" {\n                    fill: "+c+";\n                }\n                \n                /* -- */\n                .c-"+i+",\n                .c-"+i+" > a,\n                a.c-"+i+",\n                .c-"+i+"-hover:hover {\n                    color: "+s+";\n                }\n    \n                .c-"+i+"-bg {\n                    background-color: "+c+";\n                }\n    \n                /* -- */\n    \n                .bc-"+i+" {\n                    border-color: "+s+";\n                }\n                \n                .fill-"+i+",\n                .fill-"+i+" path,\n                .fill-"+i+"-hover:hover path {\n                    fill: "+s+";\n                }\n    \n                .fill-"+i+"-c {\n                    fill: "+c+";\n                }\n    \n                .circle-"+i+" circle {\n                    stroke: "+s+";\n                }\n            "},"")},F=function(e){return r.a.createElement("link",{href:e,rel:"stylesheet",key:e})},k=function(e){var t,n,o=e.palette,r=e.fonts,a=M(o);return"\n        "+((n=(t=r)&&t.fontFamily)&&"default"!==n.toLowerCase()||(n=d.a.customization.defaultFontFamily),".font-root {\n        font-family: "+n+"; \n    }")+"\n        "+a},B=Object(s.b)(Object(l.createStructuredSelector)({palette:g.selectPalette,fonts:g.selectFonts}))(function(e){var t=e.palette,n=e.fonts,a=k({palette:t,fonts:n}),s=document.getElementsByTagName("head")[0];return P.a.createPortal(r.a.createElement(o.Fragment,null,n&&n.links.map(F),r.a.createElement("style",{type:"text/css","data-customization":"palette,font"},a)),s)});n("./root/components/App/App.scss");function G(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.d(t,"App",function(){return W});var H=u.b.div(function(e){return c()("popup-box overflow-hidden br0 h-100 w-100 top-0 left-0",{"bg-source-bg":!e.cloudName})},{transform:"none",margin:"0 auto",boxShadow:"0 20px 30px rgba(0,0,0,.7)"},function(e){var t;return(t={})[Object(p.a)("ns")]={position:e.isInline?"static":"absolute",top:e.isInline?null:"50%",left:e.isInline?null:"50%",transform:e.isInline?null:"translate(-50%,-50%)",borderRadius:e.isInline?null:5,width:e.isInline?null:790,height:m},t}),V=u.b.div(function(e){var t=e.isMultiple,n=e.isQueue,o=e.showAdvancedOptions;return c()("fixed top-0 bottom-0 left-0 right-0 widget upload-popup font-root",{multiple_enabled:t,"queue-enabled":n,"advanced-options":o})},function(e){var t=e.cloudName,n=e.background;return{zIndex:6,backgroundColor:t?n:"none","@media(max-height: 100px)":{background:"none"}}}),W=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=o=G(this,e.call.apply(e,[this].concat(s))),o.renderCloseButton=function(){return o.props.isInline?null:r.a.createElement(b.a,{className:"dn db-ns btn-close-popup pointer absolute"})},o.renderAppContent=function(){return o.props.cloudName?[r.a.createElement(h.default,{key:"app_top_menu"}),o.props.children]:[r.a.createElement(w.a,{size:42,overlay:!0,key:"app_pi"})]},G(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props[E.types.DO_REGISTER_GLOBAL_KEY_EVENTS]()},t.prototype.componentDidUpdate=function(e){!e.cloudName&&this.props.cloudName&&this.props[E.types.DO_REGISTER_GLOBAL_KEY_EVENTS]()},t.prototype.render=function(){var e=!!~this.props.location.pathname.indexOf(f.a.QUEUE);return r.a.createElement(L.default,{query:"(max-width: "+d.a.ui.responsiveWidth+")"},r.a.createElement(B,{key:"widget_styles"}),r.a.createElement(V,{"data-test":"upload-widget-popup","data-language":this.props.language,cloudName:this.props.cloudName,background:this.props.frameStyles.background,isMultiple:this.props.isMultiple,isQueue:e,showAdvancedOptions:this.props.showAdvancedOptions},r.a.createElement(H,this.props,r.a.createElement(R,null),this.renderCloseButton(),this.renderAppContent())))},t}(o.Component);t.default=Object(a.d)(Object(s.b)(Object(l.createStructuredSelector)({isMultiple:g.selectIsMultipleEnabled,isInline:g.selectIsInlineMode,cloudName:g.selectCloudName,language:g.selectConfigLanguage,textVersion:g.selectDictionaryTextVersion,showAdvancedOptions:g.selectShouldShowAdvancedOptions,frameStyles:g.selectFrameStyles}),E.default)(W))},"./root/components/Button/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Button",function(){return d});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/classnames/index.js"),s=n.n(a),i=n("../node_modules/glamorous/dist/glamorous.esm.js"),c=n("./root/components/SvgIcon/index.js"),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=i.b.button(function(e){var t,n=e.colorName,o=e.className,r=e.textColorName;return s()(o,"BUTTON","outline-0 flex-nowrap items-center justify-center pointer fw6",((t={})["bg-"+(n||"")]=n,t["bg-"+(n||"")+"-c"]=!r&&n,t["c-"+(r||"")]=r,t))},function(e){var t=e.fontSize,n=e.text,o=e.colorName,r={fontSize:t,display:"inline-flex",textOverflow:"ellipsis",border:"none",borderRadius:4,backgroundOrigin:"border-box",paddingTop:10,paddingBottom:10,paddingLeft:n?16:10,paddingRight:n?16:10};return u({},r,o?{"&:hover":{boxShadow:"0 2px 4px 0 rgba(0, 0, 0, .5)"},"&:active:hover:enabled":{boxShadow:"inset 0 2px 5px 0 rgba(14, 47, 90, .5)"},":disabled":{opacity:"0.5",pointerEvents:"none"}}:{":disabled":{opacity:"0.5",pointerEvents:"none"}})}),d=function(e){var t,n,o=e.text,a=e.icon,i=e.disabled,d=e.className,p=e.onClick,f=e.colorName,m=e.textColorName,b=e.textBreakpoint,E=e.iconSize,g=void 0===E?"md":E,h=e.fontSize,_=void 0===h?14:h,O=e.title,S=e.dataTest;return r.a.createElement(l,u({},S?{"data-test":S}:{},{disabled:i,onClick:p,title:O,className:d,colorName:f,textColorName:m,text:o,fontSize:_,test:"button"}),a?r.a.createElement(c.default,{size:g,path:a,className:s()((t={mr3:!b&&o},t["mr3-"+(b||"")]=b&&o,t["fill-bg-"+(f||"")]=!m,t["fill-"+(m||"")]=m,t))}):null,r.a.createElement("span",{className:s()("nowrap",(n={dn:b&&o},n["db-"+(b||"")]=b&&o,n)),"data-debug":d},o))};t.default=d},"./root/components/Checkbox/Checkbox.js":function(e,t,n){"use strict";var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/classnames/index.js"),s=n.n(a),i=n("../node_modules/glamorous/dist/glamorous.esm.js"),c=n("./root/components/SvgIcon/index.js"),u=n("../assets/icons/icons.js");t.a=function(e){var t,n=e.checked,o=e.disabled,a=e.className,l=e.size,d=void 0===l?16:l,p=e.borderWidth,f=void 0===p?1:p,m=e.borderRadius,b=void 0===m?4:m,E=e.borderColor,g=e.onClick,h=i.b.div(s()("ba dib",a,((t={})["bg-action bg-action-c bc-action"]=n,t["bc-menu-icons"]=!n,t["o-70"]=o,t)),{label:"checkbox",borderRadius:b,borderWidth:f,padding:0,width:d,height:d},function(){return{borderColor:n?null:E}});return r.a.createElement(h,{"data-test":"checkbox",disabled:o,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){g&&!o&&g(e)})},n&&r.a.createElement(c.default,{path:u.b.CHECKED,colorName:"bg-action"}))}},"./root/components/CloseButton/CloseButton.js":function(e,t,n){"use strict";var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/classnames/index.js"),s=n.n(a),i=n("../node_modules/react-redux/es/index.js"),c=n("./root/components/MenuButton/MenuButton.js"),u=n("../assets/icons/icons.js"),l=n("./root/actions/index.js"),d=function(e){return r.a.createElement("div",{className:s()("CloseButton",e.className)},r.a.createElement(c.a,{dataTest:"close-dialog-icon",icon:u.b.CLOSE,onClick:function(){return e[l.types.DO_CLOSE_WIDGET]()}}))};d.defaultProps={className:""},t.a=Object(i.b)(null,l.default)(d)},"./root/components/DefaultPanel/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"DefaultPanel",function(){return p});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/react-router/es/index.js"),i=n("./routing/navItems.js"),c=n("./tabs/Local/index.js"),u=n("./common/logger.js"),l=n("./root/selectors/index.js"),d=Object(u.c)(),p=function(e){var t,n,o,a=void 0;if((o=e).defaultSource&&o.route.match&&o.route.match.isExact){var u=(t=Object(i.a)(),n=e.defaultSource,t.find(function(e){return e.id===n})||t[0]);d.log("[DefaultPanel]: redirecting to default panel with path: "+u.path),a=r.a.createElement(s.a,{to:u.path})}else a=r.a.createElement(c.default,{route:e.route});return a};t.default=Object(a.b)(l.selectDefaultSource)(p)},"./root/components/Dropdown/Dropdown.scss":function(e,t){},"./root/components/Dropdown/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/classnames/index.js"),s=n.n(a),i=n("../node_modules/voca/index.js"),c=(n.n(i),n("./root/hocs/ModalWrapper/index.js")),u=n("./root/components/Dropdown/Dropdown.scss");n.n(u);function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=l(this,e.call.apply(e,[this].concat(a))),o.state={isOpen:!1},o.onItemClick=function(e,t){o.toggleDropdown(null,null,!1),o.props.itemClickHandler&&o.props.itemClickHandler(e,t)},o.toggleDropdown=function(e,t,n){o.setState({isOpen:void 0!==n?!!n:!o.state.isOpen})},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isOpen=function(){return this.state.isOpen},t.prototype.renderItems=function(){var e=this;return this.props.items.map(function(t,n){var o=Object(i.isString)(t)?t:t.text;return r.a.createElement("li",{key:"dd_"+o,className:e.props.selectedIndex===n?"active":""},r.a.createElement("span",{className:s()("link",{ellipsis:e.props.listEllipsis}),onClick:function(){return e.onItemClick(t,n)}},o))})},t.prototype.renderTitle=function(){var e=this.props.title,t=(this.props.selectedIndex||0===this.props.selectedIndex)&&~this.props.selectedIndex;return!this.isOpen()&&this.props.showSelectionInTitle&&t&&(e=this.props.items[this.props.selectedIndex],e=Object(i.isString)(e)?e:e.text),e},t.prototype.renderDropdown=function(){var e=this.renderTitle(),t=s()("dropdown usage-box",this.props.className||"",{"drop-active":this.state.isOpen});return r.a.createElement("div",{className:t,"data-test":this.props.dataTest},r.a.createElement("button",{type:"button","data-test":"dropdown-btn",className:s()("btn-usage",{ellipsis:this.props.titleEllipsis}),title:this.props.titleEllipsis&&e,onClick:this.toggleDropdown},e),r.a.createElement("ul",null,this.renderItems()))},t.prototype.renderModalDropDown=function(){var e=this,t=Object(c.default)({handleShouldHide:function(){return e.toggleDropdown(null,null,!1)}})(this.renderDropdown());return r.a.createElement(t,null)},t.prototype.render=function(){return this.isOpen()?this.renderModalDropDown():this.renderDropdown()},t}(o.PureComponent);d.defaultProps={selectedIndex:-1,className:"",showSelectionInTitle:!0,itemClickHandler:null},t.default=d},"./root/components/DropdownList/DropdownList.js":function(e,t,n){"use strict";var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/classnames/index.js"),s=n.n(a),i=n("../node_modules/glamorous/dist/glamorous.esm.js"),c=n("../node_modules/downshift/dist/downshift.esm.js"),u=n("../node_modules/lodash/isEmpty.js"),l=n.n(u),d=n("../node_modules/react-popper/lib/es/index.js"),p=n("./root/components/SvgIcon/index.js"),f=n("../assets/icons/icons.js"),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var b=i.b.button("w-100 flex items-center pointer bg-window tl ba bc-window-border",function(e){var t=e.isOpen,n=e.placement;return{borderRadius:t?"bottom"===n?"5px 5px 0 0":"0 0 5px 5px":"5px",padding:"7px 10px",outline:"none"}}),E=i.b.div("truncate",{boxSizing:"border-box",flexGrow:1,backgroundColor:"transparent",fontSize:12}),g=Object(i.b)(E)("c-window-border"),h=i.b.div("f6 bb bl br bc-window-border bg-window absolute w-100",function(e){var t=e.placement;return{borderRadius:"bottom"===t?"0 0 5px 5px":"5px 5px 0 0",borderWidth:"bottom"===t?"0 1px 1px 1px":"1px 1px 0 1px",borderStyle:"solid",boxShadow:"0 2px 3px 0 rgba(0,0,0,.15)",overflowY:"auto",maxHeight:200,bottom:"bottom"===t?"initial":"100%"}}),_=i.b.div("truncate pointer db bn f6 tl bg-window-c",{padding:"7px 10px",boxSizing:"border-box",wordWrap:"normal"}),O=function(e){var t=e.isOpen;return r.a.createElement(p.default,{style:{marginLeft:10,cursor:"pointer",flex:"none"},path:f.b[t?"ARROW_DROP_UP":"ARROW_DROP_DOWN"],size:16})},S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.items,n=void 0===t?[]:t,o=e.width,a=void 0===o?"100%":o,i=e.selectedItem,u=e.placement,p=e.onChange,f=void 0===p?function(){}:p,S=e.renderInputValue,v=void 0===S?function(e){return e}:S,j=e.renderPlaceholder,T=void 0===j?function(e){return e}:j,I=e.renderItem,x=void 0===I?function(e){return e}:I;return r.a.createElement(d.a,null,r.a.createElement(c.a,{defaultSelectedItem:i,onChange:f,render:function(e){var t=e.getButtonProps,o=e.getItemProps,i=e.isOpen,c=e.highlightedIndex,p=e.selectedItem;return r.a.createElement("div",{className:"w-100 relative"},r.a.createElement(d.c,null,function(e){var n=e.ref;return r.a.createElement(b,m({ref:n,isOpen:i,placement:u,width:a},t()),l()(p)?r.a.createElement(g,null,T()):r.a.createElement(E,null,v(p)),r.a.createElement(O,{isOpen:i}))}),i&&r.a.createElement(d.b,null,function(){return r.a.createElement(h,{placement:u},n.map(function(e,t){var n;return r.a.createElement(_,m({key:e},o({item:e,className:s()((n={},n["bg-source-bg bg-source-bg-c"]=c===t&&p!==e,n["bg-link bg-link-c"]=p===e,n))})),x(e))}))}))}}))},t}(r.a.Component);S.defaultProps={placement:"bottom"},t.a=S},"./root/components/DynamicImage/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"DynamicImage",function(){return i});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("./root/selectors/index.js"),i=function(e){var t=null,n=e.customData&&e.customData.success,o=e.customData&&!e.customData.success;return n?t=r.a.createElement("img",{src:e.customData.url,className:e.className}):!o&&e.isCustom||(t=r.a.createElement("img",{src:e.defaultImage,className:e.className})),t};t.default=Object(a.b)(function(e,t){return{customData:Object(s.selectCustomImagesResults)(e)[t.customKey],isCustom:!!Object(s.selectCustomImagesToLoad)(e)[t.customKey]}})(i)},"./root/components/Footer/Footer.scss":function(e,t){},"./root/components/Footer/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Footer",function(){return p});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/classnames/index.js"),i=n.n(s),c=n("../node_modules/reselect/lib/index.js"),u=(n.n(c),n("./root/selectors/index.js")),l=n("./root/components/PoweredBy/PoweredBy.js"),d=n("./root/components/Footer/Footer.scss"),p=(n.n(d),function(e){var t,n=e.showPoweredBy,o=e.footerClassName,a=void 0===o?"":o,s=(e.palette,e.children),c=i()("bg-window","flex","items-center","foot",((t={})[a]=a,t["justify-end"]=!n,t["justify-between"]=n,t));return r.a.createElement("footer",{className:c},n&&r.a.createElement(l.a,{"data-test":"powered-by"}),s)});t.default=Object(a.b)(Object(c.createStructuredSelector)({showPoweredBy:u.selectShowPoweredBy,palette:u.selectPalette}))(p)},"./root/components/GridWaypoint/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-waypoint/es/index.js"),s=function(e){var t=e.waypointAction,n=e.bottomOffset;return r.a.createElement(a.a,{onEnter:t,bottomOffset:(n||"0")+"px"})};s.defaultProps={bottomOffset:"0"},t.default=s},"./root/components/LinkButton/LinkButton.js":function(e,t,n){"use strict";var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/glamorous/dist/glamorous.esm.js"),s=n("./root/components/Button/index.js"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c=Object(a.b)(s.default)({"&:hover":{textDecoration:"underline"},"&:active":{opacity:.8},paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0});t.a=function(e){var t=i({},e,{textColorName:"link",noPseudo:!0});return r.a.createElement(c,t)}},"./root/components/MenuButton/MenuButton.js":function(e,t,n){"use strict";var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/classnames/index.js"),s=(n.n(a),n("../node_modules/glamorous/dist/glamorous.esm.js")),i=n("./root/components/Button/index.js"),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=Object(s.b)(i.default)({"&:hover":{opacity:.8},"&:active":{transform:"translate(0,2px)"},paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0});t.a=function(e){var t=c({iconSize:16},e,{textColorName:"menu-icons",noPseudo:!0});return r.a.createElement(u,t)}},"./root/components/NoResults/NoResults.scss":function(e,t){},"./root/components/NoResults/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./common/i18n.js"),s=n("./root/components/NoResults/NoResults.scss"),i=(n.n(s),function(e){return r.a.createElement("div",{className:"no-results-message"},e.text||Object(a.b)("no_results"))});i.defaultProps={text:null},t.default=i},"./root/components/PoweredBy/PoweredBy.js":function(e,t,n){"use strict";var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/prop-types/index.js"),s=n.n(a),i=n("../node_modules/glamorous/dist/glamorous.esm.js"),c=n("../node_modules/react-redux/es/index.js"),u=n("./common/consts.js"),l=n("./common/i18n.js"),d=n("../node_modules/reselect/lib/index.js"),p=(n.n(d),n("./routing/utils.js")),f=n("./utils/colorUtils.js"),m=n("./root/selectors/index.js");function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=i.b.div("db pointer",{height:"100%",width:"50px"}),g=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=b(this,e.call.apply(e,[this].concat(a))),o.onButtonClick=function(){o.context.router.history.push(Object(p.a)(u.a.ABOUT))},b(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props.palette,t=Object(f.b)(e.window,"#000")?"https://cloudinary-res.cloudinary.com/image/upload/v1522227140/upload-widget-2-assets/powered-by-on-light.svg":"https://cloudinary-res.cloudinary.com/image/upload/v1522227140/upload-widget-2-assets/powered-by-on-dark.svg";return r.a.createElement(E,{onClick:this.onButtonClick,title:Object(l.b)("about_uw")},r.a.createElement("img",{"data-test":"powered-by-image",src:t,className:"w-100 h-100"}))},t}(o.PureComponent);g.contextTypes={router:s.a.object},t.a=Object(c.b)(Object(d.createStructuredSelector)({palette:m.selectPalette}))(g)},"./root/components/Progress/Progress.js":function(e,t,n){"use strict";var o=n("../node_modules/react/index.js"),r=(n.n(o),n("../node_modules/classnames/index.js")),a=n.n(r),s=n("../node_modules/glamorous/dist/glamorous.esm.js"),i=n("../node_modules/glamor/lib/index.js"),c=(n.n(i),n("../node_modules/voca/index.js")),u=n.n(c),l=n("../node_modules/lodash/isNumber.js"),d=n.n(l);function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e,t){return e*(1-t/100)},m=s.b.div(function(e){var t=e.colorName;return a()("absolute top-0 left-0","w-100 h-100","flex items-center justify-center","fw5",["c-"+t])},function(e){return{fontSize:e.fontSize}}),b=s.b.svg(function(e){var t=e.colorName;return a()("ProgressWithPercentage","db",["circle-"+t])},{transform:"rotate(-90deg)"}),E=s.b.circle(function(e){return{animation:e.progresssAnimation+" 200ms linear",strokeDashoffset:e.endPoint,strokeWidth:e.strokeWidth,strokeDasharray:e.circumference}}),g=function(e){var t=e.size,n=void 0===t?0:t,r=e.start,c=void 0===r?0:r,u=e.end,l=void 0===u?0:u,d=e.colorName,p=e.className,g=Math.ceil(n/8.3),h=Math.ceil(n/4),_=n/2-g/2,O=2*Math.PI*_,S=f(O,c),v=f(O,l),j=i.css.keyframes({from:{strokeDashoffset:S},to:{strokeDashoffset:v}});return o.createElement(s.b.Div,{className:a()("relative",p),width:n,height:n},o.createElement(b,{colorName:d,width:n,height:n,viewBox:"0 0 "+n+" "+n},o.createElement(E,{cx:n/2,cy:n/2,r:_,strokeWidth:g,endPoint:v,keyFrames:j,circumference:O,fill:"none"})),h>6?o.createElement(m,{colorName:d,fontSize:h},l,"%"):null)},h=s.b.div(function(e){var t,n=e.className,o=e.size,r=e.colorName;return a()(n,"InfiniteProgress","db",["circle-"+r],((t={"w-100 h-100":!o})["box-"+(o||"")]=u()(o),t))},function(e){var t=e.size;return{width:d()(t)?t:null,height:d()(t)?t:null,"> svg circle":{strokeDasharray:"197.92033717615698 67.97344572538566",strokeWidth:13}}},function(e){if(e.overlay)return{position:"absolute",zIndex:1,left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),_=function(e){var t=e.size,n=e.colorName,r=e.className,a=e.overlay,s=void 0!==a&&a;return o.createElement(h,{className:r,colorName:n,size:t,overlay:s},o.createElement("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},o.createElement("circle",{cx:"50%",cy:"50%",fill:"none",r:"42"},o.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 50;360 50 50",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))},O=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=p(this,e.call.apply(e,[this].concat(a))),o.state={prevPercentage:0,currPercentage:0},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.getDerivedStateFromProps=function(e,t){return e.percentage!==t.currPercentage?{prevPercentage:t.currPercentage,currPercentage:e.percentage}:null},t.prototype.render=function(){var e=this.props.percentage>=0&&d()(this.props.size),t=d()(this.props.size)?this.props.size:0;return o.createElement(o.Fragment,null,e?o.createElement(g,{className:this.props.className,colorName:this.props.colorName,size:t,start:this.state.prevPercentage,end:this.state.currPercentage}):null,e?null:o.createElement(_,{colorName:this.props.colorName,size:this.props.size,className:this.props.className,overlay:this.props.overlay}))},t}(o.Component);O.defaultProps={colorName:"in-progress",percentage:-1,overlay:!1,size:0},t.a=O},"./root/components/ProgressIndicator/ProgressIndicator.scss":function(e,t){},"./root/components/ProgressIndicator/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./root/components/ProgressIndicator/ProgressIndicator.scss");n.n(a);t.default=function(e){var t=r.a.createElement("div",{className:"progress-indicator"},r.a.createElement("span",{className:"progress-indicator-img"}));return e.coverSize?r.a.createElement("div",{className:"indicator-cover",style:e.coverSize?Array.isArray(e.coverSize)?{width:e.coverSize[0],height:e.coverSize[1]}:{width:e.coverSize,height:e.coverSize}:{}},t):t}},"./root/components/ResponsiveWidthMonitor/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ResponsiveWidthMonitor",function(){return i});var o=n("../node_modules/react/index.js"),r=(n.n(o),n("../node_modules/react-redux/es/index.js")),a=n("./utils/domUtils.js"),s=n("./root/actions/index.js");var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this,t=Object(a.f)(this.props.query,function(t){return e.updateIsResponsiveWidth(t.matches)});this.updateIsResponsiveWidth(t.matches)},t.prototype.updateIsResponsiveWidth=function(e){this.props[s.types.SET_IS_RESPONSIVE]({isResponsiveWidth:e})},t.prototype.render=function(){return this.props.children},t}(o.Component);t.default=Object(r.b)(null,s.default)(i)},"./root/components/ResultImageGrid/GridTile/GridTile.scss":function(e,t){},"./root/components/ResultImageGrid/GridTile/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/classnames/index.js"),s=n.n(a),i=n("../node_modules/glamorous/dist/glamorous.esm.js"),c=n("../node_modules/react-redux/es/index.js"),u=n("../node_modules/reselect/lib/index.js"),l=(n.n(u),n("../node_modules/tinycolor2/tinycolor.js")),d=n.n(l),p=n("./root/components/SvgIcon/index.js"),f=n("../assets/icons/icons.js"),m=n("./root/components/Checkbox/Checkbox.js"),b=n("./root/selectors/index.js"),E=n("./root/components/ResultImageGrid/GridTile/GridTile.scss");n.n(E);t.default=Object(c.b)(Object(u.createStructuredSelector)({palette:b.selectPalette}))(function(e){var t,n,o,a,c,u,l,b,E,g=e.info,h=e.isSelected,_=function(t){t.stopPropagation(),e.selectionAction&&e.selectionAction(g.id,t)},O=function(e){e.target.classList.remove("hidden")},S=function(e){e.target.parentElement.classList.add("img-fail")},v=function(){self.open(e.info.link)},j=function(){if(function(){return g.link&&void 0!==g.link.split(".")[1]})return r.a.createElement(i.a,{className:"flex-noshrinkm mr3",onClick:v},r.a.createElement(p.default,{path:f.b.OPEN_IN_NEW,size:"sm",color:"#FFFFFF"}))},T=s()("grid-tile","tile","f-l","pr3 pr4-ns","pb3 pb4-ns","w-50","w-25-ns",{selected:h},((t={})[""+(e.className||"")]=!!e.className,t));return r.a.createElement("li",{className:T,"data-test":"grid-tile"},r.a.createElement(i.b.Div,{className:"GridTile relative pointer",backgroundColor:(b=e.palette.sourceBg,E=d()(b).toHsl(),E.l=E.l>.5?E.l-.1:E.l+.1,d()(E).toHslString())},(l=s()("grid-checkbox","absolute","top-0 left-0","ma2 ma3-ns",{dn:!h}),e.allowSelect&&r.a.createElement("div",{className:l},r.a.createElement(m.a,{checked:h,borderWidth:2,borderRadius:2,borderColor:"#FFFFFF",size:20,onClick:function(e){_(e)}}))),(c=g.thumbnail?r.a.createElement("img",{className:"hidden w-100",src:g.thumbnail,onLoad:O,onError:S}):r.a.createElement(p.default,{path:f.b.FILE,size:72,colorName:"source-bg"}),u=s()("absolute","top-0","left-0","w-100","h-100","flex","justify-center","items-center"),r.a.createElement("div",{className:u,onClick:_},c)),(n=s()("grid-image-info","flex","items-center","pb2 pt2","pl3","pr3","absolute","bottom-0 left-0","w-100"),o=g.title&&r.a.createElement("div",{className:"img-title",onClick:_},g.title),a=g.subtitle&&r.a.createElement("div",{className:"img-subtitle ellipsis",title:g.subtitle},g.subtitle),r.a.createElement("div",{className:n},j(),r.a.createElement("div",{className:"ellipsis flex-grow",onClick:_},o,a)))))})},"./root/components/ResultImageGrid/ResultImageGrid.scss":function(e,t){},"./root/components/ResultImageGrid/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./root/components/GridWaypoint/index.js"),s=n("./root/components/ResultImageGrid/GridTile/index.js"),i=n("./root/components/Progress/Progress.js"),c=n("./root/components/NoResults/index.js"),u=n("./root/components/ResultImageGrid/ResultImageGrid.scss"),l=(n.n(u),function(e){var t=e.showProgressIndicator?r.a.createElement(i.a,{size:42,overlay:!0}):null,n=function(){return e.images.map(function(t){return r.a.createElement(s.default,{info:t,selectionAction:e.selectionAction,isSelected:(n=t,!(!e.selected||!~e.selected.indexOf(n.id))),allowSelect:e.allowSelect,isMultiple:e.isMultiple,key:""+(t.id||t.url||t.link)});var n})};return r.a.createElement("div",{className:"grid-container","data-test":"grid-container"},t,r.a.createElement("div",{className:"grid scroller "+(e.images.length?"":"empty")},e.images&&e.images.length?[r.a.createElement("ul",{className:"grid-images pl0",key:"ig_img_gallery",style:{paddingLeft:"7px"}},n()),e.waypointAction&&e.images.length?r.a.createElement(a.default,{key:"ig_waypoint",waypointAction:e.waypointAction}):null]:e.showProgressIndicator?[null]:[r.a.createElement(c.default,{key:"ig_no_results"})]))});l.defaultProps={allowSelect:!0,showProgressIndicator:!1},t.default=l},"./root/components/RouteWithSubRoutes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-router-dom/es/index.js"),s=n("./common/logger.js"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c=Object(s.b)(),u=function(e){return r.a.createElement(a.b,{path:e.path,render:e.render?function(t){return n=t,c.log("[RouteWithSubRoutes]: rendering route with render method with info: ",n),e.render&&e.render(i({},e,n));var n}:e.component?function(t){return n=t,c.log("[RouteWithSubRoutes]: rendering route with component with route info: ",n),r.a.createElement(e.component,i({},e,{route:n}));var n}:null},e.children)};u.defaultProps={path:"",render:null,component:null,children:null},t.default=u},"./root/components/SearchBox/SearchBox.scss":function(e,t){},"./root/components/SearchBox/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"SEARCH_BOX_MODES",function(){return f});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/glamorous/dist/glamorous.esm.js"),s=n("../node_modules/classnames/index.js"),i=n.n(s),c=n("../assets/icons/icons.js"),u=n("./utils/domUtils.js"),l=n("./root/components/SvgIcon/index.js"),d=(n("./root/components/Dropdown/index.js"),n("./root/components/SearchBox/SearchBox.scss"));n.n(d);function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f={BUTTON:1,EXPANDED:2},m=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=p(this,e.call.apply(e,[this].concat(a))),o.onSearchClick=function(){o.props.searchHandler&&(o.props.searchHandler(),Object(u.d)()&&o.searchInput&&o.searchInput.blur())},o.onSearchInputChange=function(e){o.props.termChangeHandler&&o.props.termChangeHandler(e.target.value)},o.onSearchInputKeyUp=function(e){13===e.which&&o.props.searchHandler&&(o.props.searchHandler(),Object(u.d)()&&o.searchInput&&o.searchInput.blur())},o.setFocusOnSearchInput=function(){o.props.mode===f.EXPANDED&&o.searchInput&&o.searchInput.focus()},o.searchInput=null,p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.setFocusOnSearchInput()},t.prototype.componentDidUpdate=function(e){e.mode!==this.props.mode&&this.setFocusOnSearchInput()},t.prototype.render=function(){var e=this,t=this.props,n=t.mode===f.EXPANDED,o=n?f.EXPANDED:f.BUTTON,s=n?null:r.a.createElement("div",{className:"box3 do-search",onClick:this.onSearchClick},r.a.createElement(l.default,{path:c.b.SEARCH,colorName:"link"}));return r.a.createElement(a.b.Div,{backgroundColor:n?"#FFF":"transparent",className:i()("ba bc-link","search-bar search-form search-box",["search-box-mode-"+o],{active:n})},r.a.createElement("div",{className:"form"},r.a.createElement("input",{type:"search","data-test":"search-input",className:"text-field search-input outline-0",placeholder:t.inputPlaceholder,onChange:this.onSearchInputChange,onKeyUp:this.onSearchInputKeyUp,value:t.term||"",style:{height:"20px",color:"initial"},ref:function(t){return e.searchInput=t}}),r.a.createElement(a.b.Div,{"data-test":"do-search",className:"pointer absolute top-0 h-100 flex items-center justify-center",right:5},r.a.createElement(l.default,{path:c.b.SEARCH,size:"sm",colorName:"link",onClick:this.onSearchClick}))),s,t.children)},t}(o.PureComponent);m.defaultProps={inputPlaceholder:"",term:"",searchHandler:null,mode:f.EXPANDED},t.default=m},"./root/components/SelectedCounter/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./common/i18n.js"),s=n("./root/components/MenuButton/MenuButton.js"),i=n("../assets/icons/icons.js"),c=n("./root/components/SvgIcon/index.js");t.default=function(e){return r.a.createElement("div",{className:"SelectedCounter flex flex-column items-end mr4","data-test":"selected-counter"},r.a.createElement("div",{className:"c-action mb2 flex flex-row items-center justify-between lh-solid"},r.a.createElement("div",{className:"flex justify-between items-center mr2","data-test":"selection-counter-text"},r.a.createElement(c.default,{size:"sm",path:i.b.CHECKED,className:"fill-action"}),e.selectedCount),Object(a.b)("selection_counter.selected")),r.a.createElement("div",{className:"flex flex-row items-center c-menu-icons pointer","data-test":"counter-clear-button",onClick:e.onClearClick},r.a.createElement(s.a,{iconSize:"xs",icon:i.b.CANCEL,text:Object(a.b)("actions.clear_all"),fontSize:10})))}},"./root/components/ServiceLoginIntro/ServiceLoginIntro.scss":function(e,t){},"./root/components/ServiceLoginIntro/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./root/components/Button/index.js"),s=n("./root/components/ServiceLoginIntro/ServiceLoginIntro.scss");n.n(s);t.default=function(e){return r.a.createElement("div",{className:"box login-intro"},r.a.createElement("h2",{className:"title bg-source-bg-c"},e.title),r.a.createElement(a.default,{dataTest:e.dataTest,text:e.actionTitle,icon:e.btnIcon,colorName:"link",className:"login "+e.btnClass,onClick:e.actionHandler}),e.statement?r.a.createElement("div",{className:"statement"},e.statement):null)}},"./root/components/SvgIcon/SvgIcon.scss":function(e,t){},"./root/components/SvgIcon/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/classnames/index.js"),s=n.n(a),i=n("../node_modules/glamorous/dist/glamorous.esm.js"),c=n("../node_modules/voca/index.js"),u=n.n(c),l=n("../node_modules/lodash/isNumber.js"),d=n.n(l),p=n("./root/components/SvgIcon/SvgIcon.scss"),f=(n.n(p),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),m=i.b.div(function(e){var t,n=e.onClick,o=e.size,r=e.extClassName,a=e.colorName;return s()("dib",r,((t={"w-100 h-100":!o,pointer:n})["box-"+(o||"")]=u()(o),t["fill-"+(a||"")]=u()(a),t))},function(e){var t=e.size,n=e.style;return f({},n,{width:d()(t)?t:null,height:d()(t)?t:null})}),b=function(e){var t=e.path,n=e.fill,o=e.className,a=e.colorName,s=e.size,i=e.color,c=e.onClick,u=e.title,l=e.style,d=e.dataTest;return r.a.createElement(m,{onClick:c,size:s,extClassName:o,colorName:a,style:l,title:u,"data-test":d},r.a.createElement("svg",{className:"db",viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid",style:{fill:n||i}},r.a.createElement("path",{d:t})))};b.defaultProps={fill:""},t.default=b},"./root/components/TabFooter/TabFooter.scss":function(e,t){},"./root/components/TabFooter/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TabFooter",function(){return S});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/reselect/lib/index.js"),i=(n.n(s),n("../node_modules/classnames/index.js")),c=n.n(i),u=n("../node_modules/glamorous/dist/glamorous.esm.js"),l=n("./common/i18n.js"),d=n("./root/components/SvgIcon/index.js"),p=n("./utils/sassVarsUtils.js"),f=n("../assets/icons/icons.js"),m=n("./root/actions/index.js"),b=n("./root/selectors/index.js"),E=n("./root/components/Footer/index.js"),g=n("./root/components/AdvancedOptions/index.js"),h=n("./root/components/SelectedCounter/index.js"),_=n("./root/components/Button/index.js"),O=n("./root/components/TabFooter/TabFooter.scss"),S=(n.n(O),function(e){var t,n,o=e.showSelection&&e.selectionCount||e.actionButtonActive,a=e.advancedOptionsOpen,s=function(){e[m.types.TOGGLE_ADVANCED_OPTIONS]()};return r.a.createElement(E.default,{footerClassName:c()("bt bc-window-border "+(o?"items-active":""))},(n=u.b.div(c()("advance-box","flex flex-column","bg-window ba","left-0",{active:a,"bc-window-border":a,"bc-window":!a}),((t={})[Object(p.a)("ns")]={left:e.showPoweredBy?72:20},t)),e.shouldShowAdvanced?r.a.createElement(n,{"data-test":"advanced-box"},r.a.createElement("div",{className:"flex items-center pointer pl3 pl0-ns btn-advance-wrap","data-test":"btn-advanced",onClick:s},r.a.createElement(d.default,{size:"xxs",colorName:"link",path:f.b[a?"KEYBOARD_DOWN":"KEYBOARD_UP"]}),r.a.createElement("button",{"data-test":"btn-advanced",type:"button",className:"btn-advance c-link ml2"},Object(l.b)("advanced"))),r.a.createElement("div",null,a?r.a.createElement(g.default,null):null)):null),r.a.createElement("div",{className:"flex items-center"},o&&e.selectionCount?r.a.createElement(h.default,{selectedCount:e.selectionCount,onClearClick:e.clearSelectionHandler,key:"panel_search_select_counter"}):null,e.secondaryButton?e.secondaryButton:e.showSecondaryButton&&e.secondaryButtonText?r.a.createElement(_.default,{className:"secondary-button",colorName:"link",onClick:e.secondaryButtonHandler,text:e.secondaryButtonText,key:"footer_second_button"}):null,e.actionButton?e.actionButton:e.showSelection||e.showActionButton?r.a.createElement(_.default,{className:"action-button",colorName:"action",dataTest:"upload-btn",disabled:!o,text:e.actionButtonText||Object(l.b)("actions.upload"),onClick:e.uploadButtonHandler,key:"footer_upload_button"}):null))});S.defaultProps={showSelection:!1,selectionCount:0,clearSelectionHandler:null,uploadButtonHandler:null,actionButtonText:null,actionButtonActive:!1,showActionButton:!1,showSecondaryButton:!1,secondaryButtonText:null,secondaryButtonHandler:null},t.default=Object(a.b)(Object(s.createStructuredSelector)({shouldShowAdvanced:b.selectShouldShowAdvancedOptions,advancedOptionsOpen:b.selectIsAdvancedOptionsOpen,language:b.selectConfigLanguage,showPoweredBy:b.selectShowPoweredBy,textVersion:b.selectDictionaryTextVersion}),m.default)(S)},"./root/components/TabHeader/TabHeader.scss":function(e,t){},"./root/components/TabHeader/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/classnames/index.js"),s=n.n(a),i=n("../node_modules/prop-types/index.js"),c=n.n(i),u=n("../node_modules/react-redux/es/index.js"),l=n("../node_modules/glamorous/dist/glamorous.esm.js"),d=n("../node_modules/lodash/result.js"),p=n.n(d),f=n("../node_modules/reselect/lib/index.js"),m=n("./common/i18n.js"),b=n("./routing/utils.js"),E=n("./root/selectors/index.js"),g=n("./root/components/MenuButton/MenuButton.js"),h=n("../assets/icons/icons.js"),_=n("./root/components/UserBlock/index.js"),O=n("./root/components/SearchBox/index.js"),S=n("../node_modules/react-router-dom/es/index.js"),v=l.b.div(function(e){var t=e.match;return s()("tc flex-grow",{"bc-link c-link":t,"bc-window bg-window-c":!t})},{minWidth:100,padding:"14px 10px 7px 10px",borderBottomWidth:2,borderBottomStyle:"solid","& a":{display:"inline-block",width:"100%",height:"100%"}}),j=function(e){var t=e.title,n=e.path;return r.a.createElement(S.b,{path:n,exact:!0},function(e){var o=e.match;return r.a.createElement(v,{match:o},r.a.createElement(S.a,{to:n},t))})},T=function(e){var t=e.items,n=e.className,o=void 0===n?"":n,a=s()("inline-flex flex-grow items-center justify-stretch","window-bg bg-window-c",o);return r.a.createElement("div",{className:a},t.map(function(e){return r.a.createElement(j,{path:e.path,title:e.title,key:e.path})}))};n("./root/components/TabHeader/TabHeader.scss");n.d(t,"TabHeader",function(){return x});var I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},x=function(e,t){var n=e.location&&e.location.pathname||"",o=e.showSearch&&!!~n.indexOf("search"),a=e.userName||"",i=function(){o?e.searchClickHandler&&e.searchClickHandler():t.router.history.push(I({},e.location,{pathname:Object(b.a)(e.source,"search")}))},c=function(){t.router.history.goBack()};return r.a.createElement(l.b.Div,{height:51,boxShadow:"0 2px 4px 0 rgba(0,0,0,0.5)",className:s()("TabHeader","flex flex-none items-center bb bg-window bc-window-border",{"search-mode":o,"no-search":!o})},e.children&&r.a.Children.count(e.children)?e.children:[!o&&!e.navItems&&r.a.createElement("span",{className:"tab-header-title pl6 pr6",key:"th_title"},p()(e,"title",null)),!o&&e.navItems?r.a.createElement(T,{items:e.navItems,className:"self-end",key:"subhead-links"}):null,o?r.a.createElement(g.a,{key:"subhead-back",className:"ml5 mr5 pointer back-button",iconSize:22,icon:h.b.BACK,onClick:c}):null],r.a.createElement("div",{className:"flex-grow-1 tr"},e.showSearch?r.a.createElement(O.default,{key:"tabheader_searchbox",mode:o?O.SEARCH_BOX_MODES.EXPANDED:O.SEARCH_BOX_MODES.BUTTON,term:e.searchTerm,inputPlaceholder:e.searchInputPlaceholder||Object(m.b)("search_placeholder"),searchHandler:i,termChangeHandler:e.searchTermHandler}):null),r.a.createElement("div",{className:"mr5 ml5 flex items-center"},r.a.createElement(_.default,{name:a,onLogout:e.onLogout,key:"tabheader_userblock"})))};x.contextTypes={router:c.a.object},x.defaultProps={showSearch:!1,searchTerm:""};t.default=Object(u.b)(Object(f.createStructuredSelector)({location:E.selectLocation}))(x)},"./root/components/TabTitle/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/reselect/lib/index.js"),i=n("../node_modules/classnames/index.js"),c=n.n(i),u=n("../node_modules/glamorous/dist/glamorous.esm.js"),l=n("./root/components/SvgIcon/index.js"),d=n("./root/components/CloseButton/CloseButton.js"),p=n("../assets/icons/icons.js"),f=n("./utils/domUtils.js"),m=n("./root/selectors/index.js"),b=n("./common/i18n.js"),E=n("../assets/images/lanscape-lock.svg"),g=n.n(E);function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=u.b.div(c()("flex flex-column items-center z-10 bg-source-bg landscape-overlay \n    bottom-0 right-0 left-0"),{display:"flex",position:"absolute",top:"55px"}),O=u.b.img({width:"158px"}),S=u.b.div(c()("f2 b bg-window-c db"),{"margin-bottom":"10px"}),v=u.b.div(c()("f4 bg-window-c")),j=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=h(this,e.call.apply(e,[this].concat(a))),o.state={isLandscape:!1},o.onOrientationChange=function(e){o.setState({isLandscape:90===e||180===e})},o.orientationTracker=null,h(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){Object(f.d)()&&(this.orientationTracker=Object(f.j)(this.onOrientationChange))},t.prototype.componentWillUnmount=function(){this.orientationTracker&&(this.orientationTracker(),this.orientationTracker=null)},t.prototype.render=function(){return this.state.isLandscape?r.a.createElement(_,{"data-test":"landscape-overlay"},r.a.createElement(O,{src:g.a}),r.a.createElement(S,null,Object(b.b)("landscape_overlay.title")),r.a.createElement(v,null,Object(b.b)("landscape_overlay.description"))):null},t}(o.Component);n.d(t,"TabTitle",function(){return y});var T=u.b.div(c()("TabTitle--Container","dn-ns","bb","flex items-center bg-window bc-window-border justify-between"),{displayName:"TabTitleContainer",padding:"0 16px"}),I=u.b.div(c()("flex items-center","bg-window bg-window-c","fw5 f5"),{padding:"18px 5px",fontSize:14}),x=u.b.div(function(e){var t=e.showMenuButton;return c()("box3 pointer",{"o-0":!t})}),C=u.b.div({width:"12px",height:"12px"}),y=function(e){var t=e.title,n=e.id,o=e.showMenuButton,a=void 0===o||o,s=e.isSingle,i=e.isInline,c=e.menuClickHandler,u=void 0===c?function(){}:c;return r.a.createElement(T,null,!s&&r.a.createElement(x,{onClick:u,showMenuButton:a,dataTest:"tab-title-open-menu"},r.a.createElement(l.default,{colorName:"window-border",path:p.b.MENU})),r.a.createElement(I,{"data-test":"tab-title-title"},r.a.createElement(l.default,{className:"mr3",size:"sm",colorName:"link",path:p.a[n]}),t),i?r.a.createElement(C,null):r.a.createElement(d.a,null),r.a.createElement(j,null))};t.default=Object(a.b)(Object(s.createStructuredSelector)({isSingle:m.selectIsSingleSource,isInline:m.selectIsInlineMode}))(y)},"./root/components/TaggedInput/TaggedInput.scss":function(e,t){},"./root/components/TaggedInput/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"SUGGEST_CONTAINER_STATE",function(){return h}),n.d(t,"getAutoSuggestInputCreator",function(){return _});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/voca/index.js"),s=(n.n(a),n("../node_modules/react-tagsinput/react-tagsinput.js")),i=n.n(s),c=n("../node_modules/react-tagsinput/react-tagsinput.css"),u=(n.n(c),n("../node_modules/react-autosuggest/dist/index.js")),l=n.n(u),d=n("./utils/domUtils.js"),p=n("./common/i18n.js"),f=n("../assets/icons/icons.js"),m=n("./root/components/SvgIcon/index.js"),b=n("./root/components/TaggedInput/TaggedInput.scss"),E=(n.n(b),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e});function g(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}var h={CLOSED:0,OPEN:1},_=function(e,t){return function(n){var o,s=n.addTag,i=g(n,["addTag"]);return r.a.createElement(l.a,{ref:i.ref,highlightFirstSuggestion:!0,focusInputOnSuggestionClick:!Object(d.d)(),suggestions:(o=[],Object(a.isBlank)(e.inputValue)||!e.suggestions||~e.suggestions.indexOf(e.inputValue)||o.push({value:e.inputValue,isNew:!0}),e.suggestions&&(o=o.concat(e.suggestions.map(function(e){return{value:e}}))),o),getSuggestionValue:i.getSuggestionValue||function(e){return e.value},shouldRenderSuggestions:function(){return!0},renderSuggestionsContainer:function(t){var n=t.containerProps,o=t.children;return o||setTimeout(function(){e.reportSuggestionsContainerState(h.CLOSED)},0),o&&r.a.createElement("div",E({},n,{className:"tagged-suggestion-container"}),o)},renderSuggestion:i.renderSuggestion||function(e,t){var n=t.isHighlighted;t.query;return r.a.createElement("span",{className:n?"highlight":"",title:e.value},""+(e.isNew?Object(p.b)("advanced_options.add_new"):"")+e.value)},renderInputComponent:function(e){var n=e.ref,o=g(e,["ref"]);return r.a.createElement("input",E({},o,{ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){t(e),n(e)})}))},inputProps:E({},i,{value:e.inputValue,onChange:function(t,n){var o=n.newValue,r=n.method;"enter"===r?t.preventDefault():"down"!==r&&"up"!==r&&e.inputChangeHandler(o)},onKeyDown:function(t){(t.key&&"Backspace"===t.key||8===t.which)&&Object(a.isBlank)(e.inputValue)&&e.removeLastTag()},onClick:function(e){e.target.blur(),e.target.focus()},placeholder:e.placeholder,"data-test":"tags-input"}),onSuggestionSelected:function(t,n){var o=n.suggestion;s(o.value),e.reportSuggestionsContainerState(h.CLOSED),e.inputChangeHandler(""),e.filterSuggestions("")},onSuggestionsClearRequested:function(){},onSuggestionsFetchRequested:function(t){var n=t.value;e.filterSuggestions(n),e.reportSuggestionsContainerState(h.OPEN)}})}};t.default=function(e){var t=void 0,n=function(){return t&&t.focus()};return r.a.createElement(i.a,{className:e.className,renderLayout:function(e,t){return r.a.createElement("span",{className:"mw-100 flex flex-wrap flex-row",onClick:n},e,t)},renderInput:_(e,function(e){return t=e}),renderTag:function(e){var t=e.tag,n=e.key,o=e.disabled,a=e.onRemove,s=e.classNameRemove,i=e.className;return r.a.createElement("span",{key:n,title:t,className:i},t,!o&&r.a.createElement(m.default,{path:f.b.CLOSE,colorName:"bg-link",size:"xxxs",className:s,onClick:function(){return a(n)}}))},onlyUnique:!0,value:e.values,tagProps:{className:"tag bg-link bg-link-c",classNameRemove:"btn-remove bg-link-c",onRemove:e.removeTag},onChange:e.changeHandler,removeKeys:[]})}},"./root/components/TopErrorBoundary/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./common/logger.js");function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=Object(a.b)(),c=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=s(this,e.call.apply(e,[this].concat(a))),o.state={lastErrorMessage:null},s(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidCatch=function(e,t){i.error("[TopErrorBoundary]: encountered uncaught error!",e,t.componentStack),this.setState({lastErrorMessage:e.message})},t.prototype.render=function(){return[this.state.lastErrorMessage?r.a.createElement("span",{id:"last-error-msg-boundary",style:{display:"none"},key:"err_bnd_cntr"},this.state.lastErrorMessage):null,this.props.children]},t}(o.Component);t.default=c},"./root/components/TopMenu/TopMenu.scss":function(e,t){},"./root/components/TopMenu/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TopMenu",function(){return D});var o,r=n("../node_modules/react/index.js"),a=n.n(r),s=n("../node_modules/react-redux/es/index.js"),i=n("../node_modules/classnames/index.js"),c=n.n(i),u=n("../node_modules/reselect/lib/index.js"),l=(n.n(u),n("../node_modules/glamorous/dist/glamorous.esm.js")),d=n("../node_modules/prop-types/index.js"),p=n.n(d),f=n("./uploader/index.js"),m=n("./common/i18n.js"),b=n("./common/logger.js"),E=n("./root/components/SvgIcon/index.js"),g=n("../assets/icons/icons.js"),h=n("./routing/navItems.js"),_=n("./root/actions/index.js"),O=n("./root/selectors/index.js"),S=n("./root/components/TabTitle/index.js"),v=n("./root/components/UploadContainer/uploaderContext.js"),j=n("./root/components/TopMenu/TopMenu.scss"),T=(n.n(j),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e});function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var x=Object(b.b)(),C=f.consts.SOURCES,y=((o={})[C.LOCAL]="files",o[C.DROPBOX]="dropbox",o[C.CAMERA]="camera",o[C.URL]="web-addr",o[C.IMAGE_SEARCH]="img-search",o[C.FACEBOOK]="facebook",o[C.INSTAGRAM]="instagram",o),A=l.b.li(function(e){var t=e.id,n=e.isSingle,o=e.isActive;return c()("source","flex items-center-ns justify-center-ns","pa5 pa0-ns","bw2",t,{bb:!n,"bc-link":o&&!n,"bc-window":!o})}),R=l.b.button(function(e){var t=e.id,n=e.isSingle,o=e.isActive;return c()("flex flex-column-ns","h-100","outline-0",y[t],{"flex-row-ns b justify-start-ns items-center":n,"items-center justify-between justify-center-ns":!n,"no-pointer":o,"c-inactive-tab-icon c-tab-icon-hover fill-tab-icon-hover":!o,"c-tab-icon":o&&!n})}),L=l.b.nav("menu",{overflowY:"auto"}),w=function(e){return Object(h.a)().find(function(t){return t.id===e.menu.currentSource})},D=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=I(this,e.call.apply(e,[this].concat(a))),o.onMenuItemClick=function(e,t){var n=w(o.props),r=n?n.id:"";o.props.menu.responsiveShow&&o.hideResponsiveMenu(),r!==t&&o.navigateToPath(e),o.props.menu.isResponsiveWidth&&t===C.LOCAL&&o.props.uploader.uploadFieldClick()},o.hideResponsiveMenu=function(){return o.props[_.types.TOGGLE_RESPONSIVE_MENU]({show:!1})},I(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidUpdate=function(){var e=this.props.menu.enabledSources,t=this.props.menu.currentSource;if(!~e.indexOf(t)){x.log("[TopMenu]: current source ("+t+") has been removed with config update. need to navigate to another source");var n=Object(h.a)().find(function(t){return~e.indexOf(t.id)});n&&this.navigateToPath(n.path)}},t.prototype.navigateToPath=function(e){this.context.router.history.push(T({},this.props.location,{pathname:e}))},t.prototype.render=function(){var e,t=this,n=this.props,o=Object(h.a)(),r=w(this.props),s=r?r.id:"",i=s?y[s]:"",u=n.menu.isResponsiveWidth,l=n.menu.isSingle,d=r?Object(m.b)(r.id+".main_title"):"",p=!l&&(n.menu.responsiveShow||u&&s===C.LOCAL);return a.a.createElement("header",{id:"cloudinary-navbar",className:c()("head","header","bg-window","bg-window-fc","bc-window-border",(e={"single-item":l,"popup-nav-active":p},e[i+"-active"]=r,e[s+"-active"]=r,e))},s&&a.a.createElement(S.default,{id:s,title:d,showMenuButton:!1,className:"bb bc-window-border justify-center",onClick:this.hideResponsiveMenu}),a.a.createElement(L,{"data-test":"uw-top-menu"},a.a.createElement("ul",{className:"sources top-menu-items flex flex-column flex-row-ns"},o.filter(function(e){return~n.menu.enabledSources.indexOf(e.id)}).map(function(e){var n=s===e.id&&(!u||e.id!==C.LOCAL),o=c()({"fill-inactive-tab-icon":!n,"fill-tab-icon":n});return a.a.createElement(A,{key:"source_"+e.id,onClick:function(){return t.onMenuItemClick(e.path,e.id)},isActive:n,isSingle:l,id:e.id},a.a.createElement(R,{type:"button","data-test":e.id+"-btn",isActive:n,isSingle:l,id:e.id},a.a.createElement("div",{className:c()({"mr4 mr0-ns mb3-ns mt3-ns box7":!l,"mr4 ml4 box7":l})},a.a.createElement(E.default,{className:o,path:g.a[e.id]})),e.title),a.a.createElement("div",{className:"flex-grow-1 dn-ns"}),a.a.createElement("div",{className:"box4 dn-ns"},a.a.createElement(E.default,{className:"fill-window-border",path:g.b.ARROW_RIGHT})))}))))},t}(r.Component);D.contextTypes={router:p.a.object},t.default=Object(s.b)(Object(u.createStructuredSelector)({menu:O.selectMenuData,lang:O.selectConfigLanguage}),_.default)(Object(v.b)(D))},"./root/components/UploadContainer/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("../node_modules/react/index.js"),a=n.n(r),s=n("../node_modules/prop-types/index.js"),i=n.n(s),c=n("../node_modules/react-redux/es/index.js"),u=n("../node_modules/react-router/es/index.js"),l=n("../node_modules/reselect/lib/index.js"),d=n("./routing/utils.js"),p=n("./root/actions/index.js"),f=n("./root/selectors/index.js"),m=n("./root/components/UploadContainer/uploaderContext.js"),b=n("../node_modules/voca/index.js"),E=n("./common/consts.js"),g=n("./uploader/index.js"),h=n("./common/logger.js"),_=n("./utils/domUtils.js"),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},v=this;var j=Object(h.b)(),T=((o={})[g.consts.BATCH_CANCEL_REASONS.MAX_EXCEEDED]=p.types.SET_MAX_SELECT_REACHED,o[g.consts.BATCH_CANCEL_REASONS.INVALID_PUBLIC_ID]=p.types.SET_INVALID_PUBLIC_ID_FOUND,o),I=function(e,t){var n,o,r,a=void 0,s=void 0,i=void 0,c=void 0,u=function(e){var t=e||s.getConfig();a[p.types.SET_WIDGET_CONFIG](t)},l=function(e,t){return!!~(t?t.location:a.location).pathname.indexOf(e)},f=function(e){var n=!l(e);return n&&t.history.push(S({},a.location,{pathname:Object(d.a)(e)})),n},m=function(){var e,n,o;f(E.a.QUEUE)&&a[p.types.SET_LAST_PRE_QUEUE_PATH]({path:(e=t.history,n=e.index-1,o=e.entries[n],o&&~o.pathname.indexOf("crop")&&(o=n?e.entries[n-1]:null),o)})},h=function(e){j.log("[UploadContainer.connector]: widget view type changed to: "+e),s.setWidgetViewType(e)},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a[p.types.SET_UPLOADER_CROP_SOURCES]({src:e,data:{files:t.files||[]}})},x=((n={})[g.EVENT_TYPES.UPLOADER_READY]=function(){j.log("[UploadContainer.connector]: uploader reported that its now ready"),u(),C()},n[g.EVENT_TYPES.UPLOADER_FILE_STATUS]=function(e){j.log("[UploadContainer.connector]: upload queue reported files added/changed, updating reducer queue"),c(e.ids,e.files,e.simulated)},n[g.EVENT_TYPES.UPLOADER_SHOW]=function(e){var n,o;j.log("[UploadContainer.connector]: received uploader is showing",e),a[p.types.SET_WIDGET_VIEW_TYPE]({type:E.a.WIDGET_VIEW_TYPES.INITIAL}),o=null,(n=e)&&n.source&&(o=n.source),o?f(o):l(E.a.QUEUE)&&a[p.types.DO_NAV_TO_PREVIOUS_PATH](t),a[p.types.SET_WIDGET_SHOWING]()},n[g.EVENT_TYPES.UPLOADER_UPDATE_SETTINGS]=function(e){j.log("[UploadContainer.connector]: received uploader settings update !"),u(e)},n[g.EVENT_TYPES.UPLOADER_CLIENT_HIDE]=function(){j.log("[UploadContainer.connector]: received uploader was hidden by client"),a[p.types.DO_CLOSE_WIDGET]()},n[g.EVENT_TYPES.UPLOADER_CLIENT_TAGS]=function(e){j.log("[UploadContainer.connector]: received client tags",e),a[p.types.SET_SUGGESTED_TAGS](e)},n[g.EVENT_TYPES.UPLOADER_CLIENT_UPLOAD_PRESETS]=function(e){j.log("[UploadContainer.connector]: received client upload presets",e),a[p.types.SET_SUGGESTED_UPLOAD_PRESETS](e)},n[g.EVENT_TYPES.UPLOADER_CLIENT_MINIMIZE]=function(){j.log("[UploadContainer.connector]: received client minimize"),m(),a[p.types.SET_WIDGET_VIEW_TYPE]({type:E.a.WIDGET_VIEW_TYPES.MINI})},n[g.EVENT_TYPES.UPLOADER_BATCH_STARTED]=function(){j.log("[UploadContainer.connector]: received batch added"),l(E.a.QUEUE)||Object(_.b)(m,20),Object(_.b)(e[p.types.SET_BATCH_STARTED],40)},n[g.EVENT_TYPES.UPLOADER_CROP_STARTED]=function(e){j.log("[UploadContainer.connector]: received crop started",e),I(""),f(E.a.CROP);var t=new FileReader,n=e.files[0].camera||e.files[0]._custom;if("string"==typeof e.files[0]||n)I(n?e.files[0].file:e.files[0],e);else try{t.readAsDataURL(e.files[0])}catch(e){j.devError("[UploadContainer.connector]: failed to read file url for crop"),a[p.types.SET_CROP]({imageError:!0})}t.onload=function(){return I(t.result,e)}},n[g.EVENT_TYPES.UPLOADER_BATCH_CANCELLED]=function(e){j.log("[UploadContainer.connector]: received batch cancelled with reason: "+e.reason),a[p.types.SET_WIDGET_VIEW_TYPE]({type:E.a.WIDGET_VIEW_TYPES.INITIAL,router:t}),e.info&&e.info.files&&a[p.types.CLEAR_CANCELLED_UPLOADS](e.info);var n=T[e.reason];n&&a[n]()},n[g.EVENT_TYPES.UPLOADER_CLOUD_INFO]=function(t){j.log("[UploadContainer.connector]: received cloud info ",t),e[p.types.SET_IS_PREMIUM](t)},n[g.EVENT_TYPES.UPLOADER_SUCCESS_COUNTER]=function(t){j.log("[UploadContainer.connector]: received updated success counter ",t),e[p.types.SET_SUCCESSFUL_COUNTER](t)},n),C=function(){s.isShowingOnStart()&&a[p.types.SET_WIDGET_SHOWING]()},y=(o=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.containerData.closeCounter&&t.containerData.closeCounter>i.closeCounter)){e.next=12;break}if(j.log("[UploadContainer.connector]: received new close counter, clearing uploader queue"),l(E.a.QUEUE,t)||!t.hasActiveUploads){e.next=8;break}a[p.types.SET_WIDGET_VIEW_TYPE]({type:E.a.WIDGET_VIEW_TYPES.MINI}),m(),h(E.a.WIDGET_VIEW_TYPES.MINI),e.next=12;break;case 8:return e.next=10,s.clearQueues();case 10:e.sent&&(j.log("[UploadContainer.connector]: clear queues finished successfully - sending hide command to uploader"),a[p.types.CLEAR_ADVANCED_VALUES](),a[p.types.CLEAR_QUEUE](),a[p.types.CLEAR_ALL_NOTIFICATIONS](),s.hide());case 12:case"end":return e.stop()}},e,v)}),r=function(){var e=o.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e){return r.apply(this,arguments)}),A=function(e){var t,n,o,r,u;a=e,s=e.uploader,i=e.containerData,t=a[p.types.SET_QUEUE_ITEMS],n=[],o={},r=!1,u=null,c=function(e,a,s){u||(u=Object(_.b)(function(){t({ids:n,items:o,simulated:r}),o={},n=[],r=!1,u=null},60)),n=n.concat(e.filter(function(e){return!~n.indexOf(e)})),o=O({},o,a),r=!!s}};return A(e),Object.keys(x).forEach(function(e){return s.on(e,x[e])}),{updateProps:A,processNextProps:function(e){return Promise.all([function(e){if(e.containerData.uploadAdded){var t=(m=e,b=(f=a).containerData.uploadAdded?f.containerData.uploadAdded.files:[],E=m.containerData.uploadAdded?m.containerData.uploadAdded.files:[],b.length&&E.length?E.filter(function(e){return!~b.indexOf(e)}):E),n=(l=e,d=(u=a).containerData.uploadAdded&&u.containerData.uploadAdded.cropInfo?u.containerData.uploadAdded.cropInfo:[],p=l.containerData.uploadAdded&&l.containerData.uploadAdded.cropInfo?l.containerData.uploadAdded.cropInfo:[],d.length&&p.length?p.filter(function(e){return!~d.indexOf(e)}):p);n.length&&!t.length&&(o=n,i=[],c=(r=e).containerData.uploadAdded?r.containerData.uploadAdded.files:[],o.forEach(function(e){i.push(c[c.indexOf(e.file)])}),t=i),t.length&&(j.log("[UploadContainer.connector]: new upload items added, sending to queue",t),s.addToQueue({files:t,cropInfo:n}))}var o,r,i,c,u,l,d,p,f,m,b,E}(e),(o=e,void(o.containerData.retryIds&&o.containerData.retryIds.length&&o.containerData.retryIds!==i.retryIds&&(j.log("[UploadContainer.connector]: about to initiate retry for failed item(s): ",o.containerData.retryIds),s.retryUploads(o.containerData.retryIds)))),(n=e,void(n.containerData.abortIds&&n.containerData.abortIds.length&&n.containerData.abortIds!==i.abortIds&&(j.log("[UploadContainer.connector]: about to initiate abort for item(s): ",n.containerData.abortIds),s.abortUploads(n.containerData.abortIds)))),function(e){var t=e.containerData.uploadOptions;if(t){var n=i.uploadOptions.tags,o=i.uploadOptions.uploadPreset,r=t.tags!==n?t.tags:n,a=t.uploadPreset!==o?t.uploadPreset:o;t.tagsInputValue!==i.uploadOptions.tagsInputValue&&(r=[].concat(r,Object(b.isBlank)(t.tagsInputValue)?[]:Object(b.trim)(t.tagsInputValue))),r!==n&&s.setUploadTags(r),t.publicId!==i.uploadOptions.publicId&&s.setUploadPublicId(t.publicId),a!==o&&s.setUploadPreset(a)}}(e),y(e),(t=e,void(t.containerData.widgetViewType&&t.containerData.widgetViewType!==i.widgetViewType&&h(t.containerData.widgetViewType)))]);var t,n,o}}};function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=x(this,e.call.apply(e,[this].concat(a))),o.connector=null,x(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.connector=I(this.props,this.context.router)},t.prototype.componentDidUpdate=function(){if(this.connector){var e=this.connector;e.processNextProps(this.props),e.updateProps(this.props)}},t.prototype.render=function(){return a.a.createElement(m.a.Provider,{value:this.props.uploader},a.a.createElement(r.Fragment,null,this.props.children))},t}(r.Component);C.contextTypes={router:i.a.object};t.default=Object(u.d)(Object(c.b)(Object(l.createStructuredSelector)({containerData:f.selectUploadContainerData,hasActiveUploads:f.selectHasActiveUploads,location:f.selectLocation}),p.default)(C))},"./root/components/UploadContainer/uploaderContext.js":function(e,t,n){"use strict";n.d(t,"b",function(){return i});var o=n("../node_modules/react/index.js"),r=n.n(o),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=r.a.createContext(null),i=function(e){return function(t){return r.a.createElement(s.Consumer,null,function(n){return r.a.createElement(e,a({},t,{uploader:n}))})}};t.a=s},"./root/components/UploadPresetInput/UploadPresetInput.scss":function(e,t){},"./root/components/UploadPresetInput/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./root/components/DropdownList/DropdownList.js"),s=n("./common/i18n.js"),i=n("./root/components/UploadPresetInput/UploadPresetInput.scss");n.n(i);t.default=function(e){return r.a.createElement(a.a,{width:300,items:e.options,selectedItem:e.value,renderPlaceholder:function(){return r.a.createElement("div",{className:""},Object(s.b)("advanced_options.upload_preset_placeholder"))},renderInputValue:function(e){return r.a.createElement("div",{className:""},e)},onChange:e.onChange,placement:"top"})}},"./root/components/UserBlock/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/glamorous/dist/glamorous.esm.js"),s=n("./common/i18n.js"),i=n("./root/components/SvgIcon/index.js"),c=n("../assets/icons/icons.js"),u=a.b.div("flex items-center pointer",{"&:hover":{opacity:.8},"&:active":{transform:"translate(0, 2px)"}});t.default=function(e){var t=e.name,n=e.onLogout;return r.a.createElement(u,{"data-test":"user-block",onClick:n},r.a.createElement(i.default,{className:"mr3",size:"sm",colorName:"menu-icons",path:c.b.USER}),r.a.createElement("div",{"data-test":"user-block-logout",className:"f7 c-menu-icons nowrap"},Object(s.b)("actions.log_out")," ",r.a.createElement("span",{className:"dn dib-ns"},t?"("+t+")":"")))}},"./root/data/NotificationsData.js":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o,r=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),a=n.n(r),s=(n("./common/consts.js"),{SELECTION_MAX_REACHED:"SELECTION_MAX_REACHED",INVALID_URL:"INVALID_URL",ERROR:"ERROR",PROMPT:"PROMPT",INVALID_PUBLIC_ID:"INVALID_PUBLIC_ID",NO_NEW_FILES:"NO_NEW_FILES"});t.b=a()(((o={})[s.SELECTION_MAX_REACHED]={id:s.SELECTION_MAX_REACHED,text:"notifications.limit_reached"},o[s.INVALID_URL]={id:s.INVALID_URL,text:"notifications.invalid_add_url"},o[s.ERROR]={id:s.ERROR,text:"notifications.general_error"},o[s.PROMPT]={id:s.PROMPT,text:"notifications.general_prompt",actions:[]},o[s.INVALID_PUBLIC_ID]={id:s.INVALID_PUBLIC_ID,text:"notifications.invalid_public_id"},o[s.NO_NEW_FILES]={id:s.NO_NEW_FILES,text:"notifications.no_new_files"},o))},"./root/hocs/ModalWrapper/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=(n.n(o),n("../node_modules/react-onclickoutside/dist/react-onclickoutside.es.js"));function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=function(e){return function(t){var n=function(n){function o(){var t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var s=arguments.length,i=Array(s),c=0;c<s;c++)i[c]=arguments[c];return t=r=a(this,n.call.apply(n,[this].concat(i))),r.onEscape=function(t){27===t.which&&e.handleShouldHide({reason:"esc"})},a(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),o.prototype.componentDidMount=function(){document.addEventListener("keydown",this.onEscape)},o.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.onEscape)},o.prototype.handleClickOutside=function(){e.handleShouldHide({reason:"outside"})},o.prototype.render=function(){return t},o}(o.Component);return n.displayName="ModalWrapperHoc("+(e.id||"ModalContent")+")",Object(r.a)(n)}}},"./root/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,a,s,i,c=n("./uploader/index.js"),u=n("./common/logger.js"),l=n("./common/reducerBase.js"),d=n("./utils/domUtils.js"),p=n("./utils/camera.js"),f=n("./root/actions/index.js"),m=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),b=n.n(m),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},g=["cloudName","inlineMode","sources","defaultSource","multiple","googleApiKey","dropboxAppKey","facebookAppId","instagramClientId","searchBySites","searchByRights","autoMinimize","useTagsCallback","useUploadPresetsCallback","text","language","maxFiles","showAdvancedOptions","showPoweredBy","showCompletedButton","showUploadMoreButton","cropping","croppingAspectRatio","croppingDefaultSelectionRatio","croppingShowDimensions","croppingCoordinatesMode","croppingShowBackButton","minImageWidth","minImageHeight","theme","singleUploadAutoClose"],h=function(e){return Object.keys(e).filter(function(e){return~g.indexOf(e)}).reduce(function(t,n){return t[n]=e[n],t},{})},_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},O=Object(u.c)(),S=c.consts.SOURCES,v=function(e,t){return{valid:t,reason:"'secure' option must be turned on"}},j=((o={})[S.INSTAGRAM]=v,o[S.DROPBOX]=v,o[S.IMAGE_SEARCH]=function(e){return{valid:!!e.googleApiKey,reason:"Google API Key must be provided"}},o[S.CAMERA]=function(e,t){return{valid:t&&(n=self.location,!Object(d.e)()&&("localhost"===n.hostname||"https:"===n.protocol)&&Object(p.c)()&&!Object(d.d)()),reason:"only supported on https and desktop browsers"};var n},o),T=function(e,t){var n,o,r,a,s,i,c=h(t),u=c.sources&&c.sources&&(n=c,o=t.secure,(r=[].concat(n.sources&&n.sources.filter(function(e){var t=j[e]?j[e](n,o):{valid:!0};return t.valid||O.warn("[widgetConfigReducer]: removing "+e+" - "+t.reason),t.valid})||[])).length||(O.warn("[widgetConfigReducer]: no valid sources configured, defaulting to local"),r.push(S.LOCAL)),r),l=c.searchBySites&&c.searchBySites.length?c.searchBySites:["all"];return _({},c,{showAdvancedOptions:(i=t,i.showAdvancedOptions&&!i.tags&&!i.publicId),searchBySites:l,sources:u||e.sources,defaultSource:u?(a=t.defaultSource,s=u,a&&~s.indexOf(a)||(O.log("[widgetConfigReducer]: default source "+(a||"null")+" is not present in valid&enabled sources"),a=s[0]),a):e.defaultSource})},I=Object(l.a)(b()(E({__record:"WidgetConfigRecord"},h(c.defaults))),((r={})[f.types.SET_WIDGET_CONFIG]=function(e,t){var n=t.payload;return e.merge(T(e,n))},r)),x=n("../node_modules/lodash/fp.js"),C=n("./utils/seamlessUtils.js"),y=function(){return b()({__record:"UploadQueueRecord",queueIds:[],queueItems:{},simulatedQueue:!1,retryIds:[],abortIds:[],added:{files:[],cropInfo:[]},addValidationError:null})},A=Object(l.a)(y(),((a={})[f.types.SET_QUEUE_ITEMS]=function(e,t){var n,o,r,a,s=t.payload;return n=e,e=(o=s.ids.filter(function(e){return!~n.queueIds.indexOf(e)})).length?Object(C.b)(n,"queueIds",o):n,r=e,a=s,Object.keys(a.items).forEach(function(e){r=r.setIn(["queueItems",e],a.items[e])}),e=r,void 0!==s.simulated&&s.simulated!==e.simulatedQueue&&(e=e.set("simulatedQueue",s.simulated)),e},a[f.types.CLEAR_QUEUE]=function(e){return e.merge(y())},a[f.types.SET_QUEUE_ITEMS_RETRY]=function(e,t){var n=t.payload;return e.set("retryIds",n&&n.ids?n.ids:[Object(x.uniqueId)("*")])},a[f.types.SET_QUEUE_ITEMS_ABORT]=function(e,t){var n=t.payload;return e.set("abortIds",n&&n.ids?n.ids:[Object(x.uniqueId)("*")])},a[f.types.ADD_UPLOAD_TO_QUEUE]=function(e,t){var n=t.payload;return e=Object(C.b)(e,["added","files"],n.files),n.cropInfo&&(e=Object(C.b)(e,["added","cropInfo"],n.cropInfo)),e},a[f.types.CLEAR_CANCELLED_UPLOADS]=function(e,t){var n=t.payload;return e.added&&e.added.files?Object(C.a)(e,["added","files"],function(e){return!~n.files.indexOf(e)}):e},a)),R=n("./common/consts.js"),L=Object(l.a)(b()({__record:"WidgetDataRecord",source:null,isResponsiveWidth:!1,notifications:{},advancedOptionsOpen:!1,responsiveMenuShow:!1,publicIdError:!1,advancedPublicId:"",advancedTags:[],advancedUploadPreset:null,suggestedTags:[],suggestedUploadPresets:null,tagsInputValue:"",widgetCloseCounter:0,isShowing:!1,widgetViewType:R.a.WIDGET_VIEW_TYPES.INITIAL,widgetViewTypeChangeByUser:!1,batchStartCounter:0,premiumInfoReceived:!1,isPremium:!1,successfulCount:0,dictionaryTextVersion:0,preQueuePath:null}),((s={})[f.types.SET_ACTIVE_SOURCE]=function(e,t){var n=t.payload;return e.set("source",n.source)},s[f.types.ADD_NOTIFICATION]=function(e,t){var n=t.payload;return e.notifications[n.notification.id]?e:e.setIn(["notifications",n.notification.id],n.notification)},s[f.types.CLEAR_NOTIFICATION]=function(e,t){var n,o,r=t.payload;return n=e,o=r.id,n.setIn(["notifications",o],null)},s[f.types.SET_IS_RESPONSIVE]=function(e,t){var n=t.payload;return e.set("isResponsiveWidth",n.isResponsiveWidth)},s[f.types.TOGGLE_ADVANCED_OPTIONS]=function(e){return e.set("advancedOptionsOpen",!e.advancedOptionsOpen)},s[f.types.SET_UPLOAD_TAGS]=function(e,t){var n=t.payload;return e.set("advancedTags",n.tags)},s[f.types.SET_UPLOAD_PRESET]=function(e,t){var n=t.payload;return e.set("advancedUploadPreset",n.uploadPreset)},s[f.types.SET_PUBLIC_ID]=function(e,t){var n=t.payload;return e.merge({advancedPublicId:n.value,publicIdError:!1})},s[f.types.CLEAR_ADVANCED_VALUES]=function(e){return e.merge({advancedPublicId:"",advancedTags:[],advancedUploadPreset:null,tagsInputValue:"",advancedOptionsOpen:!1})},s[f.types.REMOVE_UPLOAD_TAG]=function(e,t){var n=t.payload;return Object(C.c)(e,"advancedTags",n.index)},s[f.types.REMOVE_LAST_UPLOAD_TAG]=function(e){return e.advancedTags.length?Object(C.c)(e,"advancedTags",e.advancedTags.length-1):e},s[f.types.TOGGLE_RESPONSIVE_MENU]=function(e,t){var n=t.payload;return e.set("responsiveMenuShow",n&&void 0!==n.show?n.show:!e.responsiveMenuShow)},s[f.types.DO_INC_CLOSE_COUNTER]=function(e){return e.merge({widgetCloseCounter:e.widgetCloseCounter+1,isShowing:!1})},s[f.types.SET_WIDGET_SHOWING]=function(e){return e.set("isShowing",!0)},s[f.types.SET_WIDGET_VIEW_TYPE]=function(e,t){var n=t.payload;return e.merge({widgetViewType:n.type,widgetViewTypeChangeByUser:!!n.userAction})},s[f.types.SET_SUGGESTED_TAGS]=function(e,t){var n=t.payload;return e.set("suggestedTags",n.tags||[])},s[f.types.SET_SUGGESTED_UPLOAD_PRESETS]=function(e,t){var n=t.payload;return e.set("suggestedUploadPresets",n.uploadPresets||[])},s[f.types.SET_TAGS_INPUT_VALUE]=function(e,t){var n=t.payload;return e.set("tagsInputValue",n.value)},s[f.types.SET_INVALID_PUBLIC_ID_FOUND]=function(e){return e.merge({advancedOptionsOpen:!0,publicIdError:!0})},s[f.types.SET_BATCH_STARTED]=function(e){return e.set("batchStartCounter",e.batchStartCounter+1)},s[f.types.SET_IS_PREMIUM]=function(e,t){var n=t.payload;return e.merge({premiumInfoReceived:!0,isPremium:!!(n.onConsole||n.info&&n.info["data-premium"])})},s[f.types.SET_SUCCESSFUL_COUNTER]=function(e,t){var n=t.payload;return e.set("successfulCount",n.count)},s[f.types.SET_DICTIONARY_TEXT_CHANGED]=function(e){return e.set("dictionaryTextVersion",e.dictionaryTextVersion+1)},s[f.types.SET_LAST_PRE_QUEUE_PATH]=function(e,t){var n=t.payload;return e.set("preQueuePath",n.path)},s)),w=n("../node_modules/lodash/pick.js"),D=n.n(w),P=n("../node_modules/voca/index.js"),U=n("./appConfig.js"),N=n("./utils/colorUtils.js"),M={window:"#ffffff",sourceBg:"#f4f4f5",windowBorder:"#90a0b3",tabIcon:"#000000",inactiveTabIcon:"#555a5f",menuIcons:"#555a5f",link:"#0433ff",action:"#339933",inProgress:"#0433ff",complete:"#339933",error:"#cc0000",textDark:"#000000",textLight:"#fcfffd"},F=b()({default:{window:"#FFF",windowBorder:"#90A0B3",tabIcon:"#0078FF",inactiveTabIcon:"#0E2F5A",menuIcons:"#5A616A",textDark:"#000000",textLight:"#FFFFFF",link:"#0078FF",action:"#FF620C",error:"#F44235",inProgress:"#0078FF",complete:"#20B832",sourceBg:"#E4EBF1"},white:M,minimal:M,purple:{window:"#5D005D",sourceBg:"#3A0A3A",windowBorder:"#AD5BA3",tabIcon:"#ffffcc",inactiveTabIcon:"#FFD1D1",menuIcons:"#FFD1D1",link:"#ffcc33",action:"#ffcc33",inProgress:"#00e6b3",complete:"#a6ff6f",error:"#ff1765",textDark:"#3c0d68",textLight:"#fcfffd"}}),k=function(){return b()({__record:"WidgetStylesRecord",loadCustomImages:{},customImagesResults:{},palette:F.default,fonts:{fontFamily:null,links:[]},frame:{background:"rgba(14,47,90,.6)"}})},B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},G=function(e,t){var n=U.a.customization.fontDomains.map(function(e){return"//"+e+"/"}).join("|"),o=Object.keys(e);return o.reduce(function(t,o){var r=e[o]&&Object(P.isString)(e[o]),a=e[o]?r?e[o]:e[o].url:null;return a&&!a.match(n)||(e[o]&&!r&&e[o].active&&(t.fontFamily=o),a&&!~t.links.indexOf(a)&&t.links.push(a)),t},{fontFamily:t.fontFamily||o[0],links:t.links.asMutable()})},H=function(e,t){var n,o,r,a,s,i,c={palette:t.palette?(r=t.palette,a=k().palette,s=Object.keys(a),i=D()(r,s),Object.keys(i).reduce(function(e,t){return e[t]=Object(N.a)(i[t])?i[t]:a[t],e},{})):t.theme?(n=t.theme,o=e,F[n]?F[n]:o.palette):e.palette,fonts:t.fonts?G(t.fonts,e.fonts):e.fonts,frame:t.frame?B({},e.frame,t.frame):e.frame};return e.merge(c,{deep:!0})},V=Object(l.a)(k(),((i={})[f.types.SET_WIDGET_STYLES]=function(e,t){var n=t.payload;return H(e,n)},i[f.types.SET_CUSTOM_IMAGES_TO_LOAD]=function(e,t){var n=t.payload;return e.set("loadCustomImages",n.images)},i[f.types.SET_CUSTOM_IMAGES_LOAD_RESULTS]=function(e,t){var n=t.payload.results.reduce(function(e,t){return e[t.key]=t,e},{}),o={};return Object.keys(e.loadCustomImages).forEach(function(t){n[t]||(o[t]=e.loadCustomImages[t])}),e.merge({loadCustomImages:o,customImagesResults:n})},i));t.default={widgetConfig:I,uploadQueue:A,widgetData:L,widgetStyles:V}},"./root/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/reselect/lib/index.js"),r=n("../node_modules/lodash/isEqual.js"),a=n.n(r),s=Object(o.createSelectorCreator)(o.defaultMemoize,a.a);n.d(t,"getQueueCounters",function(){return p}),n.d(t,"getWidgetConfig",function(){return c}),n.d(t,"selectMenuData",function(){return f}),n.d(t,"selectIsMultipleEnabled",function(){return m}),n.d(t,"selectLocation",function(){return b}),n.d(t,"selectNotification",function(){return E}),n.d(t,"selectDefaultSource",function(){return h}),n.d(t,"selectAdvancedOptions",function(){return S}),n.d(t,"selectIsAdvancedOptionsOpen",function(){return _}),n.d(t,"selectCloudName",function(){return v}),n.d(t,"selectUploadContainerData",function(){return T}),n.d(t,"selectIsResponsiveWidth",function(){return g}),n.d(t,"selectShowPoweredBy",function(){return x}),n.d(t,"selectHasActiveUploads",function(){return j}),n.d(t,"selectBatchStartCounter",function(){return C}),n.d(t,"selectWidgetViewType",function(){return y}),n.d(t,"selectAutoMinimizeConfig",function(){return L}),n.d(t,"selectWidgetViewTypeChangeByUser",function(){return R}),n.d(t,"selectConfigLanguage",function(){return w}),n.d(t,"selectShouldShowAdvancedOptions",function(){return O}),n.d(t,"selectCustomImagesResults",function(){return P}),n.d(t,"selectCustomImagesToLoad",function(){return U}),n.d(t,"selectPalette",function(){return N}),n.d(t,"selectFonts",function(){return M}),n.d(t,"selectDictionaryTextVersion",function(){return D}),n.d(t,"selectIsSingleSource",function(){return F}),n.d(t,"selectAddedUploads",function(){return I}),n.d(t,"selectPreQueuePath",function(){return k}),n.d(t,"selectIsInlineMode",function(){return A}),n.d(t,"selectFrameStyles",function(){return B}),n.d(t,"selectSingleUploadAutoClose",function(){return G});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c=function(e){return e.widgetConfig},u=function(e){return e.uploadQueue},l=function(e){return e.widgetData},d=function(e){return e.widgetStyles},p=function(e){var t=e.queueItems,n=e.queueIds,o=n.reduce(function(e,n){var o=t[n];return e.active=e.active+(o.done||o.failed?0:1),e.failed=e.failed+(o.failed?1:0),e},{active:0,failed:0,done:0,total:n.length}),r=o.total-(o.active+o.failed),a=!(!o.active&&!e.simulatedQueue);return i({},o,{done:r,hasActive:a,isSimulated:e.simulatedQueue,isDone:!a&&(r>0||!!o.failed&&o.failed===o.total)})},f=s(function(e){return{sources:e.widgetConfig.sources,source:e.widgetData.source,responsiveMenuShow:e.widgetData.responsiveMenuShow,isResponsiveWidth:e.widgetData.isResponsiveWidth}},function(e){return{enabledSources:e.sources,isSingle:1===e.sources.length,currentSource:e.source,responsiveShow:e.responsiveMenuShow,isResponsiveWidth:e.isResponsiveWidth}}),m=Object(o.createSelector)(c,function(e){return e.multiple}),b=Object(o.createSelector)(function(e){return e.routing.location},function(e){return e}),E=Object(o.createSelector)(l,function(e){var t=Object.keys(e.notifications).find(function(t){return e.notifications[t]});return t?e.notifications[t]:{}}),g=Object(o.createSelector)(l,function(e){return e.isResponsiveWidth}),h=Object(o.createSelector)(c,function(e){return{defaultSource:e.defaultSource}}),_=Object(o.createSelector)(l,function(e){return e.advancedOptionsOpen}),O=Object(o.createSelector)(c,function(e){return e.showAdvancedOptions}),S=Object(o.createSelector)(c,l,function(e,t){return{useTagsCallback:e.useTagsCallback,useUploadPresetsCallback:e.useUploadPresetsCallback,setPublicId:t.advancedPublicId,setTags:t.advancedTags,setUploadPreset:t.advancedUploadPreset,suggestedTags:t.suggestedTags,suggestedUploadPresets:t.suggestedUploadPresets,tagsInputValue:t.tagsInputValue,publicIdError:t.publicIdError}}),v=Object(o.createSelector)(c,function(e){return e.cloudName}),j=Object(o.createSelector)(u,function(e){return p(e).active>0}),T=s(function(e){return{added:e.uploadQueue.added,queueIds:e.uploadQueue.queueIds,retryIds:e.uploadQueue.retryIds,abortIds:e.uploadQueue.abortIds,widgetCloseCounter:e.widgetData.widgetCloseCounter,widgetViewType:e.widgetData.widgetViewType,advancedPublicId:e.widgetData.advancedPublicId,advancedTags:e.widgetData.advancedTags,advancedUploadPreset:e.widgetData.advancedUploadPreset,tagsInputValue:e.widgetData.tagsInputValue}},function(e){return{uploadAdded:e.added,queueIds:e.queueIds,retryIds:e.retryIds,abortIds:e.abortIds,closeCounter:e.widgetCloseCounter,widgetViewType:e.widgetViewType,uploadOptions:{publicId:e.advancedPublicId,tags:e.advancedTags,tagsInputValue:e.tagsInputValue,uploadPreset:e.advancedUploadPreset}}}),I=Object(o.createSelector)(u,function(e){return e.added}),x=Object(o.createSelector)(c,l,function(e,t){return t.premiumInfoReceived&&(!1!==e.showPoweredBy&&t.isPremium||!t.isPremium)}),C=Object(o.createSelector)(l,function(e){return e.batchStartCounter}),y=Object(o.createSelector)(l,function(e){return e.widgetViewType}),A=Object(o.createSelector)(c,function(e){return e.inlineMode}),R=Object(o.createSelector)(l,function(e){return e.widgetViewTypeChangeByUser}),L=Object(o.createSelector)(c,function(e){return e.autoMinimize}),w=Object(o.createSelector)(c,function(e){return e.language}),D=Object(o.createSelector)(l,function(e){return e.dictionaryTextVersion}),P=Object(o.createSelector)(d,function(e){return e.customImagesResults}),U=Object(o.createSelector)(d,function(e){return e.loadCustomImages}),N=Object(o.createSelector)(d,function(e){return e.palette}),M=Object(o.createSelector)(d,function(e){return e.fonts}),F=Object(o.createSelector)(c,function(e){return 1===e.sources.length}),k=Object(o.createSelector)(l,function(e){return e.preQueuePath}),B=Object(o.createSelector)(d,function(e){return{background:e.frame.background}}),G=Object(o.createSelector)(c,function(e){return e.singleUploadAutoClose})},"./root/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{or:"Or",back:"Back",advanced:"Advanced",close:"Close",no_results:"No results",search_placeholder:"Search files",about_uw:"About the Upload Widget",menu:{files:"My Files",web:"Web Address",camera:"Camera",gsearch:"Image Search",gdrive:"Google Photos",dropbox:"Dropbox",facebook:"Facebook",instagram:"Instagram"},selection_counter:{selected:"Selected"},actions:{upload:"Upload",clear_all:"Clear all",log_out:"Log out"},notifications:{general_error:"An error has occurred.",general_prompt:"Are you sure?",limit_reached:"No more files can be selected.",invalid_add_url:"The URL must be valid.",invalid_public_id:"Public ID cannot contain \\,?,&,#,%,<,>.",no_new_files:"The files have already been uploaded."},advanced_options:{public_id_ph:"Public ID",tags_ph:"Add a tag",add_new:"Add a new tag:",upload_preset_placeholder:"Upload Preset"},landscape_overlay:{title:"Landscape mode isn't supported",description:"Rotate your device back to portrait mode to continue."}}}}},"./routing/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/voca/index.js"),s=n("../node_modules/history/createMemoryHistory.js"),i=n.n(s),c=n("./root/components/RouteWithSubRoutes/index.js"),u=n("./root/components/DefaultPanel/index.js"),l=n("./utils/envUtils.js"),d=[{path:"/",exact:!0,children:function(e){return r.a.createElement(u.default,{route:e})}}].concat(Object(l.c)("ROUTES"));n.d(t,"appRoutes",function(){return b}),n.d(t,"history",function(){return m}),n.d(t,"RouteWithSubRoutes",function(){return c.default});var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=self.location.pathname,m=i()({initialEntries:Object(a.endsWith)(f,".html")?["/"]:[f]}),b=d.map(function(e){return r.a.createElement(c.default,p({key:""+e.path},e))})},"./routing/navItems.js":function(e,t,n){"use strict";var o=n("./common/i18n.js"),r=n("./uploader/index.js"),a=n("./routing/utils.js"),s=r.consts.SOURCES;t.a=function(){return[{id:s.LOCAL,path:Object(a.a)(s.LOCAL),title:Object(o.b)("menu.files")},{id:s.URL,path:Object(a.a)(s.URL),title:Object(o.b)("menu.web")},{id:s.CAMERA,path:Object(a.a)(s.CAMERA),title:Object(o.b)("menu.camera")},{id:s.IMAGE_SEARCH,path:Object(a.a)(s.IMAGE_SEARCH),title:Object(o.b)("menu.gsearch")},{id:s.DROPBOX,path:Object(a.a)(s.DROPBOX),title:Object(o.b)("menu.dropbox")},{id:s.FACEBOOK,path:Object(a.a)(s.FACEBOOK),title:Object(o.b)("menu.facebook")},{id:s.INSTAGRAM,path:Object(a.a)(s.INSTAGRAM),title:Object(o.b)("menu.instagram")}]}},"./routing/utils.js":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return"/"+t.join("/")}},"./services/imagesPrefetcher.js":function(e,t,n){"use strict";n.d(t,"b",function(){return a});var o=n("./appConfig.js"),r=n("./utils/domUtils.js"),a=function(e,t){return new Promise(function(n){var a=!1,s=new Image;s.src=t;var i=function(){var o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a||(s.onload=null,s.onerror=null,n({key:e,url:t,success:o,reason:r,img:s}),c())},c=Object(r.b)(function(){i(!1,"timeout"),a=!0},o.a.customization.imageLoadTimeout);s.onload=function(){i()},s.onerror=function(){i(!1,"fail")}})};t.a=function(e){return Promise.all(Object.keys(e).map(function(t){return a(t,e[t])}))}},"./services/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};n.d(o,"callApi",function(){return h}),n.d(o,"get",function(){return _}),n.d(o,"post",function(){return O}),n.d(o,"put",function(){return S}),n.d(o,"patch",function(){return v}),n.d(o,"del",function(){return j}),n.d(o,"jsonp",function(){return T});var r={};n.d(r,"getStoredAuthToken",function(){return A}),n.d(r,"setMessageAuthListener",function(){return L}),n.d(r,"removeAuthToken",function(){return R}),n.d(r,"getAuthRedirectUrl",function(){return w});var a=n("./appConfig.js"),s=n("./common/logger.js"),i=(n("../node_modules/isomorphic-fetch/fetch-npm-browserify.js"),n("../node_modules/fetch-jsonp/build/fetch-jsonp.js")),c=n.n(i),u=n("../node_modules/qs/lib/index.js"),l=n.n(u),d=n("../node_modules/voca/index.js"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=this;function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var b,E,g=(b=m(regeneratorRuntime.mark(function e(t,n){var o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0,e.prev=1,e.next=4,fetch(t,n);case 4:if((r=e.sent).ok){e.next=9;break}o=Promise.reject(r),e.next=12;break;case 9:return e.next=11,r.json();case 11:o=e.sent;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),o=Promise.reject(e.t0);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}},e,f,[[1,14]])})),function(e,t){return b.apply(this,arguments)}),h=(E=m(regeneratorRuntime.mark(function e(t){var n,o,r,a,s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,o=i.query&&(Object(d.isString)(i.query)?i.query:l.a.stringify(i.query)),r=i.query?n+"?"+o:n,a={headers:p({Accept:"application/json","Content-Type":"application/json"},i.headers)},!0===i.noCors&&(i.mode="no-cors"),i.body&&(i.body=JSON.stringify(i.body)),s=p({},a,i),e.next=8,g(r,s);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,f)})),function(e){return E.apply(this,arguments)}),_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h(e,p({query:t},n))},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h(e,p({method:"POST",body:t},n))},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h(e,p({method:"PUT",body:t},n))},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h(e,p({method:"PATCH",body:t},n))},j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h(e,p({method:"DELETE",body:t},n))},T=function(e){return c()(e).then(function(e){return e.json()})},I=n("./common/consts.js"),x=n("./utils/domUtils.js"),C=Object(s.b)(),y=function(e,t){return"uw_"+e+"_"+t+"_token"},A=function(e,t){return x.i.getItem(y(e,t))},R=function(e,t){return x.i.removeItem(y(e,t))},L=function(e,t,n){return new Promise(function(o){var r=!1,a=null,s=0;x.g.removeItem(I.a.OAUTH_STORAGE_TOKEN);var i=function(s){if(!r){C.log("[services]: received valid auth post message with data: ",s);var i=l.a.parse(s.split("#")[1]).access_token;x.i.setItem(y(t,n),i),x.g.removeItem(I.a.OAUTH_STORAGE_TOKEN),self.removeEventListener("message",c),self.removeEventListener("storage",u);var d=e();d&&d.close(),a&&clearInterval(a),r=!0,o({token:i})}},c=function(t){var n=e();if(n){var o=t.origin,r=t.source,a=t.data;r===n&&o===location.protocol+"//"+location.host&&i(a)}},u=function(e){e.key===I.a.OAUTH_STORAGE_TOKEN&&e.newValue&&i(e.newValue)};self.addEventListener("message",c),self.addEventListener("storage",u),a=setInterval(function(){if(s<360){var e=x.g.getItem(I.a.OAUTH_STORAGE_TOKEN);e?i(e):s+=1}else a&&clearInterval(a)},500)})},w=function(e){return~a.a.api.devAuthDomains.indexOf(self.location.hostname)?location.protocol+"//"+location.host+"/"+e+"/?authFlow=true":""+a.a.api.widgetBase+a.a.api.widgetAuth};n.d(t,"getCloudInfo",function(){return P}),n.d(t,"api",function(){return o}),n.d(t,"common",function(){return r});var D=Object(s.c)(),P=function(e,t){var n=a.a.api.widgetBase,o=a.a.api.info,r=a.a.api.cloudInfo||""+n+o+"/"+e+".json";return D.log("[services.getCloudInfo]: about to retrieve cloud info for cloud: "+e),_(r,t,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).catch(function(t){D.warn("[services.getCloudInfo]: encountered error when retrieving cloud ("+e+") error: ",t)}).then(function(t){return D.log("[services.getCloudInfo]: retrieved cloud info for "+e+": ",t),t||{}})}},"./startApp.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("../node_modules/babel-polyfill/lib/index.js");var o,r=n("../node_modules/react/index.js"),a=n.n(r),s=n("../node_modules/react-dom/index.js"),i=n("../node_modules/react-tap-event-plugin/src/injectTapEventPlugin.js"),c=n.n(i),u=n("../node_modules/react-hot-loader/index.js"),l=n("../node_modules/react-redux/es/index.js"),d=n("../node_modules/react-router-redux/es/index.js"),p=(n("../node_modules/tippy.js/dist/tippy.css"),n("./store/index.js")),f=n("./appConfig.js"),m=n("./common/logger.js"),b=n("./routing/index.js"),E=n("./root/components/App/index.js"),g=n("./uploader/index.js"),h=n("./root/components/UploadContainer/index.js"),_=(n("../assets/scss/main.scss"),n("./base.scss"),n("../node_modules/glamor/lib/index.js"));document.body.id=document.body.id||"uw-glamor-"+Math.random().toString().slice(15),_.plugins.add((o=document.body.id,function(e){var t=e.selector,n=e.style,r=t.split(",").map(function(e){return"#"+o+" "+e.trim()}).join(", ");return{selector:r,style:n}}));var O=this;try{c()()}catch(e){}Object(m.d)(f.a.logLevel);var S,v,j=Object(m.c)(),T=(S=regeneratorRuntime.mark(function e(t,n){var o,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=void 0,j.log("[startApp]: Rendering UW application... hot = "+n);try{o=Object(g.initializeUploader)()}catch(e){j.error("[startApp]: ENCOUNTERED ERROR INITIALIZING UPLOADER !!!",e)}if(o||f.a.logLevel!==m.a.LOG){e.next=5;break}throw new Error("!!!!!!!!! NO UPLOADER !!!!! - CANT CONTINUE");case 5:r=Object(p.default)(),i=self.__cldEnableUWDebug=function(){Object(m.d)(m.a.LOG),self.__cldUWStore=r,self.__cldUploader=o,self.__cldUploaderStore=o.getStore()},j.getLevel()===m.a.LOG&&i(),Object(s.render)(a.a.createElement(u.AppContainer,null,a.a.createElement(l.a,{store:r},a.a.createElement(d.a,{history:b.history},a.a.createElement(h.default,{uploader:o},a.a.createElement(t,{key:"uw-app-root"},b.appRoutes))))),document.getElementById("app-root"));case 9:case"end":return e.stop()}},e,O)}),v=function(){var e=S.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e,t){return v.apply(this,arguments)});T(E.default)},"./store/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/redux/es/redux.js"),r=n("../node_modules/redux-thunk/lib/index.js"),a=n.n(r),s=n("../node_modules/react-router-redux/es/index.js"),i=n("../node_modules/redux-devtools-extension/developmentOnly.js"),c=n("../node_modules/redux-logger/dist/redux-logger.js"),u=n("./utils/envUtils.js"),l=n("./routing/index.js"),d=n("./common/logger.js"),p=(Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e})({},Object(u.d)("REDUCERS",!0),{routing:s.c}),f=Object(o.combineReducers)(p);Object(d.c)().log("[store]: Creating UW store");var m=[a.a,Object(s.b)(l.history)];Object(u.b)()&&m.push(Object(c.createLogger)());var b=Object(o.createStore)(f,Object(i.composeWithDevTools)(o.applyMiddleware.apply(void 0,m)));t.default=function(){return b}},"./tabs/Camera/CameraTab.scss":function(e,t){},"./tabs/Camera/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return r});var o=n("./common/actionsBase.js"),r={SET_USER_ALLOWED_CAMERA:"SET_USER_ALLOWED_CAMERA",SET_CAMERA_NOT_FOUND:"SET_CAMERA_NOT_FOUND",SET_CAMERA_LOADING:"SET_CAMERA_LOADING"};t.default=Object(o.d)(r,{})},"./tabs/Camera/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/moment/moment.js"),i=n.n(s),c=n("../node_modules/reselect/lib/index.js"),u=(n.n(c),n("./uploader/index.js")),l=n("./common/logger.js"),d=n("./common/i18n.js"),p=n("./common/actionsBase.js"),f=n("./utils/camera.js"),m=n("./tabs/hocs/TabPanel.js"),b=n("./root/components/Progress/Progress.js"),E=n("./root/components/SvgIcon/index.js"),g=n("../assets/icons/icons.js"),h=n("./root/components/Button/index.js"),_=n("./root/components/TabFooter/index.js"),O=n("./root/actions/index.js"),S=n("./tabs/Camera/actions/index.js"),v=n("./tabs/Camera/selectors/index.js"),j=n("./tabs/Camera/service/index.js"),T=n("./tabs/Camera/CameraTab.scss");n.n(T);function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var x=Object(l.b)(),C=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return n=r=I(this,e.call.apply(e,[this].concat(s))),r.state={snapped:!1,photo:null},r.onActionButtonClicked=function(){if(r.cameraApi){var e=r.cameraApi;if(r.state.snapped)r.props.addToUploadQueue({files:[u.utils.createCustomUploadInfo({file:r.state.photo,name:Object(d.b)("camera.file_name",{time:i()().format("YYYYMD_HHmmss")}),type:"image/jpeg",camera:!0})]});else{var t=e.snapPhoto();e.snapPreview(),r.setState({snapped:!0,photo:t})}}},r.onCancelButtonClicked=function(){r.setState({snapped:!1})},r.videoElmRef=Object(o.createRef)(),r.canvasElmRef=Object(o.createRef)(),r.cameraApi=null,r.snapEffect=null,r.retryCamera=function(){r.loadCamera()},I(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.loadCamera()},t.prototype.shouldComponentUpdate=function(e,t){return this.snapEffect=t.snapped&&this.state.snapped!==t.snapped,!0},t.prototype.componentWillUnmount=function(){this.cameraApi&&this.cameraApi.stop()},t.prototype.getActionText=function(){return this.state.snapped?void 0:Object(d.b)("camera.capture")},t.prototype.loadCamera=function(){var e=this;this.props.actions[S.types.SET_CAMERA_LOADING]({loading:!0});var t=this.videoElmRef.current,n=this.canvasElmRef.current;t&&n&&Object(j.default)({videoElm:t,canvasElm:n}).then(function(t){e.props.actions[S.types.SET_USER_ALLOWED_CAMERA](),e.cameraApi=t}).catch(function(t){x.log("[CameraTab]: Camera usage refused !",t),e.props.actions[S.types.SET_CAMERA_NOT_FOUND]({status:!0}),t.reason!==f.a.PermissionDeniedError&&e.props.rootActions[O.types.SET_ERROR]({text:Object(d.b)("camera.camera_error")})})},t.prototype.renderNotAllowed=function(){return r.a.createElement("div",{className:"not-allowed-container tc"},r.a.createElement("strong",{className:"title"},Object(d.b)("camera.take_pic")),r.a.createElement(E.default,{path:g.b.CAMERA_INFO,size:72,colorName:"window-border",className:"ma5"}),r.a.createElement("p",null,Object(d.b)("camera.explanation")),r.a.createElement("div",{className:"not-found-container"},r.a.createElement(h.default,{colorName:"link",text:Object(d.b)("camera.retry"),onClick:this.retryCamera})))},t.prototype.renderAllowed=function(){return r.a.createElement("div",{className:"allowed-container "+(this.state.snapped?"snapped":"")},r.a.createElement("video",{id:"camera-video",ref:this.videoElmRef}),r.a.createElement("div",{className:"canvas-holder "+(this.snapEffect?"snap-action":"")},r.a.createElement("canvas",{id:"camera-canvas",ref:this.canvasElmRef})))},t.prototype.render=function(){var e=this.props.tabData.isLoading?r.a.createElement(b.a,{size:42,overlay:!0}):null;return r.a.createElement("div",{className:"bg-source-bg bg-source-bg-c content-wrap camera-block\n            "+(this.props.tabData.isAllowed?"camera-allowed":"")+"\n            "+(this.props.tabData.notFound?"camera-not-found":"")},r.a.createElement("div",{className:"holder large-single-source-holder pb6"},e,r.a.createElement("div",{className:"box centered"},this.renderNotAllowed(),this.renderAllowed())),r.a.createElement(_.default,{actionButtonActive:!0,showActionButton:this.props.tabData.isAllowed,actionButtonText:this.getActionText(),uploadButtonHandler:this.onActionButtonClicked,showSecondaryButton:this.state.snapped,secondaryButtonText:Object(d.b)("camera.cancel"),secondaryButtonHandler:this.onCancelButtonClicked}))},t}(o.Component);t.default=Object(m.a)({id:u.consts.SOURCES.CAMERA,title:Object(d.b)("camera.main_title")})(Object(a.b)(Object(c.createStructuredSelector)({tabData:v.selectTabData}),Object(p.a)({actions:S.default,rootActions:O.default}))(C))},"./tabs/Camera/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("./common/reducerBase.js"),a=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),s=n.n(a),i=n("./tabs/Camera/actions/index.js");t.default={camera:Object(r.a)(s()({__record:"CameraRecord",cameraAllowed:!1,cameraNotFound:!1,cameraLoading:!1}),(o={},o[i.types.SET_USER_ALLOWED_CAMERA]=function(e){return e.merge({cameraLoading:!1,cameraAllowed:!0,cameraNotFound:!1})},o[i.types.SET_CAMERA_LOADING]=function(e,t){var n=t.payload;return e.merge({cameraLoading:n.loading,cameraNotFound:!1,cameraAllowed:!1})},o[i.types.SET_CAMERA_NOT_FOUND]=function(e,t){var n=t.payload;return e.merge({cameraLoading:!1,cameraNotFound:n.status,cameraAllowed:!1})},o))}},"./tabs/Camera/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./uploader/index.js"),r=n("./routing/utils.js"),a=n("./tabs/Camera/index.js");t.default=[{path:Object(r.a)(o.consts.SOURCES.CAMERA),component:a.default}]},"./tabs/Camera/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectTabData",function(){return r});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),Object(o.createSelector)(function(e){return e.camera},function(e){return{isAllowed:e.cameraAllowed,isLoading:e.cameraLoading,notFound:e.cameraNotFound}}))},"./tabs/Camera/service/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./appConfig.js"),r=n("./common/logger.js"),a=n("./utils/domUtils.js"),s=Object(r.b)(),i={video:{width:{ideal:1280,max:1920}},audio:!1},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.videoElm,a=r.videoWidth,i=r.videoHeight,c=n?Math.min(i,o.a.ui.cameraPreviewHeight):i,u=c/i;t.height=c,t.width=a*u,s.log("[cameraService]: rendering scaled canvas for camera preview. width: "+t.width+", height: "+t.height),t.getContext("2d").drawImage(r,0,0,a,i,0,0,t.width,t.height)};t.default=function(e){return Object(a.c)(i).then(function(t){if(s.log("[cameraService]: user approved access to camera device"),self.navigator.mozGetUserMedia&&t)e.videoElm.mozSrcObject=t,e.videoElm.srcObject=t;else try{e.videoElm.srcObject=t}catch(o){var n=window.URL||window.webkitURL;e.videoElm.setAttribute("src",n.createObjectURL(t))}e.videoElm.play();return{snapPreview:function(){return c(e,e.canvasElm,!0)},snapPhoto:function(){var t=Object(a.a)("canvas");return c(e,t),t.toDataURL("image/jpeg")},stop:function(){s.log("[cameraService]: about to stop camera video stream");try{t&&(t.stop?t.stop():t.getTracks().forEach(function(e){return e.stop()}))}catch(e){s.warn("[cameraService]: encountered error when stopping video stream",e)}t=null}}}).catch(function(e){return s.log("[cameraService]: received error when getting user camera media",e),Promise.reject(e)})}},"./tabs/Camera/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{camera:{main_title:"Camera",capture:"Capture",cancel:"Cancel",take_pic:"Take a picture and upload it",explanation:"Make sure that your camera is connected and that your browser allows camera capture. When ready, click Capture.",camera_error:"Failed to access camera",retry:"Retry Camera",file_name:"Camera_{{time}}"}}}}},"./tabs/Dropbox/Dropbox.scss":function(e,t){},"./tabs/Dropbox/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return O});var o,r,a=n("./common/logger.js"),s=n("./common/actionsBase.js"),i=n("./root/actions/index.js"),c=n("./tabs/common/actionMethods.js"),u=n("./tabs/Dropbox/service/index.js"),l=n("./tabs/Dropbox/data/consts.js"),d=n("./tabs/Dropbox/selectors/index.js"),p=this,f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var b,E,g,h,_=Object(a.b)(),O={INIT_AUTH:"DB_INIT_AUTH",SET_AUTH_INFO:"DB_SET_AUTH_INFO",SET_FILE_SELECTION:"DB_SET_FILE_SELECTION",SET_MULTI_FILE_SELECTION:"DB_SET_MUTLI_FILE_SELECTION",GET_CONTEXT_FILES:"DB_GET_CONTEXT_FILES",SET_FILES_RETRIEVE_START:"DB_SET_FILES_RETRIEVE_START",SET_FILES_RETRIEVE_FAILED:"DB_SET_FILES_RETRIEVE_FAILED",SET_FILES_RETRIEVE_SUCCESS:"DB_SET_FILES_RETRIEVE_SUCCESS",SET_ACCOUNT_INFO_REQUESTED:"DB_SET_ACCOUNT_INFO_REQUESTED",SET_ACCOUNT_INFO_FAILED:"DB_SET_ACCOUNT_INFO_FAILED",SET_ACCOUNT_INFO_SUCCESS:"DB_SET_ACCOUNT_INFO_SUCCESS",SET_USER_LOGOUT_SUCCESS:"DB_SET_USER_LOGOUT_SUCCESS",SET_SEARCH_TERM:"DB_SET_SEARCH_TERM",SET_LOADED_THUMBNAILS:"DB_SET_LOADED_THUMBNAILS",SET_THUMBNAILS:"DB_SET_THUMBNAILS",DO_LOGOUT:"DB_DO_LOGOUT",DO_FILE_SEARCH:"DB_DO_FILE_SEARCH",CLEAR_FILES_FOR_CONTEXT:"DB_CLEAR_FILES_FOR_CONTEXT",CLEAR_IMAGE_SELECTION:"DB_CLEAR_IMAGE_SELECTION",CLEAR_ALL_SELECTION:"DB_CLEAR_ALL_SELECTION"},S=((o={})[l.a.CONTEXTS.FOLDER]=function(e,t){return Object(u.default)().getFoldersList(f({token:e},t))},o[l.a.CONTEXTS.SEARCH]=function(e,t){return Object(u.default)().getSearchResults(f({token:e},t))},o[l.a.CONTEXTS.RECENT]=function(e,t){return Object(u.default)().getRecents(f({token:e},t))},o),v=(b=m(regeneratorRuntime.mark(function e(t,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.log("[dropboxTab.actions]: about to retrieve account info"),e.prev=1,n(O.SET_ACCOUNT_INFO_REQUESTED),e.next=5,Object(u.default)().getAccountInfo(t);case 5:o=e.sent,_.log("[dropboxTab.actions]: retrieved account info: ",o),n(O.SET_ACCOUNT_INFO_SUCCESS,{account:o}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),_.error("[dropboxTab.actions]: failed to get account info",e.t0),n(O.SET_ACCOUNT_INFO_FAILED);case 14:case"end":return e.stop()}},e,p,[[1,10]])})),function(e,t){return b.apply(this,arguments)}),j=function(e,t){var n=Object(s.c)(t);n(O.SET_AUTH_INFO,e),e&&e.token&&v(e,n)},T=(E=m(regeneratorRuntime.mark(function e(t,n,o){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.length){e.next=6;break}return e.next=3,Object(u.default)().retrieveItemsThumbs(n);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=[];case 7:(r=e.t0).length&&o(O.SET_THUMBNAILS,{context:t,thumbs:r});case 9:case"end":return e.stop()}},e,p)})),function(e,t,n){return E.apply(this,arguments)});t.default=Object(s.d)(O,((r={})[O.CLEAR_IMAGE_SELECTION]=Object(s.b)(function(e,t){Object(s.c)(t)([[O.CLEAR_IMAGE_SELECTION,{context:e}],[i.types.CLEAR_MAX_SELECT_REACHED]])}),r[O.INIT_AUTH]=Object(s.b)(function(e,t){return j(Object(u.default)().getAuthInfo(e),t)}),r[O.SET_AUTH_INFO]=Object(s.b)(j),r[O.GET_CONTEXT_FILES]=Object(s.b)((h=m(regeneratorRuntime.mark(function e(t,n,o,r){var a,i,c,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(s.c)(o),_.log("[dropboxTab.actions]: about to retrieve files from db for context: "+t),e.prev=2,a(O.SET_FILES_RETRIEVE_START,{context:t}),n&&n.extend?(i=Object(d.selectContextItems)(r()),n=f({},n,{items:i.items,cursor:i.cursor,hasMore:i.hasMore})):a(O.CLEAR_FILES_FOR_CONTEXT,{context:t}),c=Object(d.selectAuthData)(r()),u=c.token,e.next=9,S[t](u,n,a);case 9:l=e.sent,_.log("[dropboxTab.actions]: finished retrieving files for context: "+t,l),a(O.SET_FILES_RETRIEVE_SUCCESS,f({context:t},l)),T(t,l.items,a),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),_.devError("[dropboxTab.actions]: encountered error when trying to retrieve context photos",e.t0),a(O.SET_FILES_RETRIEVE_FAILED,{context:t});case 19:case"end":return e.stop()}},e,p,[[2,15]])})),function(e,t,n,o){return h.apply(this,arguments)})),r[O.SET_FILE_SELECTION]=Object(s.b)(function(e,t,n){var o=e.id,r=e.e,a=e.multiple,s=Object(d.selectCurrentContext)(n()).context;return Object(c.a)({id:o,e:r,types:f({},i.types,O),rootBindActions:i.default,selectIsIdSelected:d.selectIsIdSelected,selectReachedMaxSelection:d.selectReachedMaxSelection,selectMultipleIdsInRange:d.selectMultipleIdsInRange,selectAvailableUntilMax:d.selectAvailableUntilMax,selectionParams:[s],multiple:a},t,n)}),r[O.DO_LOGOUT]=Object(s.b)((g=m(regeneratorRuntime.mark(function e(t,n){var o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(s.c)(t),r=Object(d.selectAuthData)(n()),e.prev=1,_.log("[dropboxTab.actions]: about to log out dropbox user"),e.next=5,Object(u.default)().logout(r);case 5:o(O.SET_USER_LOGOUT_SUCCESS),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),_.error("[dropboxTab.actions]: failed to log out user",e.t0);case 11:case"end":return e.stop()}},e,p,[[1,8]])})),function(e,t){return g.apply(this,arguments)})),r))},"./tabs/Dropbox/components/Breadcrumb/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Breadcrumb",function(){return d});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/glamorous/dist/glamorous.esm.js"),s=n("./root/components/SvgIcon/index.js"),i=n("../assets/icons/icons.js"),c=n("../node_modules/classnames/index.js"),u=n.n(c),l=n("./common/i18n.js"),d=function(e){var t,n=e.path.split("/"),o=function(t,n,o){return o?r.a.createElement("span",null,t):r.a.createElement("div",{className:"pointer",onClick:function(){return t=n,void e.pathClickHandler(t);var t}},t)},c=function(e,t){var c=n.slice(0,t+1).join("/"),d=e||Object(l.b)("dropbox.root_crumb"),p=t+1===n.length,f=a.b.div(u()("items-center","f7 f5-ns","mr2",{b:p,"dn flex-ns":t>=5&&!p,flex:t<5||p}));return r.a.createElement(f,{"data-test":"crumb",key:c},t>0&&r.a.createElement(s.default,{size:"sm",className:"mr2",path:i.b.ARROW_RIGHT,colorName:"window-border"}),o(d,c,p))};return r.a.createElement("div",{"data-test":"breadcrumbs",className:"flex items-center pa6"},((t=n.map(c)).length>5&&t.splice(5,0,r.a.createElement(a.b.Div,{key:"more",className:u()("flex dn-ns items-center","f7 f5-ns","mr2")},r.a.createElement(s.default,{size:"sm",className:"mr2",path:i.b.ARROW_RIGHT,colorName:"window-border"}),"...")),t))};t.default=d},"./tabs/Dropbox/components/ContextItems/ContextItems.scss":function(e,t){},"./tabs/Dropbox/components/ContextItems/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("../node_modules/react/index.js"),a=n.n(r),s=n("../node_modules/react-redux/es/index.js"),i=n("../node_modules/reselect/lib/index.js"),c=(n.n(i),n("./root/components/ResultImageGrid/index.js")),u=n("./tabs/Dropbox/data/consts.js"),l=n("./tabs/Dropbox/actions/index.js"),d=n("./tabs/Dropbox/selectors/index.js"),p=n("./tabs/Dropbox/components/FolderList/index.js"),f=n("./tabs/Dropbox/components/ContextItems/ContextItems.scss");n.n(f);function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=1,E=2,g=((o={})[u.a.CONTEXTS.FOLDER]=b,o[u.a.CONTEXTS.SEARCH]=E,o[u.a.CONTEXTS.RECENT]=E,o),h=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=m(this,e.call.apply(e,[this].concat(a))),o.onSelection=function(e,t){o.props.selectionAction?o.props.selectionAction(e):o.props[l.types.SET_FILE_SELECTION]({id:e,e:t,multiple:o.props.isMultiple})},o.onFolderClick=function(e){o.props[l.types.GET_CONTEXT_FILES](o.props.context,{path:e.path_lower})},o.wayPointAction=function(){o.props[l.types.GET_CONTEXT_FILES](o.props.context,{extend:!0,term:o.props.searchData.searchTerm})},m(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props[l.types.GET_CONTEXT_FILES](this.props.context,{term:this.props.searchData.searchTerm})},t.prototype.renderItemsByDisplayType=function(e){return g[this.props.context]===b?a.a.createElement(p.default,{items:e.items,selected:e.selected,metadata:e.metadata,isMultiple:this.props.isMultiple,selectionAction:this.onSelection,showProgressIndicator:e.inProgress,folderClickAction:this.onFolderClick}):a.a.createElement(c.default,{images:e.items,selected:e.selected,isMultiple:this.props.isMultiple,selectionAction:this.onSelection,showProgressIndicator:e.inProgress,waypointAction:this.wayPointAction})},t.prototype.render=function(){return a.a.createElement("div",{className:"context-items photos-"+this.props.context},this.renderItemsByDisplayType(this.props.data))},t}(r.Component);t.default=Object(s.b)(Object(i.createStructuredSelector)({data:d.selectContextItems,searchData:d.selectSearchTerm}),l.default)(h)},"./tabs/Dropbox/components/FolderList/FileRow/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/moment/moment.js"),s=n.n(a),i=n("../node_modules/classnames/index.js"),c=n.n(i),u=n("./root/components/SvgIcon/index.js"),l=n("./root/components/Checkbox/Checkbox.js"),d=n("../assets/icons/icons.js"),p=n("./tabs/Dropbox/components/FolderList/index.js");t.default=function(e){return r.a.createElement("div",{className:c()("FileRow","flex items-center bb bc-source-bg pointer",{active:e.isSelected}),onClick:e.rowClickHandler},r.a.createElement(p.GCheckboxCol,null,r.a.createElement(l.a,{checked:e.isSelected||!1})),r.a.createElement(p.GFileCol,{className:"flex items-center"},e.item.thumbnail?r.a.createElement("img",{src:e.item.thumbnail,alt:""}):r.a.createElement(u.default,{size:"xl2",colorName:"complete",path:d.b.FILE})),r.a.createElement(p.GNameCol,null,e.item.name),r.a.createElement(p.GModifiedCol,{className:"nowrap"},s()(e.item.client_modified).format("LL")))}},"./tabs/Dropbox/components/FolderList/FolderList.scss":function(e,t){},"./tabs/Dropbox/components/FolderList/FolderRow/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/moment/moment.js"),s=n.n(a),i=n("./root/components/SvgIcon/index.js"),c=n("../assets/icons/icons.js"),u=n("./tabs/Dropbox/components/FolderList/index.js");t.default=function(e){return r.a.createElement("div",{className:"FolderRow flex items-center bb bc-source-bg pointer",onClick:e.rowClickHandler},r.a.createElement(u.GCheckboxCol,null,r.a.createElement("label",null)),r.a.createElement(u.GFileCol,null,r.a.createElement(i.default,{size:"xl2",path:c.b.FOLDER,colorName:"menu-icons"})),r.a.createElement(u.GNameCol,null,e.item.name),r.a.createElement(u.GModifiedCol,{className:"nowrap"},s()(e.item.client_modified).format("LL")))}},"./tabs/Dropbox/components/FolderList/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"GCheckboxCol",function(){return m}),n.d(t,"GFileCol",function(){return b}),n.d(t,"GNameCol",function(){return E}),n.d(t,"GModifiedCol",function(){return g});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/glamorous/dist/glamorous.esm.js"),s=n("./common/i18n.js"),i=n("./root/components/Progress/Progress.js"),c=n("./root/components/NoResults/index.js"),u=n("./tabs/Dropbox/components/Breadcrumb/index.js"),l=n("./tabs/Dropbox/components/FolderList/FileRow/index.js"),d=n("./tabs/Dropbox/components/FolderList/FolderRow/index.js"),p=n("./tabs/Dropbox/components/FolderList/FolderList.scss"),f=(n.n(p),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),m=a.b.div("flex-none pl4 pr4 pt6 pb6",{width:"7%"}),b=a.b.div("flex-none pl4 pr4 pt6 pb6",{width:"12%"}),E=a.b.div("flex-none pl4 pr4 pt6 pb6",{width:"43%"}),g=a.b.div("flex-none pl4 pr4 pt6 pb6",{width:"38%"});t.default=function(e){var t=e.showProgressIndicator?r.a.createElement(i.a,{size:42,overlay:!0}):null,n=function(t,n){var o,a="folder"===t[".tag"],s="tbl_row_"+n,i={item:t,isSelected:(o=t,!!~e.selected.indexOf(o.id)),rowClickHandler:function(t,n,o){return n?e.folderClickAction(t):e.selectionAction(t.id,o)}.bind(null,t,a)};return a?r.a.createElement(d.default,f({},i,{key:s})):r.a.createElement(l.default,f({},i,{key:s}))};return r.a.createElement("div",{className:"folder-list-container flex flex-column h-100"},r.a.createElement(u.default,{path:e.metadata&&e.metadata.path_display||"",pathClickHandler:function(t){return e.folderClickAction({path_lower:t})}}),r.a.createElement("div",{className:"folder-list flex-grow flex flex-column table-block"},t,r.a.createElement("div",{className:"table-head bg-source-bg bg-source-bg-c flex-none"},r.a.createElement(m,null,r.a.createElement("label",null)),r.a.createElement(b,null),r.a.createElement(E,null,Object(s.b)("dropbox.list_headers.name")),r.a.createElement(g,null,Object(s.b)("dropbox.list_headers.modified"))),r.a.createElement("div",{className:"table-body bg-window bg-window-c flex-grow"},e.items&&e.items.length?e.items.map(n):e.showProgressIndicator?null:r.a.createElement(c.default,null)),r.a.createElement("div",{className:"bottom-spacer"})))}},"./tabs/Dropbox/data/consts.js":function(e,t,n){"use strict";t.a={CONTEXTS:{FOLDER:1,RECENT:2,SEARCH:4}}},"./tabs/Dropbox/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/react-router-dom/es/index.js"),i=n("../node_modules/reselect/lib/index.js"),c=n("./uploader/index.js"),u=n("./common/i18n.js"),l=n("./common/logger.js"),d=n("./tabs/hocs/TabPanel.js"),p=n("./root/components/ServiceLoginIntro/index.js"),f=n("./root/components/RouteWithSubRoutes/index.js"),m=n("./root/components/TabHeader/index.js"),b=n("./root/components/TabFooter/index.js"),E=n("../assets/icons/icons.js"),g=n("./tabs/common/utils.js"),h=n("./tabs/Dropbox/components/ContextItems/index.js"),_=n("./tabs/Dropbox/service/index.js"),O=n("./tabs/Dropbox/data/consts.js"),S=n("./routing/utils.js"),v=void 0,j=n("./tabs/Dropbox/actions/index.js"),T=n("./tabs/Dropbox/selectors/index.js");n("./tabs/Dropbox/Dropbox.scss");n.d(t,"listenForAuth",function(){return y}),n.d(t,"DropBoxTab",function(){return A});var I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=Object(l.b)(),y=function(e){var t=void 0;if(!e.tabData.isLoggedIn){var n=e.actions[j.types.SET_AUTH_INFO],o=e.tabData.cloudName;e.actions[j.types.INIT_AUTH](o),t=Object(_.default)().setAuthListener(o).then(function(e){return n({token:e.token})})}return t||Promise.resolve()},A=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=x(this,e.call.apply(e,[this].concat(a))),o.onClearSelectedClick=function(){o.props.actions[j.types.CLEAR_IMAGE_SELECTION](o.props.tabData.currentContext)},o.onNoAuthActionClick=function(){Object(_.default)().openAuthWindow({externalKey:o.props.dropBoxAppKey})},o.onUserLogout=function(){o.props.actions[j.types.DO_LOGOUT]()},o.onUploadButtonClick=function(){return Object(_.default)().getUrlsForUpload({token:o.props.authData.token,files:o.props.contextData.selected}).then(function(e){o.props.addToUploadQueue({files:e})}).catch(function(e){return C.error("[dropboxTab]: encountered error when trying to upload files",e)})},o.onSearchTermChange=function(e){o.props.actions[j.types.SET_SEARCH_TERM]({term:e})},o.onSearchClick=function(){o.props.actions[j.types.GET_CONTEXT_FILES](O.a.CONTEXTS.SEARCH,{term:o.props.tabData.searchTerm})},x(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){y(this.props)},t.prototype.componentDidUpdate=function(e){y(this.props),Object(g.a)(this.props,e,this.props.actions[j.types.CLEAR_ALL_SELECTION])},t.prototype.renderSubRoutes=function(){var e=this;return this.props.routes.map(function(t){return r.a.createElement(f.default,I({key:"db_route_"+t.path},t,{isMultiple:e.props.tabData.isMultiple}))})},t.prototype.renderDefaultRoute=function(){var e=this;return r.a.createElement(s.b,{render:function(){return r.a.createElement(h.default,{context:O.a.CONTEXTS.FOLDER,isMultiple:e.props.tabData.isMultiple})}})},t.prototype.renderTabContent=function(){return this.props.tabData.isLoggedIn?this.renderAuthedContent():r.a.createElement(p.default,{key:"db_login_intro",title:Object(u.b)("dropbox.no_auth_title"),actionTitle:Object(u.b)("dropbox.no_auth_action"),btnClass:"btn-dropbox",dataTest:"dropbox-connect-btn",btnIcon:E.b.DROPBOX,actionHandler:this.onNoAuthActionClick})},t.prototype.renderAuthedContent=function(){return r.a.createElement("div",{className:"tabs-block tab-authed flex flex-column"},r.a.createElement(m.default,{showSearch:!0,source:c.consts.SOURCES.DROPBOX,navItems:(v||(v=[{path:Object(S.a)(c.consts.SOURCES.DROPBOX),title:Object(u.b)("dropbox.menu.browse")},{path:Object(S.a)(c.consts.SOURCES.DROPBOX,"recent"),title:Object(u.b)("dropbox.menu.recent")}]),v),userName:this.props.tabData.userName,searchTerm:this.props.tabData.searchTerm,onLogout:this.onUserLogout,searchTermHandler:this.onSearchTermChange,searchClickHandler:this.onSearchClick}),r.a.createElement(s.c,null,this.renderSubRoutes(),this.renderDefaultRoute()))},t.prototype.renderFooter=function(){var e=this.props.contextData,t=e&&e.selected&&e.selected.length;return r.a.createElement(b.default,{showSelection:!0,selectionCount:t,clearSelectionHandler:this.onClearSelectedClick,uploadButtonHandler:this.onUploadButtonClick})},t.prototype.render=function(){return r.a.createElement("div",{className:"dropbox-block h-100 h-auto-ns "+(this.props.tabData.isLoggedIn?"user-active":"")},r.a.createElement("div",{className:"holder large-single-source-holder"},this.renderTabContent()),this.renderFooter())},t}(o.Component);t.default=Object(d.a)({id:c.consts.SOURCES.DROPBOX,title:Object(u.b)("dropbox.main_title")})(Object(a.b)(Object(i.createStructuredSelector)({tabData:T.selectTabData,contextData:T.selectContextItems,authData:T.selectAuthData,dropBoxAppKey:T.selectExtDropboxKey}),function(e){return{actions:Object(j.default)(e)}})(A))},"./tabs/Dropbox/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),a=n.n(r),s=n("./common/reducerBase.js"),i=n("./tabs/common/reducerMethods.js"),c=n("./tabs/Dropbox/data/consts.js"),u=c.a.CONTEXTS,l=function(){var e;return a()({__record:"DropboxRecord",lists:(e={},e[u.FOLDER]={items:[],metadata:{},cursor:0,hasMore:!1,inProgress:!1,selected:[],lastSelectedIndex:-1},e[u.RECENT]={items:[],metadata:{},cursor:0,hasMore:!1,inProgress:!1,selected:[],lastSelectedIndex:-1},e[u.SEARCH]={items:[],metadata:{},cursor:0,hasMore:!1,inProgress:!1,selected:[],lastSelectedIndex:-1},e),currentContext:u.FOLDER,token:null,account:null,searchTerm:""})},d=n("./tabs/Dropbox/actions/index.js"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=c.a.CONTEXTS;t.default={dropbox:Object(s.a)(l(),(o={},o[d.types.SET_AUTH_INFO]=function(e,t){var n=t.payload;return e.set("token",n.token)},o[d.types.SET_FILES_RETRIEVE_START]=function(e,t){var n=t.payload;return e.set("currentContext",n.context).setIn(["lists",n.context,"inProgress"],!0)},o[d.types.SET_FILES_RETRIEVE_SUCCESS]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],p({},e.lists[n.context],{inProgress:!1,items:n.items,metadata:n.metadata,cursor:n.cursor,hasMore:n.hasMore}))},o[d.types.SET_FILE_SELECTION]=i.b,o[d.types.SET_MULTI_FILE_SELECTION]=i.a,o[d.types.CLEAR_FILES_FOR_CONTEXT]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],p({},{items:[],metadata:{},cursor:0,hasMore:!1,inProgress:!1,selected:[],lastSelectedIndex:-1},{inProgress:e.lists[n.context].inProgress}))},o[d.types.CLEAR_IMAGE_SELECTION]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context,"selected"],[])},o[d.types.SET_ACCOUNT_INFO_SUCCESS]=function(e,t){var n=t.payload;return e.set("account",n.account)},o[d.types.SET_USER_LOGOUT_SUCCESS]=function(e){return e.replace(l())},o[d.types.SET_SEARCH_TERM]=function(e,t){var n=t.payload;return e.set("searchTerm",n.term)},o[d.types.SET_THUMBNAILS]=function(e,t){var n=t.payload;return e.updateIn(["lists",n.context,"items"],function(e){return e=e.asMutable(),n.thumbs.forEach(function(t,n){e[n]&&e[n].thumbnail!==t&&(e[n]=p({},e[n],{thumbnail:t}))}),e})},o[d.types.CLEAR_ALL_SELECTION]=function(e){var t;return e.merge({lists:(t={},t[f.FOLDER]={selected:[]},t[f.RECENT]={selected:[]},t[f.SEARCH]={selected:[]},t)},{deep:!0})},o))}},"./tabs/Dropbox/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./uploader/index.js"),s=n("./routing/utils.js"),i=n("./common/i18n.js"),c=n("./tabs/Dropbox/index.js"),u=n("./tabs/Dropbox/service/index.js"),l=n("./tabs/Dropbox/data/consts.js"),d=n("./tabs/Dropbox/components/ContextItems/index.js"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=a.consts.SOURCES;t.default=[{path:Object(s.a)(f.DROPBOX),component:c.default,routes:[{path:Object(s.a)(f.DROPBOX,"recent"),render:function(e){return r.a.createElement(d.default,p({context:l.a.CONTEXTS.RECENT},e))}},{path:Object(s.a)(f.DROPBOX,"search"),render:function(e){return r.a.createElement(d.default,p({context:l.a.CONTEXTS.SEARCH},e))}}]},{path:Object(s.a)(f.DROPBOX,"auth"),render:function(){return Object(u.default)().postAuthResult(),r.a.createElement("div",{className:"coverall"},r.a.createElement("h3",null,Object(i.b)("dropbox.authenticating")))}}]},"./tabs/Dropbox/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectAuthData",function(){return E}),n.d(t,"selectTabData",function(){return b}),n.d(t,"selectContextItems",function(){return c}),n.d(t,"selectSearchTerm",function(){return g}),n.d(t,"selectIsIdSelected",function(){return l}),n.d(t,"selectReachedMaxSelection",function(){return u}),n.d(t,"selectCurrentContext",function(){return d}),n.d(t,"selectExtDropboxKey",function(){return h}),n.d(t,"selectMultipleIdsInRange",function(){return p}),n.d(t,"selectAvailableUntilMax",function(){return f});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),n("./root/selectors/index.js")),a=n("./tabs/common/selectors.js"),s="dropbox",i=Object(a.d)(s),c=Object(a.f)(s),u=Object(a.j)(s),l=Object(a.h)(s),d=Object(a.g)(s),p=Object(a.i)(s),f=Object(a.e)(s),m=function(e){return{searchTerm:e.dropbox.searchTerm}},b=Object(o.createSelector)(r.getWidgetConfig,function(e){return{isLoggedIn:!!e.dropbox.token,searchTerm:m(e).searchTerm,currentContext:i(e).context,account:e.dropbox.account}},r.selectBatchStartCounter,function(e,t,n){return{cloudName:e.cloudName,isMultiple:e.multiple,isLoggedIn:t.isLoggedIn,currentContext:t.currentContext,searchTerm:t.searchTerm,userName:t.account&&t.account.name&&t.account.name.familiar_name,batchStartCounter:n}}),E=Object(o.createSelector)(r.getWidgetConfig,function(e){return e.dropbox.token},function(e,t){return{token:t,cloudName:e.cloudName}}),g=Object(o.createSelector)(m,function(e){return e}),h=Object(o.createSelector)(r.getWidgetConfig,function(e){return e.dropboxAppKey})},"./tabs/Dropbox/service/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/dropbox/dist/Dropbox-sdk.min.js"),r=n.n(o),a=n("./appConfig.js"),s=n("./utils/domUtils.js"),i=n("./uploader/index.js"),c=n("./common/logger.js"),u=n("./services/index.js"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d=this;function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var f=Object(c.c)(),m=a.a.dropbox.clientId,b=["jpg","jpeg","png","tiff","tif","gif","bmp"],E=null;t.default=function(){f.log("[dropboxService]: creating dropbox api for client id: "+m);var e,t,n,o,c,g,h=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"jpeg";return e.filesGetThumbnail({path:t,format:o,size:n})},_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"w250";return e.map(function(e){e.link=e.url=e.path_lower,e.id=e.path_lower;var o=b.find(function(t){return~e.name.indexOf(t)});return e.retrieveThumb=p(regeneratorRuntime.mark(function r(){var a,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=e.thumbnail,!o){r.next=12;break}return r.prev=2,r.next=5,h(t,e.id,n);case 5:s=r.sent,a=self.URL.createObjectURL(s.fileBlob)||"",r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),f.log("[dropboxService]: failed to retrieve thumbnail for dropbox item: "+e.id);case 12:return e.retrieveThumb=null,r.abrupt("return",a);case 14:case"end":return r.stop()}},r,d,[[2,9]])})),e})},O=function(e,t){return e?Promise.all(e.map(function(e){return t.filesGetMetadata({path:e.metadata.id,include_media_info:!0})})):[]},S=function(e,t){return _(e,t,"w640h480").map(function(e){return l({},e,{title:(t=e,t.media_info&&t.media_info.metadata&&t.media_info.metadata.dimensions?t.media_info.metadata.dimensions.width+" × "+t.media_info.metadata.dimensions.height:""),subtitle:e.name});var t})};return{getAuthInfo:function(e){return{token:u.common.getStoredAuthToken(e,i.consts.SOURCES.DROPBOX)}},openAuthWindow:function(e){var t=new r.a.Dropbox({clientId:e.externalKey||m}),n=u.common.getAuthRedirectUrl("dropbox/auth"),o=t.getAuthenticationUrl(n);f.log("[dropboxService]: created dropbox login link: "+o),E=Object(s.h)(o,"DropboxAuthwin")},postAuthResult:function(){var e=self.location;self.opener.postMessage(""+e.hash,e.protocol+"//"+e.host)},setAuthListener:function(e){return u.common.setMessageAuthListener(function(){return E},e,i.consts.SOURCES.DROPBOX).then(function(e){return E=null,e})},logout:(e=p(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new r.a.Dropbox({accessToken:t.token}),e.prev=1,e.next=4,n.authTokenRevoke();case 4:return e.prev=4,u.common.removeAuthToken(t.cloudName,i.consts.SOURCES.DROPBOX),e.finish(4);case 7:case"end":return e.stop()}},e,d,[[1,,4,7]])})),function(t){return e.apply(this,arguments)}),getAccountInfo:function(e){var t=new r.a.Dropbox({accessToken:e.token});return f.log("[dropboxService]: about to retrieve account info"),t.usersGetCurrentAccount()},getFoldersList:(t=p(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new r.a.Dropbox({accessToken:t.token}),e.abrupt("return",Promise.all([n.filesListFolder({path:t.path||""}),t.path?n.filesGetMetadata({path:t.path}):{}]).then(function(e){return f.log("[dropboxService]: retrieved folder list data ",e),{folders:{},metadata:e[1],items:e[0]&&e[0].entries?_(e[0].entries,n,"w32h32"):{}}}));case 2:case"end":return e.stop()}},e,d)})),function(e){return t.apply(this,arguments)}),getSearchResults:(n=p(regeneratorRuntime.mark(function e(t){var n,o,s,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new r.a.Dropbox({accessToken:t.token}),f.log("[dropboxService]: search called with query term: "+t.term),!t.term||(c=t).cursor&&!0!==c.hasMore){e.next=8;break}return e.next=5,n.filesSearch({path:"",query:t.term,start:t.cursor,max_results:a.a.dropbox.maxResults});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=null;case 9:if(o=e.t0,s=o&&o.start||0,i=!(!o||!o.more),!o){e.next=17;break}return e.next=14,O(o.matches,n);case 14:e.t1=e.sent,e.next=18;break;case 17:e.t1=[];case 18:return o=e.t1,o=S(o,n),e.abrupt("return",{items:t.cursor?t.items.concat(o):o,metadata:null,cursor:s,hasMore:i});case 21:case"end":return e.stop()}var c},e,d)})),function(e){return n.apply(this,arguments)}),getRecents:(o=p(regeneratorRuntime.mark(function e(t){var n,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new r.a.Dropbox({accessToken:t.token}),f.log("[dropboxService]: retrieving recent files"),!t.cursor||!t.hasMore){e.next=8;break}return e.next=5,n.filesListFolderContinue({cursor:t.cursor});case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,n.filesListFolder({path:"",recursive:!0,include_media_info:!0});case 10:e.t0=e.sent;case 11:return o=e.t0,a=o&&o.cursor||0,s=!(!o||!o.has_more),o=o&&o.entries?o.entries.filter(function(e){return e.media_info}):[],o=S(o,n),e.abrupt("return",{items:t.cursor?t.items.concat(o):o,metadata:null,cursor:a,hasMore:s});case 16:case"end":return e.stop()}},e,d)})),function(e){return o.apply(this,arguments)}),getUrlsForUpload:(c=p(regeneratorRuntime.mark(function e(t){var n,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new r.a.Dropbox({accessToken:t.token}),e.next=3,Promise.all([].concat(t.files).map(function(){var e=p(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.filesDownload({path:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}()));case 3:return o=e.sent,a=function(e){var t=e.fileBlob;try{(t=Object(s.e)()?t:new File([e.fileBlob],e.name)).name||(t.name=e.name)}catch(e){f.warn("[dropboxService]: failed to get File from dropbox blob: ",e)}return t},e.abrupt("return",o.map(function(e){return e?a(e):null}).filter(function(e){return e}));case 6:case"end":return e.stop()}},e,d)})),function(e){return c.apply(this,arguments)}),retrieveItemsThumbs:(g=p(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(e){return e.retrieveThumb?e.retrieveThumb():e.thumbnail}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,d)})),function(e){return g.apply(this,arguments)})}}},"./tabs/Dropbox/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{dropbox:{main_title:"Dropbox",no_auth_title:"Upload files from your Dropbox account.",no_auth_action:"Connect to Dropbox",no_photos:"No Photos",no_files:"No Files",root_crumb:"Root",list_headers:{select:"Select",name:"Name",modified:"Modified"},menu:{browse:"Browse",recent:"Recent"},authenticating:"Authenticating..."}}}}},"./tabs/Facebook/FacebookTab.scss":function(e,t){},"./tabs/Facebook/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return v});var o,r,a=n("./common/logger.js"),s=n("./common/actionsBase.js"),i=n("./root/actions/index.js"),c=n("./tabs/common/actionMethods.js"),u=n("./tabs/Facebook/data/consts.js"),l=n("./tabs/Facebook/selectors/index.js"),d=n("./tabs/Facebook/service/index.js"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=this;function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var b,E,g,h,_,O,S=Object(a.b)(),v={DO_LOGIN:"FB_DO_LOGIN",DO_LOGOUT:"FB_DO_LOGOUT",DO_REQUEST_FB_STATUS:"REQUEST_FB_STATUS",GET_CONTEXT_PHOTOS:"GET_CONTEXT_PHOTOS",SET_FILE_SELECTION:"FB_SET_FILE_SELECTION",SET_MULTI_FILE_SELECTION:"FB_SET_MUTLI_FILE_SELECTION",SET_LOGIN_STATUS_REQUESTED:"FB_SET_LOGIN_STATUS_REQUESTED",SET_LOGIN_STATUS_SUCCESS:"FB_SET_LOGIN_STATUS_SUCCEEDED",SET_LOGIN_STATUS_FAILED:"FB_SET_LOGIN_STATUS_FAILED",SET_USER_REQUESTED:"FB_SET_USER_REQUESTED",SET_USER_FAILED:"FB_SET_USER_FAILED",SET_USER_SUCCESS:"FB_SET_USER_SUCCEEDED",SET_USER_LOGIN_SUCCESS:"FB_SET_USER_LOGIN_SUCCEEDED",SET_USER_LOGOUT_SUCCESS:"FB_SET_USER_LOGOUT_SUCCESS",SET_USER_LOGIN_FAILED:"FB_SET_USER_LOGIN_FAILED",SET_USER_LOGIN_REQUESTED:"FB_SET_USER_LOGIN_REQUESTED",SET_PHOTOS_RETRIEVE_START:"FB_SET_PHOTOS_RETRIEVE_START",SET_PHOTOS_RETRIEVE_FAILED:"FB_SET_PHOTOS_RETRIEVE_FAILED",SET_PHOTOS_RETRIEVE_SUCCESS:"FB_SET_PHOTOS_RETRIEVE_SUCCESS",SET_ALBUM_RETRIEVE_SUCCESS:"FB_SET_ALBUM_RETRIEVE_SUCCESS",CLEAR_IMAGE_SELECTION:"FB_CLEAR_IMAGE_SELECTION",CLEAR_ALL_SELECTION:"FB_CLEAR_ALL_SELECTION",CLEAR_PHOTOS_FOR_CONTEXT:"FB_CLEAR_PHOTOS_FOR_CONTEXT"},j=(b=m(regeneratorRuntime.mark(function e(t,n,o){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.log("[facebookTab.actions]: about to retrieve fb user: ",n),e.prev=1,o(v.SET_USER_REQUESTED),e.next=5,t.getUser(n);case 5:r=e.sent,S.log("[facebookTab.actions]: retrieved fb user: ",r),o(v.SET_USER_SUCCESS,{user:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),o(v.SET_USER_FAILED,{error:e.t0});case 13:case"end":return e.stop()}},e,f,[[1,10]])})),function(e,t,n){return b.apply(this,arguments)}),T=((o={})[u.a.CONTEXTS.UPLOADED_PHOTOS]=function(e,t){return Object(d.default)().getUploadedPhotos(p({auth:e},t))},o[u.a.CONTEXTS.TAGGED_PHOTOS]=function(e,t){return Object(d.default)().getTaggedPhotos(p({auth:e},t))},o[u.a.CONTEXTS.ALBUMS]=function(e,t){return Object(d.default)().getAlbums(p({auth:e},t))},o[u.a.CONTEXTS.ALBUM_PHOTOS]=(E=m(regeneratorRuntime.mark(function e(t,n,o){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.default)().getAlbum(p({auth:t},n));case 2:return r=e.sent,o(v.SET_ALBUM_RETRIEVE_SUCCESS,{album:r.album}),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,f)})),function(e,t,n){return E.apply(this,arguments)}),o);t.default=Object(s.d)(v,((r={})[v.CLEAR_IMAGE_SELECTION]=Object(s.b)(function(e,t){Object(s.c)(t)([[v.CLEAR_IMAGE_SELECTION,{context:e}],[i.types.CLEAR_MAX_SELECT_REACHED]])}),r[v.DO_REQUEST_FB_STATUS]=Object(s.b)((O=m(regeneratorRuntime.mark(function e(t,n){var o,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(s.c)(n),r=Object(d.default)(),S.log("[facebookTab.actions]: about to initialize facebook api"),e.next=4,r.init(t);case 4:return e.prev=4,o(v.SET_LOGIN_STATUS_REQUESTED),e.next=8,r.getLoginStatus();case 8:return a=e.sent,S.log("[facebookTab.actions]: retrieved user login status: ",a),o(v.SET_LOGIN_STATUS_SUCCESS,{auth:a}),e.next=13,j(r,a,o);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),n(v.SET_LOGIN_STATUS_FAILED,{error:e.t0});case 18:case"end":return e.stop()}},e,f,[[4,15]])})),function(e,t){return O.apply(this,arguments)})),r[v.DO_LOGIN]=Object(s.b)((_=m(regeneratorRuntime.mark(function e(t){var n,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.c)(t),o=Object(d.default)(),e.prev=1,n(v.SET_USER_LOGIN_REQUESTED),S.log("[facebookTab.actions]: about to do user login"),e.next=6,o.login();case 6:return r=e.sent,n(v.SET_USER_LOGIN_SUCCESS,{auth:r}),S.log("[facebookTab.actions]: successfully logged in fb user"),e.next=11,j(o,r,n);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),S.error("[facebookTab.actions]: encountered error on user login"),n(v.SET_USER_LOGIN_FAILED,{error:e.t0});case 17:case"end":return e.stop()}},e,f,[[1,13]])})),function(e){return _.apply(this,arguments)})),r[v.DO_LOGOUT]=Object(s.b)((h=m(regeneratorRuntime.mark(function e(t){var n,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.c)(t),o=Object(d.default)(),e.prev=1,S.log("[facebookTab.actions]: about to log out user"),e.next=5,o.logout();case 5:r=e.sent,n(v.SET_USER_LOGOUT_SUCCESS,{auth:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),S.error("[facebookTab.actions]: encountered error on user logout");case 12:case"end":return e.stop()}},e,f,[[1,9]])})),function(e){return h.apply(this,arguments)})),r[v.GET_CONTEXT_PHOTOS]=Object(s.b)((g=m(regeneratorRuntime.mark(function e(t,n,o,r){var a,i,c,u,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(s.c)(o),e.prev=1,a(v.SET_PHOTOS_RETRIEVE_START,{context:t}),S.log("[facebookTab.actions]: about to get photos for context: "+t),n&&n.extend?(i=Object(l.selectContextItems)(r()),n=p({},n,{items:i.items,cursor:i.cursor})):a(v.CLEAR_PHOTOS_FOR_CONTEXT,{context:t}),c=Object(l.selectAuthData)(r()),u=c.auth,e.next=9,T[t](u,n,a);case 9:d=e.sent,S.log("[facebookTab.actions]: finished retrieving photos for context: "+t),a(v.SET_PHOTOS_RETRIEVE_SUCCESS,p({context:t},d)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),S.error("[facebookTab.actions]: encountered error when trying to retrieve context photos",e.t0),a(v.SET_PHOTOS_RETRIEVE_FAILED,{context:t});case 18:case"end":return e.stop()}},e,f,[[1,14]])})),function(e,t,n,o){return g.apply(this,arguments)})),r[v.SET_FILE_SELECTION]=Object(s.b)(function(e,t,n){var o=e.id,r=e.e,a=e.multiple,s=Object(l.selectCurrentContext)(n()).context;Object(c.a)({id:o,e:r,types:p({},i.types,v),rootBindActions:i.default,selectIsIdSelected:l.selectIsIdSelected,selectReachedMaxSelection:l.selectReachedMaxSelection,selectMultipleIdsInRange:l.selectMultipleIdsInRange,selectAvailableUntilMax:l.selectAvailableUntilMax,selectionParams:[s],multiple:a},t,n)}),r))},"./tabs/Facebook/components/AlbumBar/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"AlbumBar",function(){return u});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/moment/moment.js"),s=n.n(a),i=n("./root/components/MenuButton/MenuButton.js"),c=n("../assets/icons/icons.js"),u=function(e){return r.a.createElement("div",{className:"flex flex-row items-center w-100 h-100 ml3 mr3","data-test":"album-bar"},r.a.createElement(i.a,{iconSize:22,icon:c.b.BACK,onClick:e.onGoBack,dataTest:"go-back"}),r.a.createElement("div",{className:"ml3 mr3 f3","data-test":"album-title"},e.albumData.name||""),r.a.createElement("div",{className:"f6","data-test":"album-date"},s()(e.albumData.created_time).format("ll")))};t.default=u},"./tabs/Facebook/components/ContextPhotos/ContextPhotos.scss":function(e,t){},"./tabs/Facebook/components/ContextPhotos/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("./root/components/ResultImageGrid/index.js"),i=n("./tabs/Facebook/selectors/index.js"),c=n("./tabs/Facebook/actions/index.js"),u=n("./tabs/Facebook/components/ContextPhotos/ContextPhotos.scss");n.n(u);function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=l(this,e.call.apply(e,[this].concat(a))),o.onSelection=function(e,t){o.props.selectionAction?o.props.selectionAction(e):o.props[c.types.SET_FILE_SELECTION]({id:e,e:t,multiple:o.props.isMultiple})},o.wayPointAction=function(){o.props.inProgress||o.props[c.types.GET_CONTEXT_PHOTOS](o.props.context,{id:o.props.contextId,extend:!0})},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props[c.types.GET_CONTEXT_PHOTOS](this.props.context,{id:this.props.contextId})},t.prototype.renderPhotos=function(){return r.a.createElement(s.default,{images:this.props.items,selected:this.props.selected,isMultiple:this.props.isMultiple,allowSelect:this.props.allowSelect,showProgressIndicator:this.props.inProgress,selectionAction:this.onSelection,waypointAction:this.wayPointAction})},t.prototype.render=function(){return r.a.createElement("div",{className:"context-items photos-"+this.props.context},this.renderPhotos())},t}(o.Component);d.defaultProps={allowSelect:!0},t.default=Object(a.b)(i.selectContextItems,c.default)(d)},"./tabs/Facebook/data/consts.js":function(e,t,n){"use strict";t.a={CONNECTED:"connected",CONTEXTS:{UPLOADED_PHOTOS:1,TAGGED_PHOTOS:2,ALBUM_PHOTOS:4,ALBUMS:8},RESOURCES:{PHOTOS:"photos",ALBUMS:"albums"},RES_TYPES:{UPLOADED:"uploaded",TAGGED:"tagged"}}},"./tabs/Facebook/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/prop-types/index.js"),s=n.n(a),i=n("../node_modules/react-redux/es/index.js"),c=n("../node_modules/react-router-dom/es/index.js"),u=n("../node_modules/reselect/lib/index.js"),l=n("./uploader/index.js"),d=n("./common/i18n.js"),p=n("./root/selectors/index.js"),f=n("./root/components/RouteWithSubRoutes/index.js"),m=n("./root/components/TabHeader/index.js"),b=n("./root/components/Progress/Progress.js"),E=n("./tabs/hocs/TabPanel.js"),g=n("./root/components/TabFooter/index.js"),h=n("./root/components/ServiceLoginIntro/index.js"),_=n("../assets/icons/icons.js"),O=n("./tabs/common/utils.js"),S=n("./tabs/Facebook/data/consts.js"),v=n("./routing/utils.js"),j=void 0,T=n("./tabs/Facebook/selectors/index.js"),I=n("./tabs/Facebook/actions/index.js"),x=n("./tabs/Facebook/components/ContextPhotos/index.js"),C=n("./tabs/Facebook/components/AlbumBar/index.js");n("./tabs/Facebook/FacebookTab.scss");n.d(t,"FacebookTab",function(){return L});var y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var R=function(e){return e&&e.status===S.a.CONNECTED},L=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=A(this,e.call.apply(e,[this].concat(a))),o.onUploadButtonClick=function(){o.props.addToUploadQueue({files:o.props.contextData.selected})},o.onClearSelectedClick=function(){o.props.actions[I.types.CLEAR_IMAGE_SELECTION](o.props.tabData.currentContext)},o.onNoAuthActionClick=function(){o.props.actions[I.types.DO_LOGIN]()},o.onUserLogout=function(){o.props.actions[I.types.DO_LOGOUT]()},o.onAlbumBack=function(){o.context.router.history.goBack()},A(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.actions[I.types.DO_REQUEST_FB_STATUS]({externalAppId:this.props.extAppId})},t.prototype.componentDidUpdate=function(e){Object(O.a)(this.props,e,this.props.actions[I.types.CLEAR_ALL_SELECTION])},t.prototype.renderSubRoutes=function(){var e=this;return this.props.routes.map(function(t){return r.a.createElement(f.default,y({key:"fb_route_"+t.path},t,{isMultiple:e.props.tabData.isMultiple}))})},t.prototype.renderDefaultRoute=function(){var e=this;return r.a.createElement(c.b,{render:function(){return r.a.createElement(x.default,{isMultiple:e.props.tabData.isMultiple,context:S.a.CONTEXTS.UPLOADED_PHOTOS})}})},t.prototype.renderTabContent=function(){return self.FB?R(this.props.tabData.auth)?r.a.createElement("div",{className:"tab-authed flex flex-column"},r.a.createElement(m.default,{source:l.consts.SOURCES.FACEBOOK,userName:this.props.tabData.userName,navItems:(j||(j=[{path:Object(v.a)(l.consts.SOURCES.FACEBOOK),title:Object(d.b)("facebook.menu.uploaded")},{path:Object(v.a)(l.consts.SOURCES.FACEBOOK,"tagged"),title:Object(d.b)("facebook.menu.tagged")},{path:Object(v.a)(l.consts.SOURCES.FACEBOOK,"albums"),title:Object(d.b)("facebook.menu.albums")}]),j),onLogout:this.onUserLogout},this.renderHeaderContent()),r.a.createElement(c.c,null,this.renderSubRoutes(),this.renderDefaultRoute())):r.a.createElement(h.default,{key:"fb_login_intro",title:Object(d.b)("facebook.no_auth_title"),actionTitle:Object(d.b)("facebook.no_auth_action"),statement:Object(d.b)("facebook.no_auth_statement"),btnClass:"btn-fb",dataTest:"connect-to-facebook-btn",btnIcon:_.b.FACEBOOK,actionHandler:this.onNoAuthActionClick}):r.a.createElement(b.a,{size:42,overlay:!0})},t.prototype.renderHeaderContent=function(){var e=this.props.location.pathname.split("/").filter(function(e){return e})[1];return e&&"album"===e?r.a.createElement(C.default,{albumData:this.props.tabData.album||{},onGoBack:this.onAlbumBack}):null},t.prototype.renderFooter=function(){var e=this.props.contextData,t=e&&e.selected&&e.selected.length;return r.a.createElement(g.default,{showSelection:!0,selectionCount:t,clearSelectionHandler:this.onClearSelectedClick,uploadButtonHandler:this.onUploadButtonClick})},t.prototype.render=function(){return r.a.createElement("div",{className:"facebook-block "+(R(this.props.tabData.auth)?"user-active":"")},r.a.createElement("div",{className:"holder large-single-source-holder"},this.renderTabContent()),this.renderFooter())},t}(o.Component);L.contextTypes={router:s.a.object};t.default=Object(E.a)({id:l.consts.SOURCES.FACEBOOK,title:Object(d.b)("facebook.main_title")})(Object(i.b)(Object(u.createStructuredSelector)({tabData:T.selectTabData,contextData:T.selectContextItems,location:p.selectLocation,extAppId:T.selectExtFacebookAppId}),function(e){return{actions:Object(I.default)(e)}})(L))},"./tabs/Facebook/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("./common/reducerBase.js"),a=n("./tabs/common/reducerMethods.js"),s=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),i=n.n(s),c=n("./tabs/Facebook/data/consts.js"),u=c.a.CONTEXTS,l=function(){var e;return i()({__record:"FacebookRecord",lists:(e={},e[u.ALBUM_PHOTOS]={items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},e[u.TAGGED_PHOTOS]={items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},e[u.UPLOADED_PHOTOS]={items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},e[u.ALBUMS]={items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},e),auth:null,authProgressIndicator:!1,albumData:null,user:null,currentContext:u.UPLOADED_PHOTOS})},d=n("./tabs/Facebook/actions/index.js"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=c.a.CONTEXTS;t.default={facebook:Object(r.a)(l(),(o={},o[d.types.SET_LOGIN_STATUS_SUCCESS]=function(e,t){var n=t.payload;return e.merge({auth:n.auth,authProgressIndicator:!1})},o[d.types.SET_USER_SUCCESS]=function(e,t){var n=t.payload;return e.set("user",n.user)},o[d.types.SET_USER_LOGIN_SUCCESS]=function(e,t){var n=t.payload;return e.set("auth",n.auth)},o[d.types.SET_USER_LOGOUT_SUCCESS]=function(e){return e.replace(l())},o[d.types.SET_PHOTOS_RETRIEVE_START]=function(e,t){var n=t.payload;return e.set("currentContext",n.context).setIn(["lists",n.context,"inProgress"],!0)},o[d.types.SET_PHOTOS_RETRIEVE_FAILED]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context,"inProgress"],!1)},o[d.types.SET_PHOTOS_RETRIEVE_SUCCESS]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],p({},e.lists[n.context],{inProgress:!1,items:n.items,cursor:n.cursor}))},o[d.types.SET_FILE_SELECTION]=a.b,o[d.types.SET_MULTI_FILE_SELECTION]=a.a,o[d.types.SET_ALBUM_RETRIEVE_SUCCESS]=function(e,t){var n=t.payload;return e.set("albumData",n.album)},o[d.types.CLEAR_PHOTOS_FOR_CONTEXT]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],p({},{items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},{inProgress:e.lists[n.context].inProgress}))},o[d.types.CLEAR_IMAGE_SELECTION]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context,"selected"],[])},o[d.types.CLEAR_ALL_SELECTION]=function(e){var t;return e.merge({lists:(t={},t[f.ALBUM_PHOTOS]={selected:[]},t[f.TAGGED_PHOTOS]={selected:[]},t[f.UPLOADED_PHOTOS]={selected:[]},t[f.ALBUMS]={selected:[]},t)},{deep:!0})},o))}},"./tabs/Facebook/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./uploader/index.js"),s=n("./routing/utils.js"),i=n("./tabs/Facebook/data/consts.js"),c=n("./tabs/Facebook/index.js"),u=n("./tabs/Facebook/components/ContextPhotos/index.js"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=[{path:Object(s.a)(a.consts.SOURCES.FACEBOOK),component:c.default,routes:[{path:Object(s.a)(a.consts.SOURCES.FACEBOOK,"tagged"),render:function(e){return r.a.createElement(u.default,l({context:i.a.CONTEXTS.TAGGED_PHOTOS},e))}},{path:Object(s.a)(a.consts.SOURCES.FACEBOOK,"albums"),render:function(e){return r.a.createElement(u.default,l({context:i.a.CONTEXTS.ALBUMS,selectionAction:function(t){return e.history.push({pathname:Object(s.a)(a.consts.SOURCES.FACEBOOK,"album",t),search:e.location.search,hash:e.location.hash})},allowSelect:!1},e))}},{path:Object(s.a)(a.consts.SOURCES.FACEBOOK,"album/:id"),render:function(e){return r.a.createElement(u.default,l({context:i.a.CONTEXTS.ALBUM_PHOTOS,contextId:e.match.params.id},e))}}]}]},"./tabs/Facebook/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectTabData",function(){return m}),n.d(t,"selectAuthData",function(){return b}),n.d(t,"selectContextItems",function(){return u}),n.d(t,"selectIsIdSelected",function(){return c}),n.d(t,"selectReachedMaxSelection",function(){return l}),n.d(t,"selectCurrentContext",function(){return d}),n.d(t,"selectMultipleIdsInRange",function(){return p}),n.d(t,"selectAvailableUntilMax",function(){return f}),n.d(t,"selectExtFacebookAppId",function(){return E});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),n("./root/selectors/index.js")),a=n("./tabs/common/selectors.js"),s="facebook",i=Object(a.d)(s),c=Object(a.h)(s),u=Object(a.f)(s),l=Object(a.j)(s),d=Object(a.g)(s),p=Object(a.i)(s),f=Object(a.e)(s),m=Object(o.createSelector)(function(e){return{widgetConfig:e.widgetConfig,fbData:{auth:e.facebook.auth,user:e.facebook.user,currentContext:i(e).context,album:e.facebook.albumData}}},r.selectBatchStartCounter,function(e,t){var n=e.widgetConfig,o=e.fbData;return{isMultiple:n.multiple,auth:o.auth,currentContext:o.currentContext,userName:o.user?o.user.name:"",album:o.album,batchStartCounter:t}}),b=Object(o.createSelector)(function(e){return e.facebook.auth},function(e){return{auth:e}}),E=Object(o.createSelector)(r.getWidgetConfig,function(e){return e.facebookAppId})},"./tabs/Facebook/service/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./appConfig.js"),r=n("./common/logger.js"),a=n("./common/i18n.js"),s=n("./tabs/Facebook/data/consts.js"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c=this;function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var l,d,p,f,m=Object(r.b)(),b=s.a.RESOURCES,E=function(){return new Promise(function(e){self.FB.getLoginStatus(function(t){return e(t)},!1)})},g=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise(function(e,n){var o;(o=self.FB).api.apply(o,t.concat([function(t){return t&&t.error?n(t.error):e(t)}]))})},h=function(e){return g("/"+e.authResponse.userID)},_=function(){return new Promise(function(e){m.log("[facebookService]: about to log in to FB"),self.FB.login(function(t){return e(t)},{scope:"user_photos"})})},O=function(){return new Promise(function(e){m.log("[facebookService]: about to log out from FB"),self.FB.logout(function(t){document.cookie="fblo_"+o.a.facebook.appId+"=n",e(t)})})},S=(l=u(regeneratorRuntime.mark(function e(t,n){var o,r,s,i,u,l,d,p,f,E;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.resource,r=t.type,s=t.fields,i=t.id,u=n.extend?"&after="+(n.cursor||""):"",l=i||n.auth.authResponse.userID,d="/"+l+"/"+o+"?"+(r?"type="+r+"&":"")+"fields=id,name"+s+u,p=void 0,f=null,m.log("[facebookService]: about to retrieve items type: "+o+" from: "+d),!(!n.extend||n.extend&&n.cursor)){e.next=13;break}return e.next=6,g(d);case 6:E=e.sent,p=o===b.ALBUMS?E.data.map(function(e){return{id:e.id,thumbnail:e.picture.data.url,url:e.picture.data.url,title:e.name,subtitle:Object(a.b)("facebook.album_subtitle",{count:e.count}),selected:e.selected}}):E.data.map(function(e){var t=e.images[0],n=e.images.slice(-1)[0],o=t.width,r=t.height;return{id:t.source,thumbnail:n.source,url:t.source,link:t.source,title:o&&r?o+" × "+r:"",subtitle:e.name,selected:e.selected}}),m.log("[facebookService]: retrieved "+p.length+" for resource: "+o),n.extend&&(p=n.items?n.items.concat(p):p),f=E.paging?E.paging.cursors.after:null,e.next=14;break;case 13:n.extend&&(p=n.items||[]);case 14:return e.abrupt("return",{items:p,cursor:f});case 15:case"end":return e.stop()}},e,c)})),function(e,t){return l.apply(this,arguments)}),v=(d=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S({resource:b.PHOTOS,type:s.a.RES_TYPES.UPLOADED,fields:",images"},t));case 1:case"end":return e.stop()}},e,c)})),function(e){return d.apply(this,arguments)}),j=(p=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S({resource:b.PHOTOS,type:s.a.RES_TYPES.TAGGED,fields:",images"},t));case 1:case"end":return e.stop()}},e,c)})),function(e){return p.apply(this,arguments)}),T=(f=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S({resource:s.a.RESOURCES.ALBUMS,fields:",picture,count"},t));case 1:case"end":return e.stop()}},e,c)})),function(e){return f.apply(this,arguments)}),I=function(e){return Promise.all([function(e){if(!e.id)throw new Error("[facebookService]: album id is required to retrieve album data!");var t=e.id||"";return m.log("[facebookService]: about to retrieve album data for id: "+t),g("/"+t+"/?fields=id,name,created_time")}(e),(t=e,S({resource:s.a.RESOURCES.PHOTOS,fields:",images",id:t.id},t))]).then(function(e){return i({album:e[0]},e[1])});var t};t.default=function(){m.log("[facebookService]: creating facebook api");var e=void 0;return{init:function(t){return e||(e=new Promise(function(e){self.fbAsyncInit=function(){self.FB.init({appId:t.externalAppId||o.a.facebook.appId,xfbml:!1,version:o.a.facebook.version}),e()},self.FB||function(e,t,n){if(!e.getElementById("facebook-jssdk")){var r=void 0,a=e.getElementsByTagName("script")[0];(r=e.createElement("script")).id="facebook-jssdk",r.src=o.a.facebook.sdk,a.parentNode&&a.parentNode.insertBefore(r,a)}}(document)})),e},getLoginStatus:E,makeRequest:g,getUser:h,login:_,logout:O,getUploadedPhotos:v,getTaggedPhotos:j,getAlbums:T,getAlbum:I}}},"./tabs/Facebook/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{facebook:{main_title:"Facebook",no_photos:"No photos...",no_auth_title:"Upload files from your Facebook account.",no_auth_action:"Connect to Facebook",no_auth_statement:"We will not post anything without your permission.",album_subtitle:"{{count}} photos",menu:{uploaded:"Your Photos",tagged:"Photos of You",albums:"Albums"}}}}}},"./tabs/GoogleDrive/GoogleDrive.scss":function(e,t){},"./tabs/GoogleDrive/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return h});var o,r,a=n("./common/logger.js"),s=n("./tabs/common/actionMethods.js"),i=n("./common/actionsBase.js"),c=n("./root/actions/index.js"),u=n("./tabs/GoogleDrive/data/consts.js"),l=n("./tabs/GoogleDrive/selectors/index.js"),d=n("./tabs/GoogleDrive/service/index.js"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=this;function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var b,E,g=Object(a.b)(),h={INIT_AUTH:"GP_INIT_AUTH",DO_LOGIN:"GP_DO_LOGIN",DO_LOGOUT:"GP_DO_LOGOUT",SET_AUTH_START:"GP_SET_AUTH_START",SET_AUTH_INFO:"GP_SET_AUTH_INFO",SET_FILE_SELECTION:"GP_SET_FILE_SELECTION",SET_MULTI_FILE_SELECTION:"GP_SET_MUTLI_FILE_SELECTION",SET_FILES_RETRIEVE_START:"GP_SET_FILES_RETRIEVE_START",SET_FILES_RETRIEVE_FAILED:"GP_SET_FILES_RETRIEVE_FAILED",SET_FILES_RETRIEVE_SUCCESS:"GP_SET_FILES_RETRIEVE_SUCCESS",SET_SEARCH_TERM:"GP_SET_SEARCH_TERM",SET_USER_LOGOUT_SUCCESS:"GP_SET_USER_LOGOUT_SUCCESS",GET_CONTEXT_FILES:"GP_GET_CONTEXT_FILES",CLEAR_FILES_FOR_CONTEXT:"GP_CLEAR_FILES_FOR_CONTEXT",CLEAR_IMAGE_SELECTION:"GP_CLEAR_IMAGE_SELECTION"},_=((o={})[u.a.CONTEXTS.PHOTOS]=function(e){return Object(d.default)().getFiles(e)},o[u.a.CONTEXTS.SEARCH]=function(e){return Object(d.default)().searchFiles(e)},o),O=(b=m(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(i.c)(t))(h.SET_AUTH_START),e.next=4,Object(d.default)().authenticate();case 4:o=e.sent,n(h.SET_AUTH_INFO,{authInfo:o});case 6:case"end":return e.stop()}},e,f)})),function(e){return b.apply(this,arguments)});t.default=Object(i.d)(h,((r={})[h.CLEAR_IMAGE_SELECTION]=Object(i.b)(function(e,t){Object(i.c)(t)([[h.CLEAR_IMAGE_SELECTION,{context:e}],[c.types.CLEAR_MAX_SELECT_REACHED]])}),r[h.INIT_AUTH]=Object(i.b)(O),r[h.GET_CONTEXT_FILES]=Object(i.b)((E=m(regeneratorRuntime.mark(function e(t,n,o,r){var a,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(i.c)(o),g.log("[gdriveTab.actions]: about to retrieve files from drive for context: "+t),e.prev=2,a(h.SET_FILES_RETRIEVE_START,{context:t}),n&&n.extend?(s=Object(l.selectContextItems)(r()),n=p({},n,{items:s.items,cursor:s.cursor})):a(h.CLEAR_FILES_FOR_CONTEXT,{context:t}),e.next=7,_[t](n);case 7:c=e.sent,g.log("[gdriveTab.actions]: finished retrieving files for context: "+t,c),a(h.SET_FILES_RETRIEVE_SUCCESS,p({context:t},c)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),g.error("[gdriveTab.actions]: encountered error when trying to retrieve context photos",e.t0),a(h.SET_FILES_RETRIEVE_FAILED,{context:t});case 16:case"end":return e.stop()}},e,f,[[2,12]])})),function(e,t,n,o){return E.apply(this,arguments)})),r[h.SET_FILE_SELECTION]=Object(i.b)(function(e,t,n){var o=e.id,r=e.e,a=e.multiple,i=Object(l.selectCurrentContext)(n()).context;Object(s.a)({id:o,e:r,types:p({},c.types,h),rootBindActions:c.default,selectIsIdSelected:l.selectIsIdSelected,selectReachedMaxSelection:l.selectReachedMaxSelection,selectMultipleIdsInRange:l.selectMultipleIdsInRange,selectAvailableUntilMax:l.selectAvailableUntilMax,selectionParams:[i],multiple:a},t,n)}),r[h.DO_LOGOUT]=Object(i.b)(function(e){var t=Object(i.c)(e);try{g.log("[gdriveTab.actions]: about to log out drive user"),Object(d.default)().logout(),t(h.SET_USER_LOGOUT_SUCCESS)}catch(e){g.error("[gdriveTab.actions]: failed to log out drive user",e)}}),r[h.DO_LOGIN]=Object(i.b)(function(e){try{g.log("[gdriveTab.actions]: about to log in google user"),Object(d.default)().login(),O(e)}catch(e){g.error("[gdriveTab.actions]: failed to log in user",e)}}),r))},"./tabs/GoogleDrive/components/ContextItems/ContextItems.scss":function(e,t){},"./tabs/GoogleDrive/components/ContextItems/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/reselect/lib/index.js"),i=(n.n(s),n("./root/components/ResultImageGrid/index.js")),c=n("./tabs/GoogleDrive/selectors/index.js"),u=n("./tabs/GoogleDrive/actions/index.js"),l=n("./tabs/GoogleDrive/components/ContextItems/ContextItems.scss");n.n(l);function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=d(this,e.call.apply(e,[this].concat(a))),o.onSelection=function(e,t){o.props.selectionAction?o.props.selectionAction(e):o.props[u.types.SET_FILE_SELECTION]({id:e,e:t})},o.wayPointAction=function(){o.props[u.types.GET_CONTEXT_FILES](o.props.context,{extend:!0,term:o.props.searchData.searchTerm})},d(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props[u.types.GET_CONTEXT_FILES](this.props.context,{term:this.props.searchData.searchTerm})},t.prototype.renderItems=function(){var e=this.props.data;return r.a.createElement(i.default,{images:e.items,selected:e.selected,isMultiple:this.props.isMultiple,showProgressIndicator:e.inProgress,selectionAction:this.onSelection,waypointAction:this.wayPointAction})},t.prototype.render=function(){return r.a.createElement("div",{className:"context-items photos-"+this.props.context},this.renderItems())},t}(o.Component);t.default=Object(a.b)(Object(s.createStructuredSelector)({data:c.selectContextItems,searchData:c.selectSearchTerm}),u.default)(p)},"./tabs/GoogleDrive/data/consts.js":function(e,t,n){"use strict";t.a={CONTEXTS:{PHOTOS:1,SEARCH:2}}},"./tabs/GoogleDrive/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/reselect/lib/index.js"),i=(n.n(s),n("../node_modules/react-router-dom/es/index.js")),c=n("./uploader/index.js"),u=n("./common/i18n.js"),l=n("./common/logger.js"),d=n("./tabs/hocs/TabPanel.js"),p=n("./root/components/ServiceLoginIntro/index.js"),f=n("./root/components/RouteWithSubRoutes/index.js"),m=n("./root/components/TabFooter/index.js"),b=n("./root/components/TabHeader/index.js"),E=n("./tabs/GoogleDrive/data/consts.js"),g=n("./tabs/GoogleDrive/service/index.js"),h=n("./tabs/GoogleDrive/selectors/index.js"),_=n("./tabs/GoogleDrive/actions/index.js"),O=n("./tabs/GoogleDrive/components/ContextItems/index.js"),S=n("./tabs/GoogleDrive/GoogleDrive.scss"),v=(n.n(S),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e});function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var T=Object(l.b)(),I=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=j(this,e.call.apply(e,[this].concat(a))),o.onClearSelectedClick=function(){o.props.actions[_.types.CLEAR_IMAGE_SELECTION](o.props.tabData.currentContext)},o.onUploadButtonClick=function(){var e=o.props.contextData.selected,t=o.props.contextData.items,n=e.map(function(e){var n=t.find(function(t){return t.id===e});return n?n.subtitle:""});Object(g.default)().generateFiles(e,n).then(function(e){return o.props.addToUploadQueue({files:e})}).catch(function(e){return T.error("[gdriveTab]: encountered error when trying to upload files")})},o.onNoAuthActionClick=function(){o.props.actions[_.types.DO_LOGIN]()},o.onUserLogout=function(){o.props.actions[_.types.DO_LOGOUT]()},o.onSearchTermChange=function(e){o.props.actions[_.types.SET_SEARCH_TERM]({term:e})},o.onSearchClick=function(){o.props.actions[_.types.GET_CONTEXT_FILES](E.a.CONTEXTS.SEARCH,{term:o.props.tabData.searchTerm})},j(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.tabData.isLoggedIn||this.props.actions[_.types.INIT_AUTH]()},t.prototype.renderSubRoutes=function(){var e=this;return this.props.routes.map(function(t,n){return r.a.createElement(f.default,v({key:"db_route_"+t.path},t,{isMultiple:e.props.tabData.isMultiple}))})},t.prototype.renderDefaultRoute=function(){var e=this;return r.a.createElement(i.b,{render:function(){return r.a.createElement(O.default,{context:E.a.CONTEXTS.PHOTOS,isMultiple:e.props.tabData.isMultiple})}})},t.prototype.renderTabContent=function(){return this.props.tabData.isLoggedIn?r.a.createElement("div",{className:"tab-authed"},r.a.createElement(b.default,{source:c.consts.SOURCES.GOOGLE_DRIVE,userName:this.props.tabData.user?this.props.tabData.user.name:"",searchTerm:this.props.tabData.searchTerm,title:t.getHeaderTitle,showSearch:!0,onLogout:this.onUserLogout,searchTermHandler:this.onSearchTermChange,searchClickHandler:this.onSearchClick}),r.a.createElement(i.c,null,this.renderSubRoutes(),this.renderDefaultRoute())):r.a.createElement(p.default,{key:"gp_login_intro",title:Object(u.b)("google_drive.no_auth_title"),actionTitle:Object(u.b)("google_drive.no_auth_action"),btnClass:"btn-drive",actionHandler:this.onNoAuthActionClick})},t.prototype.renderFooter=function(){var e=this.props.contextData,t=e&&e.selected&&e.selected.length;return r.a.createElement(m.default,{showSelection:!0,selectionCount:t,clearSelectionHandler:this.onClearSelectedClick,uploadButtonHandler:this.onUploadButtonClick})},t.prototype.render=function(){return r.a.createElement("div",{className:"content-wrap bg-source-bg bg-source-bg-c google-drive-block "+(this.props.tabData.isLoggedIn?"user-active":"")},r.a.createElement("div",{className:"holder"},this.renderTabContent()),this.renderFooter())},t}(o.Component);I.getHeaderTitle=function(){return r.a.createElement("div",{className:"subhead-title"},Object(u.b)("google_drive.header_title"))},t.default=Object(d.a)({id:c.consts.SOURCES.GOOGLE_DRIVE,title:Object(u.b)("google_drive.main_title")})(Object(a.b)(Object(s.createStructuredSelector)({tabData:h.selectTabData,contextData:h.selectContextItems}),function(e){return{actions:Object(_.default)(e)}})(I))},"./tabs/GoogleDrive/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("./common/reducerBase.js"),a=n("./tabs/common/reducerMethods.js"),s=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),i=n.n(s),c=n("./tabs/GoogleDrive/data/consts.js").a.CONTEXTS,u=function(){var e;return i()({__record:"GoogleDriveRecord",lists:(e={},e[c.SEARCH]={items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},e[c.PHOTOS]={items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},e),currentContext:c.PHOTOS,isSignedIn:!1,user:null,searchTerm:"",authInProgress:!1})},l=n("./tabs/GoogleDrive/actions/index.js"),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default={gdrive:Object(r.a)(u(),(o={},o[l.types.SET_AUTH_INFO]=function(e,t){var n=t.payload;return e.merge(d({},n.authInfo,{authInProgress:!1}))},o[l.types.SET_AUTH_START]=function(e){return e.set("authInProgress",!0)},o[l.types.SET_FILES_RETRIEVE_START]=function(e,t){var n=t.payload;return e.set("currentContext",n.context).setIn(["lists",n.context,"inProgress"],!0)},o[l.types.SET_FILES_RETRIEVE_SUCCESS]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],d({},e.lists[n.context],{inProgress:!1,items:n.items,cursor:n.cursor}))},o[l.types.SET_FILE_SELECTION]=a.b,o[l.types.SET_MULTI_FILE_SELECTION]=a.a,o[l.types.CLEAR_FILES_FOR_CONTEXT]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],d({},{items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},{inProgress:e.lists[n.context].inProgress}))},o[l.types.SET_USER_LOGOUT_SUCCESS]=function(e,t){t.payload;return e.replace(u())},o[l.types.SET_SEARCH_TERM]=function(e,t){var n=t.payload;return e.set("searchTerm",n.term)},o[l.types.CLEAR_IMAGE_SELECTION]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context,"selected"],[])},o))}},"./tabs/GoogleDrive/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectTabData",function(){return b}),n.d(t,"selectContextItems",function(){return c}),n.d(t,"selectIsIdSelected",function(){return l}),n.d(t,"selectReachedMaxSelection",function(){return u}),n.d(t,"selectCurrentContext",function(){return d}),n.d(t,"selectSearchTerm",function(){return E}),n.d(t,"selectMultipleIdsInRange",function(){return p}),n.d(t,"selectAvailableUntilMax",function(){return f});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),n("./tabs/common/selectors.js")),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s="gdrive",i=Object(r.d)(s),c=Object(r.f)(s),u=Object(r.j)(s),l=Object(r.h)(s),d=Object(r.g)(s),p=Object(r.i)(s),f=Object(r.e)(s),m=function(e){return{searchTerm:e.gdrive.searchTerm}},b=Object(o.createSelector)(function(e){return{widgetConfig:e.widgetConfig,gpData:{isLoggedIn:e.gdrive.isSignedIn,searchTerm:m(e).searchTerm,currentContext:i(e).context,user:e.gdrive.user}}},function(e){var t=e.widgetConfig,n=e.gpData;return a({isMultiple:t.multiple},n)}),E=Object(o.createSelector)(m,function(e){return e})},"./tabs/GoogleDrive/service/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./appConfig.js"),r=n("./common/logger.js"),a=n("./utils/binaryToFile.js"),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=this;function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var u,l=Object(r.c)(),d=o.a.google.drive,p=d.clientId,f=d.jsApi,m=d.scopes.join(" "),b=null,E=function(){var e;return b||(b=new Promise((e=c(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return new Promise(function(e){var t,n,r;t=document,n=void 0,r=t.getElementsByTagName("script")[0],t.getElementById("google-api")||((n=t.createElement("script")).id="google-api",n.src=o.a.google.drive.jsApi,r&&r.parentNode&&r.parentNode.insertBefore(n,r)),window.googleDriveCheckAuth=function(){l.log("[gdriveService]: finished loading google api script"),e(!0)}})},r=function(){return new Promise(function(e){window.gapi.load("client:auth2",function(t){l.log("[gdriveService]: finished loading google auth2 api"),e(t)})})},l.log("[gdriveService]: about to load google api script from: "+f),e.next=5,n();case 5:return l.log("[gdriveService]: api script loaded, about to load google auth2 api"),e.next=8,r();case 8:t(!0);case 9:case"end":return e.stop()}},e,i)})),function(t){return e.apply(this,arguments)}))),b},g=function(e){return{isSignedIn:!0,user:{name:e.currentUser.get().getBasicProfile().getName()}}},h=function(e){return new Promise(function(t){self.gapi.client.drive.files.list(s({pageSize:d.pageSize,fields:"files(createdTime,description,id,imageMediaMetadata(height,width),modifiedTime,name,originalFilename,parents,properties,thumbnailLink,webContentLink),nextPageToken",orderBy:"modifiedTime desc",spaces:"photos"},e)).execute(function(e){return t(e)})})},_=(u=c(regeneratorRuntime.mark(function e(t,n){var o,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.split("id=")[1],e.next=3,self.gapi.client.drive.files.get({fileId:o,alt:"media"});case 3:return r=e.sent,s=r.body,e.next=7,Object(a.a)(s,{name:n||r.headers.date,type:r.headers["Content-Type"],lastModified:new Date(r.headers.date).getTime()});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,i)})),function(e,t){return u.apply(this,arguments)});t.default=function(){var e,t,n,o=(e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:return e.next=4,self.gapi.client.load("drive","v3");case 4:return e.next=6,new Promise(function(e){var t=self.gapi.auth2.init({client_id:p,scope:m});t.isSignedIn.get()?e(g(t)):(t.isSignedIn.listen(function(n){e(n?g(t):{isSignedIn:!1,user:null})}),t.signIn().then(function(e){l.log("[gdriveService]: sign in callback was successful: ",e)},function(e){l.log("[gdriveService]: sign in failed",e)}))});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,i)})),function(){return e.apply(this,arguments)}),r=(t=c(regeneratorRuntime.mark(function e(t){var n,o,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.log("[gdriveService]: about to list files from drive"),s=r,(a=t).extend&&!a.cursor||s&&!a.term){e.next=7;break}return e.next=4,h({pageToken:t.cursor,q:r&&t.term?"name contains '"+t.term+"'":void 0});case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0={};case 8:return n=e.t0,o=n.nextPageToken||null,n=n.files?n.files.map(function(e){var t,n=e.webContentLink?e.webContentLink.replace("&export=download",""):"";return{slug:e.id,id:n,thumbnail:e.thumbnailLink,link:n,url:n,title:(t=e,t.imageMediaMetadata?t.imageMediaMetadata.width+" × "+t.imageMediaMetadata.height:"Video"),subtitle:e.name,selected:e.selected}}):[],n=t.extend&&t.items?t.items.concat(n):n,l.log("[gdriveService]: retrieved files from drive: ",n),e.abrupt("return",{items:n,cursor:o});case 14:case"end":return e.stop()}var a,s},e,i)})),function(e){return t.apply(this,arguments)}),a=(n=c(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(e,t){return _(e,n[t])}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),function(e,t){return n.apply(this,arguments)});return{authenticate:o,login:function(){var e=self.gapi.auth2.getAuthInstance();e&&(l.log("[gdriveService]: about to log in user"),e.signIn().catch(function(e){l.error("[gdriveService]: ERROR when trying to log in user! ",e)}))},logout:function(){l.log("[gdriveService]: about to logout user"),self.gapi.auth2.getAuthInstance().disconnect()},getFiles:r,searchFiles:function(e){return r(e,!0)},generateFiles:a}}},"./tabs/GoogleDrive/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{google_drive:{main_title:"Google Photos",no_auth_title:"Upload files from your Google Photos.",no_auth_action:"Connect to Google Photos",no_photos:"No Photos",header_title:"Your Google Photos"}}}}},"./tabs/ImageSearch/ImageSearchTab.scss":function(e,t){},"./tabs/ImageSearch/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return m});var o,r=n("./common/i18n.js"),a=n("./common/actionsBase.js"),s=n("./root/actions/index.js"),i=n("./tabs/common/actionMethods.js"),c=n("./tabs/ImageSearch/service/index.js"),u=n("./tabs/ImageSearch/selectors/index.js"),l=this,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var p,f,m={DO_IMAGE_SEARCH:"IS_DO_IMAGE_SEARCH",SET_SEARCH_TERM:"IS_SET_SEARCH_TERM",SET_IMAGE_SEARCH_START:"IS_SET_IMAGE_SEARCH_START",SET_IMAGE_SEARCH_SUCCESS:"IS_SET_IMAGE_SEARCH_SUCCESS",SET_IMAGE_SEARCH_FAIL:"IS_SET_IMAGE_SEARCH_FAIL",SET_FILE_SELECTION:"IS_SET_FILE_SELECTION",SET_MULTI_FILE_SELECTION:"IS_SET_MULTI_FILE_SELECTION",CLEAR_IMAGE_SELECTION:"IS_CLEAR_IMAGE_SELECTION",SET_SEARCH_RIGHT:"SET_SEARCH_RIGHT",SET_SEARCH_SITE:"SET_SEARCH_SITE",CLEAR_SEARCH_ERROR:"CLEAR_SEARCH_ERROR",RESET_SEARCH:"RESET_SEARCH",SET_OPTIONS_VISIBILITY:"SET_OPTIONS_VISIBILITY"};t.default=Object(a.d)(m,((o={})[m.CLEAR_IMAGE_SELECTION]=Object(a.b)(function(e){Object(a.c)(e)([[m.CLEAR_IMAGE_SELECTION],[s.types.CLEAR_MAX_SELECT_REACHED]])}),o[m.SET_FILE_SELECTION]=Object(a.b)(function(e,t,n){var o=e.id,r=e.e,a=e.multiple;return Object(i.a)({id:o,e:r,types:d({},s.types,m),rootBindActions:s.default,selectIsIdSelected:u.selectIsIdSelected,selectReachedMaxSelection:u.selectReachedMaxSelection,selectMultipleIdsInRange:u.selectMultipleIdsInRange,selectAvailableUntilMax:u.selectAvailableUntilMax,multiple:a},t,n)}),o[m.DO_IMAGE_SEARCH]=Object(a.b)((p=regeneratorRuntime.mark(function e(t,n,o){var s,i,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(a.c)(n),i=t.query||Object(u.selectSearchTerm)(o()).searchTerm,s(m.SET_IMAGE_SEARCH_START),d=Object(c.default)({apiKey:t.apiKey}),e.next=5,d.doSearch({query:i,start:t.start,searchSite:t.searchSite,searchRight:t.searchRight,images:t.images});case 5:(p=e.sent).error?(s(m.SET_IMAGE_SEARCH_FAIL,{error:p.error}),t.reportError({text:Object(r.b)("image_search.search_error")})):s(m.SET_IMAGE_SEARCH_SUCCESS,{images:p.images,queries:p.queries});case 7:case"end":return e.stop()}},e,l)}),f=function(){var e=p.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e,t,n){return f.apply(this,arguments)})),o))},"./tabs/ImageSearch/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/classnames/index.js"),i=n.n(s),c=n("../node_modules/lodash/findIndex.js"),u=n.n(c),l=n("./appConfig.js"),d=n("./uploader/index.js"),p=n("./common/i18n.js"),f=n("./root/components/LinkButton/LinkButton.js"),m=n("../assets/icons/icons.js"),b=n("./tabs/hocs/TabPanel.js"),E=n("./root/actions/index.js"),g=n("./root/components/TabFooter/index.js"),h=n("./root/components/DropdownList/DropdownList.js"),_=n("./root/components/ResultImageGrid/index.js"),O=n("./root/components/SearchBox/index.js"),S=n("./tabs/ImageSearch/selectors/index.js"),v=n("./tabs/ImageSearch/actions/index.js"),j=void 0,T=function(){return j||(j=[{text:Object(p.b)("image_search.rights_options.not_filtered"),value:""},{text:Object(p.b)("image_search.rights_options.free"),value:"cc_publicdomain|cc_attribute|cc_sharealike|cc_noncommercial|cc_nonderived"},{text:Object(p.b)("image_search.rights_options.free_com"),value:"cc_publicdomain|cc_attribute|cc_sharealike|cc_nonderived"},{text:Object(p.b)("image_search.rights_options.free_mod"),value:"cc_publicdomain|cc_attribute|cc_sharealike|cc_noncommercial"},{text:Object(p.b)("image_search.rights_options.free_mod_com"),value:"cc_publicdomain|cc_attribute|cc_sharealike"}]),j};n("./tabs/ImageSearch/ImageSearchTab.scss");function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.d(t,"getSearchSite",function(){return x}),n.d(t,"getSiteFilters",function(){return C}),n.d(t,"showFilters",function(){return y}),n.d(t,"showRights",function(){return A}),n.d(t,"ImageSearchTab",function(){return R});var x=function(e){var t=e.searchSite||e.sites&&e.sites.length?~e.searchSiteIndex&&e.sites[e.searchSiteIndex]||e.sites[0]:"";return"all"!==t?t:""},C=function(e){return e.sites||[]},y=function(e){return e.sites&&e.sites.length>1},A=function(e){return e.showRights},R=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return n=o=I(this,e.call.apply(e,[this].concat(s))),o.onSearchHandler=function(){o.clearSelection(),o.props.actions[v.types.DO_IMAGE_SEARCH]({apiKey:o.props.tabData.apiKey,images:o.props.tabData.images,searchRight:o.props.tabData.searchRight,searchSite:x(o.props.tabData),reportError:o.props.rootActions[E.types.SET_ERROR]})},o.onSearchTermChangeHandler=function(e){return o.props.actions[v.types.SET_SEARCH_TERM]({value:e})},o.onSelectionAction=function(e,t){return o.props.actions[v.types.SET_FILE_SELECTION]({id:e,e:t,multiple:o.props.tabData.isMultiple})},o.onClearSelectedClick=function(){return o.clearSelection()},o.onUploadButtonClick=function(){o.props.addToUploadQueue({files:o.props.tabData.selected})},o.onSiteFilterSelected=function(e,t){o.props.actions[v.types.SET_SEARCH_SITE]({site:e,index:t})},o.getSearchPlaceholder=function(){var e=Object(p.b)("image_search.inputPlaceholder"),t=~o.props.tabData.searchSiteIndex?o.props.tabData.searchSiteIndex:0,n=o.props.tabData.sites;return n&&"all"!==n[t]&&(e=Object(p.b)("image_search.customPlaceholder",{site:n[t]})),e},o.toggleOptions=function(){o.props.actions[v.types.SET_OPTIONS_VISIBILITY]({show:!o.props.tabData.showOptions})},o.resetSearch=function(){return o.props.actions[v.types.RESET_SEARCH]()},o.waypointAction=function(){if(!o.props.tabData.showProgress){var e=o.props.tabData.queries.nextPage&&o.props.tabData.queries.nextPage[0];e&&e.startIndex<l.a.google.resultsMaxLimit&&o.props.actions[v.types.DO_IMAGE_SEARCH]({apiKey:o.props.tabData.apiKey,images:o.props.tabData.images,query:e.searchTerms,start:e.startIndex,searchSite:e.siteSearch,searchRight:e.rights,reportError:o.props.rootActions[E.types.SET_ERROR]})}},o.clearSelection=function(){return o.props.actions[v.types.CLEAR_IMAGE_SELECTION]()},o.renderRightsSelection=function(){var e=T(),t=e.map(function(e){return e.text}),n=e[o.props.tabData.searchRightIndex]||!1;return r.a.createElement(h.a,{items:t,selectedItem:n.text,renderPlaceholder:function(){return Object(p.b)("image_search.rights")},onChange:function(t){var n=u()(e,["text",t]);o.props.actions[v.types.SET_SEARCH_RIGHT]({index:n,right:e[n].value})}})},o.renderSitesSelection=function(){var e=C(o.props.tabData),t=e[o.props.tabData.searchSiteIndex]||e[0];return r.a.createElement(h.a,{items:e,selectedItem:t,renderInputValue:function(e){return Object(p.b)("image_search.filters_title")+": "+e},onChange:function(t){var n=e.indexOf(t);o.props.actions[v.types.SET_SEARCH_SITE]({site:t,index:n})}})},o.renderFooter=function(){var e=o.props.tabData.selected.length;return r.a.createElement(g.default,{showSelection:!0,selectionCount:e,clearSelectionHandler:o.onClearSelectedClick,uploadButtonHandler:o.onUploadButtonClick})},o.renderImageGrid=function(){return!o.props.tabData.firstSearch&&r.a.createElement(_.default,{images:o.props.tabData.images,isMultiple:o.props.tabData.isMultiple,selected:o.props.tabData.selected,selectionAction:o.onSelectionAction,waypointAction:o.waypointAction,showProgressIndicator:o.props.tabData.showProgress})},o.renderOptionsPanel=function(){var e=o.props.tabData,t=A(e)||y(e),n=o.props.tabData.showOptions;return t?r.a.createElement("div",{style:{maxWidth:628,minWidth:230,zIndex:3,margin:"0 auto 10px auto"},className:"w-100 tr options-panel"},r.a.createElement("div",{className:"flex items-center justify-between mb5"},r.a.createElement("div",{className:"f2 fw4"},Object(p.b)("image_search.main_title")),r.a.createElement("div",{className:"c-link fw7 f6 inline-flex items-center pointer",onClick:o.toggleOptions,"data-test":"options-panel"},r.a.createElement(f.a,{text:n?Object(p.b)("image_search.hide_options"):Object(p.b)("image_search.show_options"),icon:n?m.b.KEYBOARD_UP:m.b.KEYBOARD_DOWN,iconSize:10,fontSize:12}))),r.a.createElement("div",{className:i()("relative items-center justify-end",{"flex options-panel-open":n,dn:!n})},y(e)?r.a.createElement("div",{className:"w-50","data-test":"search-by-sites-dropdown"},o.renderSitesSelection()):null,A(e)?r.a.createElement("div",{className:"pl3 w-50","data-test":"usage-rights-dropdown"},o.renderRightsSelection()):null)):r.a.createElement("strong",{className:"title"},Object(p.b)("image_search.main_title"))},I(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.resetSearch()},t.prototype.componentDidUpdate=function(e){this.props.tabData.selected&&this.props.tabData.selected.length&&this.props.tabData.batchStartCounter>e.tabData.batchStartCounter&&(this.clearSelection(),this.resetSearch())},t.prototype.render=function(){return r.a.createElement("div",{className:"content-wrap bg-source-bg bg-source-bg-c google-img-block"},r.a.createElement("div",{className:"holder large-single-source-holder"},r.a.createElement("div",{className:"box "+(this.props.tabData.firstSearch&&!this.props.tabData.images.length?"centered":"")},this.renderOptionsPanel(),r.a.createElement(O.default,{mode:O.SEARCH_BOX_MODES.EXPANDED,inputPlaceholder:this.getSearchPlaceholder(),term:this.props.tabData.searchTerm,searchHandler:this.onSearchHandler,termChangeHandler:this.onSearchTermChangeHandler}),this.renderImageGrid())),this.renderFooter())},t}(o.Component);t.default=Object(b.a)({id:d.consts.SOURCES.IMAGE_SEARCH,title:Object(p.b)("image_search.main_title")})(Object(a.b)(function(e){return{tabData:Object(S.selectImageSearchConfig)(e)}},function(e){return{actions:Object(v.default)(e),rootActions:Object(E.default)(e)}})(R))},"./tabs/ImageSearch/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("./common/reducerBase.js"),a=n("./tabs/common/reducerMethods.js"),s=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),i=n.n(s),c=function(){return i()({__record:"ImageSearchRecord",searchTerm:"",searchDone:!1,firstSearch:!0,progressIndicator:!1,filtersDisplay:!0,searchRight:"",searchRightIndex:-1,searchSite:"",searchSiteIndex:0,showOptions:!1,images:[],selected:[],lastSelectedIndex:-1,queries:null,searchError:null})},u=n("./tabs/ImageSearch/actions/index.js"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default={imageSearch:Object(r.a)(c(),(o={},o[u.types.SET_SEARCH_TERM]=function(e,t){var n=t.payload;return e.set("searchTerm",n.value)},o[u.types.CLEAR_IMAGE_SELECTION]=function(e){return e.replace(l({},e,{selected:[]}))},o[u.types.SET_FILE_SELECTION]=a.d,o[u.types.SET_MULTI_FILE_SELECTION]=a.c,o[u.types.SET_IMAGE_SEARCH_START]=function(e){return e.merge({searchDone:!1,progressIndicator:!0,queries:null})},o[u.types.SET_IMAGE_SEARCH_SUCCESS]=function(e,t){var n=t.payload;return e.merge({firstSearch:!1,searchDone:!0,progressIndicator:!1,images:n.images,queries:n.queries})},o[u.types.SET_IMAGE_SEARCH_FAIL]=function(e,t){var n=t.payload;return e.merge({searchDone:!0,progressIndicator:!1,searchError:n.error})},o[u.types.CLEAR_SEARCH_ERROR]=function(e){return e.set("searchError",null)},o[u.types.SET_SEARCH_RIGHT]=function(e,t){var n=t.payload;return e.merge({searchRight:n.right,searchRightIndex:n.index})},o[u.types.SET_SEARCH_SITE]=function(e,t){var n=t.payload;return e.merge({searchSite:n.site,searchSiteIndex:n.index})},o[u.types.RESET_SEARCH]=function(e){return c().merge({searchRight:e.searchRight,searchRightIndex:e.searchRightIndex,searchSite:e.searchSite,searchSiteIndex:e.searchSiteIndex,showOptions:e.showOptions})},o[u.types.SET_OPTIONS_VISIBILITY]=function(e,t){var n=t.payload;return e.set("showOptions",n.show)},o))}},"./tabs/ImageSearch/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./uploader/index.js"),r=n("./routing/utils.js"),a=n("./tabs/ImageSearch/index.js");t.default=[{path:Object(r.a)(o.consts.SOURCES.IMAGE_SEARCH),component:a.default}]},"./tabs/ImageSearch/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectImageSearchConfig",function(){return l}),n.d(t,"selectSearchTerm",function(){return d}),n.d(t,"selectIsIdSelected",function(){return p}),n.d(t,"selectReachedMaxSelection",function(){return f}),n.d(t,"selectMultipleIdsInRange",function(){return m}),n.d(t,"selectAvailableUntilMax",function(){return b});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),n("./tabs/common/selectors.js")),a=n("./root/selectors/index.js"),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(e){return e.imageSearch.selected},c=function(e){return e.imageSearch.images},u=function(e){return{selected:i(e),maxAllowed:e.widgetConfig.maxFiles,successfulCount:e.widgetData.successfulCount}},l=Object(o.createSelector)(function(e){return{widgetConfig:e.widgetConfig,imageSearch:{searchTerm:e.imageSearch.searchTerm,images:c(e),selected:i(e),queries:e.imageSearch.queries||{},searchRight:e.imageSearch.searchRight,searchRightIndex:e.imageSearch.searchRightIndex,showOptions:e.imageSearch.showOptions,searchSiteIndex:e.imageSearch.searchSiteIndex,searchSite:e.imageSearch.searchSite,firstSearch:e.imageSearch.firstSearch,searchDone:e.imageSearch.searchDone,showProgress:e.imageSearch.progressIndicator,searchError:e.imageSearch.searchError}}},a.selectBatchStartCounter,function(e,t){var n=e.widgetConfig,o=e.imageSearch;return s({apiKey:n.googleApiKey,isMultiple:n.multiple,showRights:n.searchByRights,sites:n.searchBySites,batchStartCounter:t},o)}),d=Object(o.createSelector)(function(e){return e.imageSearch.searchTerm},function(e){return{searchTerm:e}}),p=Object(o.createSelector)(i,function(e){return function(t){return e.indexOf(t)>-1}}),f=Object(o.createSelector)(u,function(e){return Object(r.c)(e,e.maxAllowed,e.successfulCount)}),m=Object(o.createSelector)(function(e){return{selected:i(e),items:c(e)}},function(e){return function(t){return Object(r.b)(e,t)}}),b=Object(o.createSelector)(u,function(e){return Object(r.a)(e,e.maxAllowed,e.successfulCount)})},"./tabs/ImageSearch/service/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/voca/index.js"),r=(n.n(o),n("./appConfig.js")),a=n("./common/logger.js"),s=n("./services/index.js"),i=this;var c=Object(a.c)();t.default=function(e){var t,n,a=e.apiKey;return c.log("[googleService]: creating google api client with api key = "+a.substr(-4)),{doSearch:(t=regeneratorRuntime.mark(function e(t){var n,u,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={images:[]},Object(o.isBlank)(t.query)){e.next=16;break}return u=""+r.a.google.searchBase+r.a.google.searchPath,m=a,l={q:(b=t).query,cx:r.a.google.cx,key:m,num:r.a.google.searchItemsLimit,searchType:b.type||"image",start:b.start||1,rights:b.searchRight,siteSearch:"all"!==b.searchSite?b.searchSite:"",siteSearchFilter:"i"},e.prev=3,e.next=6,s.api.get(u,l);case 6:d=e.sent,n.images=(p=t,void 0,f=(i=d).items?i.items.map(function(e){return{key:e.link,id:e.link,thumbnail:e.link,url:e.link,link:e.link,title:e.image.width+" × "+e.image.height,subtitle:e.title,selected:e.selected}}):[],i.queries&&1!==i.queries.request[0].startIndex&&p.images?p.images.concat(f):f||[]),n.info=d.searchInformation,n.queries=d.queries,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),c.warn("[googleService.search]: encountered error when doing search for: "+t.query,e.t0),n.error=e.t0;case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}var i,p,f,m,b},e,i,[[3,12]])}),n=function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e){return n.apply(this,arguments)})}}},"./tabs/ImageSearch/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{image_search:{main_title:"Image Search",inputPlaceholder:"Search for images",customPlaceholder:"Search {{site}}",show_options:"Show Options",hide_options:"Hide Options",filters_title:"Site",all:"all",rights:"Usage rights:",rights_options:{not_filtered:"not filtered by licence",free:"free to use or share",free_com:"free to use or share, even commercially",free_mod:"free to use share or modify",free_mod_com:"free to use, share or modify, even commercially"},search_error:"Search failed, please try again."}}}}},"./tabs/Instagram/InstagramTab.scss":function(e,t){},"./tabs/Instagram/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return g});var o,r=n("./common/logger.js"),a=n("./common/actionsBase.js"),s=n("./root/actions/index.js"),i=n("./tabs/common/actionMethods.js"),c=n("./root/selectors/index.js"),u=n("./tabs/Instagram/service/index.js"),l=n("./tabs/Instagram/selectors/index.js"),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p=this;function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var m,b,E=Object(r.b)(),g={INIT_AUTH:"INSTA_INIT_AUTH",SET_AUTH_INFO:"INSTA_SET_AUTH_INFO",SET_FILE_SELECTION:"INSTA_SET_FILE_SELECTION",SET_MULTI_FILE_SELECTION:"INSTA_SET_MUTLI_FILE_SELECTION",GET_CONTEXT_PHOTOS:"INSTA_GET_CONTEXT_PHOTOS",SET_PHOTOS_RETRIEVE_START:"INSTA_SET_PHOTOS_RETRIEVE_START",SET_PHOTOS_RETRIEVE_FAILED:"INSTA_SET_PHOTOS_RETRIEVE_FAILED",SET_PHOTOS_RETRIEVE_SUCCESS:"INSTA_SET_PHOTOS_RETRIEVE_SUCCESS",SET_ACCOUNT_INFO_REQUESTED:"INSTA_SET_ACCOUNT_INFO_REQUESTED",SET_ACCOUNT_INFO_FAILED:"INSTA_SET_ACCOUNT_INFO_FAILED",SET_ACCOUNT_INFO_SUCCESS:"INSTA_SET_ACCOUNT_INFO_SUCCESS",SET_USER_LOGOUT_SUCCESS:"INSTA_SET_USER_LOGOUT_SUCCESS",DO_LOGOUT:"INSTA_DO_LOGOUT",CLEAR_PHOTOS_FOR_CONTEXT:"INSTA_CLEAR_PHOTOS_FOR_CONTEXT",CLEAR_IMAGE_SELECTION:"INSTA_CLEAR_IMAGE_SELECTION"},h=(m=f(regeneratorRuntime.mark(function e(t,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.log("[instagramTab.actions]: about to retrieve account info"),e.prev=1,n(g.SET_ACCOUNT_INFO_REQUESTED),e.next=5,Object(u.default)().getAccountInfo(t);case 5:o=e.sent,E.log("[instagramTab.actions]: retrieved account info: ",o),n(g.SET_ACCOUNT_INFO_SUCCESS,{account:o}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),E.error("[instagramTab.actions]: failed to get account info",e.t0),Object(u.default)().logout(t.cloudName),n(g.SET_ACCOUNT_INFO_FAILED);case 15:case"end":return e.stop()}},e,p,[[1,10]])})),function(e,t){return m.apply(this,arguments)}),_=function(e,t){var n=Object(a.c)(t),o=void 0;return n(g.SET_AUTH_INFO,e),e&&e.token&&(o=h(e,n)),o||Promise.resolve()};t.default=Object(a.d)(g,((o={})[g.CLEAR_IMAGE_SELECTION]=Object(a.b)(function(e,t){Object(a.c)(t)([[g.CLEAR_IMAGE_SELECTION,{context:e}],[s.types.CLEAR_MAX_SELECT_REACHED]])}),o[g.INIT_AUTH]=Object(a.b)(function(e,t,n,o){return o(g.INIT_AUTH),_(Object(u.default)().getAuthInfo(e),t)}),o[g.SET_AUTH_INFO]=Object(a.b)(_),o[g.GET_CONTEXT_PHOTOS]=Object(a.b)((b=f(regeneratorRuntime.mark(function e(t){var n,o,r,s,i,f,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},b=arguments[2],h=arguments[3];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(a.c)(b),o=h(),!Object(l.selectAuthData)(o).isAuth){e.next=19;break}return n(g.SET_PHOTOS_RETRIEVE_START,{context:t}),r=Object(c.selectCloudName)(o),m.cloudName=r,s=null,m.extend?(i=Object(l.selectContextItems)(o),f=m.extend&&i.nextUrl||null,m=d({},m,{url:f,items:i.items})):n(g.CLEAR_PHOTOS_FOR_CONTEXT,{context:t}),e.prev=7,e.next=10,Object(u.default)().getRecents(m);case 10:s=e.sent,e.next=18;break;case 13:e.prev=13,e.t0=e.catch(7),E.error("[instagramTab.actions]: encountered error when trying to retrieve context photos",e.t0),n(g.SET_PHOTOS_RETRIEVE_FAILED,{context:t}),~e.t0.message.indexOf("access_token provided is invalid")&&(Object(u.default)().logout(r),n(g.SET_USER_LOGOUT_SUCCESS));case 18:s&&(E.log("[instagramTab.actions]: finished retrieving photos for context: "+t),n(g.SET_PHOTOS_RETRIEVE_SUCCESS,d({context:t},s)));case 19:case"end":return e.stop()}},e,p,[[7,13]])})),function(e){return b.apply(this,arguments)})),o[g.SET_FILE_SELECTION]=Object(a.b)(function(e,t,n){var o=e.id,r=e.e,a=e.multiple,c=Object(l.selectCurrentContext)(n()).context;Object(i.a)({id:o,e:r,types:d({},s.types,g),rootBindActions:s.default,selectIsIdSelected:l.selectIsIdSelected,selectReachedMaxSelection:l.selectReachedMaxSelection,selectMultipleIdsInRange:l.selectMultipleIdsInRange,selectAvailableUntilMax:l.selectAvailableUntilMax,selectionParams:[c],multiple:a},t,n)}),o[g.DO_LOGOUT]=Object(a.b)(function(e,t){var n=Object(a.c)(e),o=Object(l.selectAuthData)(t());E.log("[instagramTab.actions]: about to log out instagram user"),Object(u.default)().logout(o.cloudName),n(g.SET_USER_LOGOUT_SUCCESS)}),o))},"./tabs/Instagram/components/ContextItems/ContextItems.scss":function(e,t){},"./tabs/Instagram/components/ContextItems/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/reselect/lib/index.js"),i=(n.n(s),n("./root/components/ResultImageGrid/index.js")),c=n("./tabs/Instagram/selectors/index.js"),u=n("./tabs/Instagram/actions/index.js"),l=n("./tabs/Instagram/components/ContextItems/ContextItems.scss");n.n(l);function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=d(this,e.call.apply(e,[this].concat(a))),o.onSelection=function(e,t){o.props.selectionAction?o.props.selectionAction(e):o.props[u.types.SET_FILE_SELECTION]({id:e,e:t,multiple:o.props.isMultiple})},o.wayPointAction=function(){o.props[u.types.GET_CONTEXT_PHOTOS](o.props.context,{extend:!0})},d(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props[u.types.GET_CONTEXT_PHOTOS](this.props.context,{extend:!1})},t.prototype.renderItems=function(){var e=this.props.data;return r.a.createElement(i.default,{images:e.items,selected:e.selected,isMultiple:this.props.isMultiple,selectionAction:this.onSelection,showProgressIndicator:e.inProgress,waypointAction:this.wayPointAction})},t.prototype.render=function(){return r.a.createElement("div",{className:"context-items photos-"+this.props.context},this.renderItems())},t}(o.Component);t.default=Object(a.b)(Object(s.createStructuredSelector)({data:c.selectContextItems}),u.default)(p)},"./tabs/Instagram/data/consts.js":function(e,t,n){"use strict";t.a={IMAGE_TYPES:{IMAGE:"image",CAROUSEL:"carousel"},CONTEXTS:{RECENT:1}}},"./tabs/Instagram/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"listenForAuth",function(){return S}),n.d(t,"InstagramTab",function(){return v});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/reselect/lib/index.js"),i=(n.n(s),n("./uploader/index.js")),c=n("./common/i18n.js"),u=n("./root/components/TabHeader/index.js"),l=n("./tabs/hocs/TabPanel.js"),d=n("./root/components/TabFooter/index.js"),p=n("./root/components/ServiceLoginIntro/index.js"),f=n("../assets/icons/icons.js"),m=n("./tabs/common/utils.js"),b=n("./tabs/Instagram/actions/index.js"),E=n("./tabs/Instagram/selectors/index.js"),g=n("./tabs/Instagram/service/index.js"),h=n("./tabs/Instagram/components/ContextItems/index.js"),_=n("./tabs/Instagram/InstagramTab.scss");n.n(_);function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var S=function(e){var t=void 0;if(!(e.tabData.isLoggedIn||e.tabData.listeningForAuth||e.route&&~e.route.location.pathname.indexOf("auth"))){var n=e.actions[b.types.SET_AUTH_INFO],o=e.tabData.cloudName;e.actions[b.types.INIT_AUTH](o),t=Object(g.default)().setAuthListener(o).then(function(e){return n({cloudName:o,token:e.token})})}return t||Promise.resolve()},v=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=O(this,e.call.apply(e,[this].concat(a))),o.onClearSelectedClick=function(){o.clearSelection()},o.onUploadButtonClick=function(){o.props.addToUploadQueue({files:o.props.contextData.selected})},o.onNoAuthActionClick=function(){Object(g.default)().openAuthWindow({externalClientId:o.props.extClientId})},o.onUserLogout=function(){o.props.actions[b.types.DO_LOGOUT]()},O(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){S(this.props)},t.prototype.componentDidUpdate=function(e){var t=this;this.props.tabData.isLoggedIn!==e.tabData.isLoggedIn&&S(this.props),Object(m.a)(this.props,e,function(){return t.clearSelection()})},t.prototype.clearSelection=function(){this.props.actions[b.types.CLEAR_IMAGE_SELECTION](this.props.tabData.currentContext)},t.prototype.renderTabContent=function(){return this.props.tabData.isLoggedIn?r.a.createElement("div",{className:"tab-authed flex flex-column"},r.a.createElement(u.default,{source:i.consts.SOURCES.INSTAGRAM,userName:this.props.tabData.userName,onLogout:this.onUserLogout,title:t.getHeaderTitle}),r.a.createElement(h.default,{isMultiple:this.props.tabData.isMultiple,context:this.props.tabData.currentContext})):r.a.createElement(p.default,{key:"insta_login_intro",title:Object(c.b)("instagram.no_auth_title"),actionTitle:Object(c.b)("instagram.no_auth_action"),dataTest:"connect-to-instagram-btn",btnClass:"btn-insta",btnIcon:f.b.INSTAGRAM,actionHandler:this.onNoAuthActionClick})},t.prototype.renderFooter=function(){var e=this.props.contextData,t=e&&e.selected&&e.selected.length;return r.a.createElement(d.default,{showSelection:!0,selectionCount:t,clearSelectionHandler:this.onClearSelectedClick,uploadButtonHandler:this.onUploadButtonClick})},t.prototype.render=function(){return r.a.createElement("div",{className:"content-wrap bg-source-bg bg-source-bg-c instagram-block "+(this.props.tabData.isLoggedIn?"user-active":"")},r.a.createElement("div",{className:"holder large-single-source-holder"},this.renderTabContent()),this.renderFooter())},t}(o.Component);v.getHeaderTitle=function(){return r.a.createElement("div",{className:"f4 f3-ns"},Object(c.b)("instagram.header_title"))},t.default=Object(l.a)({id:i.consts.SOURCES.INSTAGRAM,title:Object(c.b)("instagram.main_title")})(Object(a.b)(Object(s.createStructuredSelector)({tabData:E.selectTabData,contextData:E.selectContextItems,extClientId:E.selectExtInstagramClientId}),function(e){return{actions:Object(b.default)(e)}})(v))},"./tabs/Instagram/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("./common/reducerBase.js"),a=n("./tabs/common/reducerMethods.js"),s=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),i=n.n(s),c=n("./tabs/Instagram/data/consts.js").a.CONTEXTS,u=function(){var e;return i()({__record:"InstagramRecord",token:null,isAuth:!1,listeningForAuth:!1,lists:(e={},e[c.RECENT]={items:[],nextUrl:null,hasMore:!1,inProgress:!1,selected:[],lastSelectedIndex:-1},e),currentContext:c.RECENT,currentAccount:{}})},l=n("./tabs/Instagram/actions/index.js"),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default={instagram:Object(r.a)(u(),(o={},o[l.types.SET_AUTH_INFO]=function(e,t){var n=t.payload;return e.merge({listeningForAuth:!1,token:n.token})},o[l.types.INIT_AUTH]=function(e){return e.set("listeningForAuth",!0)},o[l.types.SET_PHOTOS_RETRIEVE_START]=function(e,t){var n=t.payload;return e.set("currentContext",n.context).setIn(["lists",n.context,"inProgress"],!0)},o[l.types.SET_PHOTOS_RETRIEVE_SUCCESS]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],d({},e.lists[n.context],{inProgress:!1,items:n.items,nextUrl:n.nextUrl}))},o[l.types.SET_FILE_SELECTION]=a.b,o[l.types.SET_MULTI_FILE_SELECTION]=a.a,o[l.types.CLEAR_PHOTOS_FOR_CONTEXT]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],d({},{items:[],nextUrl:null,hasMore:!1,inProgress:!1,selected:[],lastSelectedIndex:-1},{inProgress:e.lists[n.context].inProgress}))},o[l.types.CLEAR_IMAGE_SELECTION]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context,"selected"],[])},o[l.types.SET_ACCOUNT_INFO_SUCCESS]=function(e,t){var n=t.payload;return e.set("account",n.account)},o[l.types.SET_USER_LOGOUT_SUCCESS]=function(e){return e.replace(u())},o[l.types.SET_ACCOUNT_INFO_FAILED]=function(e){return e.merge({listeningForAuth:!1,token:null})},o))}},"./tabs/Instagram/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./uploader/index.js"),s=n("./routing/utils.js"),i=n("./common/i18n.js"),c=n("./tabs/Instagram/service/index.js"),u=n("./tabs/Instagram/index.js");t.default=[{path:Object(s.a)(a.consts.SOURCES.INSTAGRAM),component:u.default},{path:Object(s.a)(a.consts.SOURCES.INSTAGRAM,"auth"),render:function(){return Object(c.default)().postAuthResult(),r.a.createElement("div",{className:"coverall"},r.a.createElement("h3",null,Object(i.b)("instagram.authenticating")))}}]},"./tabs/Instagram/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectAuthData",function(){return m}),n.d(t,"selectTabData",function(){return b}),n.d(t,"selectContextItems",function(){return c}),n.d(t,"selectIsIdSelected",function(){return l}),n.d(t,"selectReachedMaxSelection",function(){return u}),n.d(t,"selectCurrentContext",function(){return d}),n.d(t,"selectMultipleIdsInRange",function(){return p}),n.d(t,"selectAvailableUntilMax",function(){return f}),n.d(t,"selectExtInstagramClientId",function(){return E});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),n("./root/selectors/index.js")),a=n("./tabs/common/selectors.js"),s="instagram",i=Object(a.d)(s),c=Object(a.f)(s),u=Object(a.j)(s),l=Object(a.h)(s),d=Object(a.g)(s),p=Object(a.i)(s),f=Object(a.e)(s),m=Object(o.createSelector)(r.getWidgetConfig,function(e){return!!e.instagram.token},function(e,t){return{isAuth:t,cloudName:e.cloudName}}),b=Object(o.createSelector)(r.getWidgetConfig,function(e){return{isLoggedIn:!!e.instagram.token,currentContext:i(e).context,account:e.instagram.account,listeningForAuth:e.instagram.listeningForAuth}},r.selectBatchStartCounter,function(e,t,n){return{cloudName:e.cloudName,isMultiple:e.multiple,isLoggedIn:t.isLoggedIn,currentContext:t.currentContext,userName:t.account&&t.account.name,listeningForAuth:t.listeningForAuth,batchStartCounter:n}}),E=Object(o.createSelector)(r.getWidgetConfig,function(e){return e.instagramClientId})},"./tabs/Instagram/service/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./appConfig.js"),r=n("./uploader/index.js"),a=n("./common/logger.js"),s=n("./utils/domUtils.js"),i=n("./services/index.js"),c=n("./tabs/Instagram/data/consts.js"),u=this;function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var d,p,f=Object(a.c)(),m=o.a.instagram.clientId,b=o.a.instagram.authUrl,E=o.a.instagram.maxResults,g=r.consts.SOURCES,h=null,_=function(e){return{cloudName:e,token:i.common.getStoredAuthToken(e,g.INSTAGRAM)}},O=function(e){var t=e.externalClientId||m,n=i.common.getAuthRedirectUrl("instagram/auth"),o=b+"?client_id="+t+"&redirect_uri="+n+"&response_type=token";f.log("[instagramService]: created instagram login link: "+o),h=Object(s.h)(o,"InstagramAuthWin")},S=function(){var e=self.location;self.opener.postMessage(""+e.hash,e.protocol+"//"+e.host)},v=function(e){return i.common.setMessageAuthListener(function(){return h},e,g.INSTAGRAM).then(function(e){return h=null,e})},j=function(e){i.common.removeAuthToken(e,g.INSTAGRAM)},T=function(e){if(200!==e.meta.code)throw new Error(e.meta.code+": "+e.meta.error_message)},I=(d=l(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token||"",e.next=3,i.api.jsonp("https://api.instagram.com/v1/users/self/?access_token="+n);case 3:return o=e.sent,T(o),e.abrupt("return",{user:o.data.username,name:o.data.full_name});case 6:case"end":return e.stop()}},e,u)})),function(e){return d.apply(this,arguments)}),x=function(e,t){var n=null;if(e.type===c.a.IMAGE_TYPES.IMAGE)try{var o=e.images.standard_resolution.url;n={id:o,link:o,thumbnail:e.images.low_resolution?e.images.low_resolution.url:e.images.thumbnail.url,title:"",subtitle:t.caption&&t.caption.text||""}}catch(n){f.error("[instagramService]: failed to parse item data: ",e,t)}return n},C=function(e){return e.reduce(function(e,t){return e.concat((n=t).type===c.a.IMAGE_TYPES.CAROUSEL?n.carousel_media.map(function(e){return x(e,n)}):n.type===c.a.IMAGE_TYPES.IMAGE?x(n,n):null);var n},[]).filter(function(e){return e})},y=(p=l(regeneratorRuntime.mark(function e(t){var n,o,r,a,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(!t.extend||t.url)&&t.cloudName,o=[],r=null,!n){e.next=11;break}return a=_(t.cloudName).token||"",s=t.url||"https://api.instagram.com/v1/users/self/media/recent/?count="+E+"&access_token="+a,f.log("[instagramService]: about to fetch recent media from url: "+s),e.next=7,i.api.jsonp(s);case 7:c=e.sent,T(c),o=C(c.data),r=c.pagination&&c.pagination.next_url;case 11:return e.abrupt("return",{items:t.extend&&t.items?t.items.concat(o):o,nextUrl:r});case 12:case"end":return e.stop()}},e,u)})),function(e){return p.apply(this,arguments)});t.default=function(){return f.log("[instagramService]: creating instagram api"),{getAuthInfo:_,openAuthWindow:O,postAuthResult:S,setAuthListener:v,logout:j,getAccountInfo:I,getRecents:y}}},"./tabs/Instagram/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{instagram:{main_title:"Instagram",no_auth_title:"Upload photos from your Instagram account.",no_auth_action:"Connect to Instagram",header_title:"Your Recent Instagram Photos",authenticating:"Authenticating..."}}}}},"./tabs/Local/LocalTab.scss":function(e,t){},"./tabs/Local/components/UploadButton/UploadButton.scss":function(e,t){},"./tabs/Local/components/UploadButton/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./common/i18n.js"),s=n("./root/components/Button/index.js"),i=n("./tabs/Local/components/UploadButton/UploadButton.scss");n.n(i);t.default=function(e){return r.a.createElement("div",{className:"upload_button_holder",ref:e.containerRefFn},r.a.createElement("div",null,r.a.createElement(s.default,{colorName:"link",text:Object(a.b)("local.browse")})),r.a.createElement("input",{type:"file",name:"file",className:"cloudinary_fileupload"}))}},"./tabs/Local/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=(n("../node_modules/react-redux/es/index.js"),n("../node_modules/classnames/index.js")),s=n.n(a),i=n("../node_modules/reselect/lib/index.js"),c=(n.n(i),n("../node_modules/react-dnd/lib/index.js")),u=(n.n(c),n("../node_modules/react-dnd-html5-backend/lib/index.js")),l=n.n(u),d=n("./uploader/index.js"),p=n("./common/i18n.js"),f=n("./utils/domUtils.js"),m=n("./tabs/hocs/TabPanel.js"),b=n("./root/components/TabFooter/index.js"),E=n("../assets/icons/icons.js"),g=n("./root/components/SvgIcon/index.js"),h=(n("./root/selectors/index.js"),n("./root/components/UploadContainer/uploaderContext.js")),_=n("./tabs/Local/components/UploadButton/index.js"),O=n("./tabs/Local/LocalTab.scss");n.n(O);function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=S(this,e.call.apply(e,[this].concat(a))),o.buttonContainer=null,o.ddArea=null,S(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.buttonContainer&&this.ddArea&&this.props.uploader.renderUploadField(this.buttonContainer,this.ddArea)},t.prototype.render=function(){var e=this,t=r.a.createElement(o.Fragment,null,r.a.createElement("div",{className:"icon-upload mb4 tc dn db-ns"},r.a.createElement(g.default,{size:100,path:E.b.UPLOAD,colorName:this.props.isDragHover?"action":"window-border"})),r.a.createElement("div",{className:"mb4 tc db dn-ns"},r.a.createElement(g.default,{size:125,path:E.b.FILES_DRAG,colorName:"window-border"})),r.a.createElement("strong",{className:"c-window-border title single-text"},Object(p.b)("local.dd_title_single")),r.a.createElement("strong",{className:"c-window-border title multi-text"},Object(p.b)("local.dd_title_multi")),r.a.createElement("strong",{className:"c-window-border mb4 title add single-text c-action"},Object(p.b)("local.drop_title_single")),r.a.createElement("strong",{className:"c-window-border mb4 title add multi-text c-action"},Object(p.b)("local.drop_title_multiple")),r.a.createElement("span",{className:"or"},Object(p.b)("or")));return this.props.connectDropTarget(r.a.createElement("div",{className:"panel-inner-container"},r.a.createElement("div",{"data-test":"drag-area",className:s()("bg-window","drag_area content-wrap bg-source-bg bg-source-bg-c","browse-box",{"drag-active":this.props.isDragHover}),ref:function(t){return e.ddArea=t}},r.a.createElement("div",{className:"drag_content"},r.a.createElement("div",{className:s()("holder bg-source-bg bg-source-bg-c",{"bc-window-border":!this.props.isDragHover,"bc-action":this.props.isDragHover})},r.a.createElement("div",{className:"box centered"},!Object(f.d)()&&t,r.a.createElement(_.default,{containerRefFn:function(t){return e.buttonContainer=t}}))))),r.a.createElement(b.default,null)))},t}(o.Component),j=Object(c.DragDropContext)(l.a)(Object(c.DropTarget)([u.NativeTypes.FILE,u.NativeTypes.URL],{drop:function(e,t){var n=t.getItem(),o=n&&n.urls;return o&&e.addToUploadQueue({files:o}),{dndFinished:!0}}},function(e,t){return{connectDropTarget:e.dropTarget(),isDragHover:t.isOver()}})(Object(h.b)(v)));t.default=Object(m.a)({id:d.consts.SOURCES.LOCAL,title:Object(p.b)("local.main_title"),root:!0})(j)},"./tabs/Local/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./uploader/index.js"),r=n("./routing/utils.js");t.default=[{path:Object(r.a)(o.consts.SOURCES.LOCAL),component:null}]},"./tabs/Local/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectUploadParams",function(){return c});var o=n("../node_modules/lodash/difference.js"),r=n.n(o),a=n("../node_modules/reselect/lib/index.js"),s=(n.n(a),n("./uploader/index.js")),i=n("./root/selectors/index.js"),c=Object(a.createSelector)(i.getWidgetConfig,function(e){return r()(Object.keys(e),s.widgetParams.NON_UPLOADER_PARAMS).reduce(function(t,n){return t[n]=e[n],t},{})})},"./tabs/Local/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{local:{browse:"Browse",main_title:"Upload Files",dd_title_single:"Drag and Drop an asset here",dd_title_multi:"Drag and Drop assets here",drop_title_single:"Drop a file to upload",drop_title_multiple:"Drop files to upload"}}}}},"./tabs/URL/UrlTab.scss":function(e,t){},"./tabs/URL/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"UrlTab",function(){return T});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./uploader/index.js"),s=n("../node_modules/react-redux/es/index.js"),i=n("../node_modules/classnames/index.js"),c=n.n(i),u=n("../node_modules/glamorous/dist/glamorous.esm.js"),l=n("../node_modules/reselect/lib/index.js"),d=(n.n(l),n("./root/selectors/index.js")),p=n("../assets/icons/icons.js"),f=n("./common/i18n.js"),m=n("./tabs/hocs/TabPanel.js"),b=n("./root/components/TabFooter/index.js"),E=n("./root/components/Button/index.js"),g=n("./tabs/URL/UrlTab.scss");n.n(g);function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=u.b.div(c()("flex flex-column justify-content-center items-center","pl7 pr7 w-100"),function(e){return{height:e.isSingleSrc?"490px":"468px"}}),O=u.b.div(c()("mb5 f2 bg-source-bg-c w-100"),{marginBottom:"22px",maxWidth:"628px"}),S=u.b.div(c()("flex items-center relative overflow-hidden w-100"),{maxWidth:"628px"}),v=u.b.input(c()("bc-link","w-100 ba br1 f-5 pt4 pb4 pl5 pr8 outline-0 "),{color:"initial",paddingTop:10,paddingBottom:10,paddingLeft:12,paddingRight:44,height:"inherit"}),j=u.b.div(c()("absolute"),{right:"1px",bottom:"0"}),T=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=h(this,e.call.apply(e,[this].concat(a))),o.onInputKeyPress=function(e){13===e.which&&o.sendUrlToUpload()},o.onUploadClick=function(){o.sendUrlToUpload()},o.inputRef=null,h(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.inputRef&&this.inputRef.focus()},t.prototype.sendUrlToUpload=function(){this.inputRef&&this.props.addToUploadQueue({files:[this.inputRef.value]})},t.prototype.render=function(){var e=this;return r.a.createElement(o.Fragment,null,r.a.createElement(_,{isSingleSrc:this.props.isSingleSrc},r.a.createElement(O,null,Object(f.b)("url.inner_title")),r.a.createElement(S,null,r.a.createElement(v,{type:"text",innerRef:function(t){return e.inputRef=t},onKeyPress:this.onInputKeyPress,placeholder:Object(f.b)("url.input_placeholder"),"data-test":"search-input-box"}),r.a.createElement(j,null,r.a.createElement(E.default,{colorName:"link",dataTest:"upload-from-link-btn",icon:p.b.ARROW_FORWARD,onClick:this.onUploadClick})))),r.a.createElement(b.default,null))},t}(r.a.Component);t.default=Object(s.b)(Object(l.createStructuredSelector)({palette:d.selectPalette,isSingleSrc:d.selectIsSingleSource}))(Object(m.a)({id:a.consts.SOURCES.URL,title:Object(f.b)("url.main_title")})(T))},"./tabs/URL/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./uploader/index.js"),r=n("./routing/utils.js"),a=n("./tabs/URL/index.js");t.default=[{path:Object(r.a)(o.consts.SOURCES.URL),component:a.default}]},"./tabs/URL/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{url:{main_title:"Remote URL",inner_title:"Public URL of file to upload:",input_placeholder:"http://remote.site.example/images/remote-image.jpg"}}}}},"./tabs/common/actionMethods.js":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n("../node_modules/lodash/isFunction.js"),r=n.n(o),a=n("./common/actionsBase.js"),s=function(e,t,n){var o=e(t);return r()(o)&&(o=o.apply(void 0,n)),o},i=function(e,t,n,o){var r,a,i,c,u,l=e.types,d=e.id,p=e.selectionParams;p=p||[],e.selectIsIdSelected(n).apply(void 0,[d].concat(p))?o[l.CLEAR_MAX_SELECT_REACHED]():e.multiple&&(a=n,i=o,c=p,(u=s((r=e).selectReachedMaxSelection,a,c))&&i[r.types.SET_MAX_SELECT_REACHED](),u)?d=null:e.multiple||t(l.CLEAR_IMAGE_SELECTION,{context:p[0]}),t(l.SET_FILE_SELECTION,{id:d,params:p})},c=function(e,t,n){var o=e.rootBindActions(t),r=n(),c=Object(a.c)(t);e.e.shiftKey&&e.multiple?function(e,t,n,o){var r=e.types,a=e.id,c=e.selectionParams;c=c||[];var u=e.selectMultipleIdsInRange(n).apply(void 0,[a].concat(c));if(1===u.length)i(e,t,n,o);else if(u.length){var l=s(e.selectAvailableUntilMax,n,c);l?(u=u.slice(0,l),t(r.SET_MULTI_FILE_SELECTION,{ids:u,params:c}),o[r.CLEAR_MAX_SELECT_REACHED]()):o[r.SET_MAX_SELECT_REACHED]()}}(e,c,r,o):i(e,c,r,o)}},"./tabs/common/reducerMethods.js":function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u});var o=n("./utils/seamlessUtils.js"),r=function(e,t,n,r){return~r?Object(o.c)(e,n,r):Object(o.b)(e,n,t.id)},a=function(e,t){var n=t.payload;return n.id?r(e,n,"selected",e.selected.indexOf(n.id)):e},s=function(e,t){var n=t.payload;if(n.id){var o=n.params[0],a=e.lists[o].selected.indexOf(n.id);e=r(e,n,["lists",o,"selected"],a)}return e},i=function(e,t,n){var r=t.filter(function(t){return!~e.getIn(n).indexOf(t)});return r.length?Object(o.b)(e,n,r):e},c=function(e,t){var n=t.payload;return i(e,n.ids,["selected"])},u=function(e,t){var n=t.payload;return i(e,n.ids,["lists",n.params[0],"selected"])}},"./tabs/common/selectors.js":function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return p}),n.d(t,"j",function(){return c}),n.d(t,"f",function(){return u}),n.d(t,"h",function(){return l}),n.d(t,"g",function(){return d}),n.d(t,"e",function(){return f}),n.d(t,"i",function(){return b});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),function(e){return function(t){return t[e].lists}}),a=function(e){return function(t){return{context:t[e].currentContext}}},s=function(e){return function(t){return{lists:r(e)(t),maxAllowed:t.widgetConfig.maxFiles,successfulCount:t.widgetData.successfulCount}}},i=function(e,t,n){return!!(t&&e.selected.length>=t-n)},c=function(e){return Object(o.createSelector)(s(e),function(e){return function(t){return i(e.lists[t],e.maxAllowed,e.successfulCount)}})},u=function(e){return Object(o.createSelector)(function(t){return{lists:r(e)(t),context:a(e)(t).context}},function(e){return e.lists[e.context]})},l=function(e){return Object(o.createSelector)(r(e),function(e){return function(t,n){return e[n].selected.indexOf(t)>-1}})},d=function(e){return Object(o.createSelector)(a(e),function(e){return e})},p=function(e,t,n){return t?t-n-e.selected.length:1/0},f=function(e){return Object(o.createSelector)(s(e),function(e){return function(t){return p(e.lists[t],e.maxAllowed,e.successfulCount)}})},m=function(e,t){var n=e.selected[e.selected.length-1],o=[];if(n){var r=e.items.findIndex(function(e){return e.id===n}),a=e.items.findIndex(function(e){return e.id===t});if(r===a)o.push(t);else for(var s=r<a,i=r+(s?1:-1);s?i<=a:i>=a;s?i++:i--)o.push(e.items[i].id)}return o},b=function(e){return Object(o.createSelector)(r(e),function(e){return function(t,n){return m(e[n],t)}})}},"./tabs/common/utils.js":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(e,t,n){e.contextData.selected&&e.contextData.selected.length&&e.tabData.batchStartCounter>t.tabData.batchStartCounter&&n()}},"./tabs/hocs/TabPanel.js":function(e,t,n){"use strict";var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/classnames/index.js"),s=n.n(a),i=n("../node_modules/react-redux/es/index.js"),c=n("./common/logger.js"),u=n("./routing/utils.js"),l=n("./root/actions/index.js"),d=n("./root/components/TabTitle/index.js"),p=n("./root/components/UploadContainer/uploaderContext.js"),f=n("./root/selectors/index.js"),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=Object(c.c)(),g=function(e,t){return t.root&&e.location.pathname===Object(u.a)(t.id)};t.a=function(e){return function(t){var n=function(n){function o(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return e=t=b(this,n.call.apply(n,[this].concat(a))),t.onTabTitleMenuClick=function(){t.props.rootActions[l.types.TOGGLE_RESPONSIVE_MENU]()},t.addToUploadQueue=function(e){E.log("[TabPanel]: adding file data to upload queue"),t.props.rootActions[l.types.ADD_UPLOAD_TO_QUEUE]({files:e.files})},b(t,e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),o.prototype.componentDidMount=function(){this.updateUploaderSource()},o.prototype.componentDidUpdate=function(){this.updateUploaderSource()},o.prototype.updateUploaderSource=function(){e.root&&!g(this.props.route,e)||(E.log("[TabPanel]: setting uploader source to: "+e.id),this.props.uploader.setCurrentSource(e.id),this.props.rootActions[l.types.SET_ACTIVE_SOURCE]({source:e.id}))},o.prototype.render=function(){var n,o,a,i=s()("panel","content-wrap","bg-source-bg bg-source-bg-c",e.id,"h-100 h-auto-ns",(n=this.props,o=e,(a=n.route).match&&a.match.isExact||g(a,o)||0===a.location.pathname.indexOf(Object(u.a)(o.id))?"active":""),"flex","items-center",{"single-source":this.props.isSingle});return r.a.createElement("div",{className:i},r.a.createElement(d.default,{title:e.title,id:e.id,menuClickHandler:this.onTabTitleMenuClick}),r.a.createElement(t,m({},this.props,{addToUploadQueue:this.addToUploadQueue})))},o}(o.Component);return n.displayName="TabPanelHOC("+e.id+")",Object(i.b)(function(e){return{isSingle:Object(f.selectIsSingleSource)(e)}},function(e){return{rootActions:Object(l.default)(e)}})(Object(p.b)(n))}}},"./uploader/common/consts.js":function(e,t,n){"use strict";t.a={QUEUE_STATUS:{NONE:0,RUNNING:1,FINISHED:2},VIEW_TYPES:{MODAL:1,INLINE:2},SOURCES:{LOCAL:"local",URL:"url",CAMERA:"camera",IMAGE_SEARCH:"image_search",DROPBOX:"dropbox",FACEBOOK:"facebook",INSTAGRAM:"instagram"},ABORTED:"__aborted__",RESOURCE_TYPES:{AUTO:"auto",IMAGE:"image",VIDEO:"video",RAW:"raw"},BATCH_CANCEL_REASONS:{MAX_EXCEEDED:"MAX_EXCEEDED",INVALID_PUBLIC_ID:"INVALID_PUBLIC_ID",INTEGRATION:"INTEGRATION"},SNAKE_API_SERVER_PARAMS:{resourceType:"resource_type",useFilename:"use_filename",uniqueFilename:"unique_filename",publicId:"public_id",faceCoordinates:"face_coordinates",customCoordinates:"custom_coordinates",apiKey:"api_key",uploadPreset:"upload_preset"}}},"./uploader/common/defaults.js":function(e,t,n){"use strict";n.d(t,"b",function(){return a});var o=n("./uploader/common/consts.js").a.SOURCES,r=[o.LOCAL,o.URL,o.CAMERA,o.IMAGE_SEARCH,o.DROPBOX,o.FACEBOOK,o.INSTAGRAM],a=function(){return r.slice()};t.a={cloudName:null,uploadPreset:"",uploadPrefix:"",secure:!0,folder:null,maxFiles:null,cropping:null,inlineMode:!1,sources:a(),defaultSource:null,multiple:!0,googleApiKey:null,dropboxAppKey:null,facebookAppId:null,instagramClientId:null,searchBySites:!1,searchByRights:!1,publicId:"",autoMinimize:!1,requirePrepareParams:!1,useTagsCallback:!1,useUploadPresetsCallback:!1,text:null,language:"en",showAdvancedOptions:!1,showPoweredBy:!0,showCompletedButton:!1,showInsecurePreview:!1,styles:null,croppingShowBackButton:!0,croppingCoordinatesMode:"custom",croppingDefaultSelectionRatio:1,croppingShowDimensions:!1,theme:null}},"./uploader/common/utils.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"getFileNameFromUrl",function(){return E}),n.d(t,"getUploadFieldFromContainer",function(){return g}),n.d(t,"getUploadFieldFormData",function(){return h}),n.d(t,"createCustomUploadInfo",function(){return _}),n.d(t,"createUploadFileFromData",function(){return O}),n.d(t,"getAcceptFileTypes",function(){return S}),n.d(t,"getTimestamp",function(){return v}),n.d(t,"getUploadSource",function(){return j}),n.d(t,"getCoordinatesString",function(){return T});var o=n("../node_modules/jquery/dist/jquery.js"),r=n.n(o),a=n("../node_modules/voca/index.js"),s=(n.n(a),n("./common/logger.js")),i=n("./utils/binaryToFile.js"),c=n("./appConfig.js"),u=this,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var d,p,f=Object(s.b)(),m="input[type='file']",b=function(e){return e.split("/").splice(-1,1)[0]},E=function(e){var t=null;try{var n=new URL(e);(t=b(n.pathname))||(t=b(decodeURIComponent(n.search)))}catch(e){}return t||e},g=function(e){return e.find?e.find(m):r()(e).find(m)},h=function(e){return g(e).fileupload("option","formData")},_=function(e){return l({_custom:!0,slice:function(){return new Blob([0,0])}},e)},O=(d=regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!Object(a.isString)(t.file)){e.next=18;break}if(t.file.indexOf("data:")){e.next=15;break}return e.prev=3,e.next=6,Object(i.a)(t.file,t);case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),f.log("[uploader.utils]: failed to convert binary string to File object",t.type,t.name,t.size);case 12:n instanceof File||!(n instanceof Blob||null===n)||(n&&(n.name=t.name),n={file:n,name:t.name,type:t.type,size:t.size,lastModified:t.lastModified}),e.next=16;break;case 15:n=_(t);case 16:e.next=19;break;case 18:n=t.file;case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}},e,u,[[3,9]])}),p=function(){var e=d.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e){return p.apply(this,arguments)}),S=function(e){var t=e?Array.isArray(e)?e:e.split(","):[];return(t=t.reduce(function(e,t){return e.concat(t.match(/jpe?g/i)?["jpg","jpeg"]:Object(a.trim)(t))},[])).length?new RegExp("\\.("+t.join("|")+")$","i"):null},v=function(){return Math.floor((new Date).getTime()/1e3)},j=function(e){return e.onConsole?c.a.upload.consoleSource:c.a.upload.source},T=function(e){return e.x+","+e.y+","+e.width+","+e.height}},"./uploader/common/widgetParams.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MANDATORY_PARAMS",function(){return o}),n.d(t,"BEHAVIOR_PARAMS",function(){return r}),n.d(t,"CROP_PARAMS",function(){return a}),n.d(t,"UPLOAD_PARAMS",function(){return s}),n.d(t,"CLIENT_SIDE_PARAMS",function(){return i}),n.d(t,"ADVANCED_PARAMS",function(){return c}),n.d(t,"CUSTOMIZATION_PARAMS",function(){return u}),n.d(t,"INTERNAL_PARAMS",function(){return l}),n.d(t,"THIRD_PARTY_PARAMS",function(){return d}),n.d(t,"PAGE_INTEGRATION_PARAMS",function(){return p}),n.d(t,"NON_UPLOADER_PARAMS",function(){return f});var o=["cloudName","uploadPreset","apiKey"],r=["sources","secure","defaultSource","showAdvancedOptions","showCompletedButton","showUploadMoreButton","multiple","maxFiles","autoMinimize","inlineMode","singleUploadAutoClose"],a=["cropping","croppingAspectRatio","croppingDefaultSelectionRatio","croppingShowDimensions","croppingCoordinatesMode","croppingShowBackButton","croppingValidateDimensions"],s=["publicId","folder","tags","uploadPreset","resourceType","context","uploadSignatureTimestamp","useFilename","uniqueFilename","invalidate","overwrite"],i=["requirePrepareParams","useTagsCallback","useUploadPresetsCallback","usePreBatchCallback","clientAllowedFormats","maxImageWidth","maxImageHeight","validateMaxWidthHeight","minImageHeight","minImageWidth","maxFileSize","maxChunkSize","thumbnails","thumbnailTransformation","secureDistribution","inlineContainer","frameContainer"],c=["showPoweredBy","showInsecurePreview"],u=["theme","text","language","styles"],l=["uploadPrefix","debug","dev","staging"],d=["googleApiKey","dropboxAppKey","facebookAppId","instagramClientId","searchBySites","searchByRights"],p=["buttonCaption","buttonClass","queueViewPosition","controlVpMeta","fieldName","frameZIndex","widgetHost"],f=["sources","secure","defaultSource","uploadHost"].concat(d).concat(u).concat(c).concat(l).concat(p).concat(a)},"./uploader/configParser.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"configMerger",function(){return f});var o=n("../node_modules/lodash/pick.js"),r=n.n(o),a=n("../node_modules/lodash/isBoolean.js"),s=n.n(a),i=n("../node_modules/lodash/mergeWith.js"),c=n.n(i),u=n("../node_modules/voca/index.js"),l=(n.n(u),n("./uploader/common/defaults.js")),d=n("./uploader/common/widgetParams.js"),p=["sources","tags","fonts"],f=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.a.apply(void 0,t.concat([function(e,t,n){if(~p.indexOf(n))return t}]))};t.default=function(e){var t=[].concat(d.MANDATORY_PARAMS,d.BEHAVIOR_PARAMS,d.UPLOAD_PARAMS,d.CLIENT_SIDE_PARAMS,d.ADVANCED_PARAMS,d.CUSTOMIZATION_PARAMS,d.INTERNAL_PARAMS,d.THIRD_PARTY_PARAMS,d.CROP_PARAMS);e=r()(e,t);var n,o,a,i,c,p,m,b,E=f({},l.a,e);return o=(n=E).maxFiles?parseInt(n.maxFiles):null,n.maxFiles=o&&!isNaN(o)?o:null,(a=E=n).cropping&&"none"!==a.cropping?(a.cropping=!0,a.multiple=!1):(a.cropping=null,a.multiple=1!==a.maxFiles&&a.multiple),c=(i=E=a).sources,p=Object(l.b)(),Array.isArray(c)&&c&&c.length?i.sources=c.filter(function(e){return!!~p.indexOf(e)}):i.sources=p,m=E=i,Object(u.isString)(m.searchBySites)&&(m.searchBySites=[m.searchBySites]),b=E=m,s()(b.showUploadMoreButton)||(b.showUploadMoreButton=!0),s()(b.singleUploadAutoClose)||(b.singleUploadAutoClose=!0),E=b}},"./uploader/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./uploader/common/consts.js"),r={UPLOADER_READY:"UPLOADER_READY",UPLOADER_FILE_STATUS:"UPLOADER_FILE_STATUS",UPLOADER_SHOW:"UPLOADER_SHOW",UPLOADER_UPDATE_SETTINGS:"UPLOADER_UPDATE_SETTINGS",UPLOADER_CLIENT_HIDE:"UPLOADER_CLIENT_HIDE",UPLOADER_CLIENT_TAGS:"UPLOADER_CLIENT_TAGS",UPLOADER_CLIENT_UPLOAD_PRESETS:"UPLOADER_CLIENT_UPLOAD_PRESETS",UPLOADER_CLIENT_MINIMIZE:"UPLOADER_CLIENT_MINIMIZE",UPLOADER_BATCH_STARTED:"UPLOADER_BATCH_STARTED",UPLOADER_CROP_STARTED:"UPLOADER_CROP_STARTED",UPLOADER_BATCH_CANCELLED:"UPLOADER_BATCH_CANCELLED",UPLOADER_CLOUD_INFO:"UPLOADER_CLOUD_INFO",UPLOADER_SUCCESS_COUNTER:"UPLOADER_SUCCESS_COUNTER"},a={FILE_FINISH:"upload-finish",FILE_ADDED:"upload-added",WIDGET_VIEW_TYPE_CHANGE:"widget-view-change",SOURCE_CHANGED:"source-changed",TAGS:"tags",PUBLICID:"publicid",QUEUES_START:"queues-start",QUEUES_END:"queues-end",SHOW_COMPLETED:"show-completed",ABORT:"abort",RETRY:"retry",BATCH_CANCELED:"batch-canceled",DISPLAY_CHANGED:"display-changed"},s={INIT:"uw_init",MINIMIZE:"uw_mini",CONFIG:"uw_config",PREPARE:"uw_prepare",PRE_BATCH:"uw_prebatch",EVENT:"uw_event",SHOW:"uw_show",HIDE:"uw_hide",TAGS:"uw_tags",UPLOAD_PRESETS:"uw_upload_presets",FILE:"uw_file"},i=n("./uploader/common/defaults.js"),c=n("./uploader/common/utils.js"),u=n("../node_modules/qs/lib/index.js"),l=n("./common/logger.js"),d=n("./utils/envUtils.js"),p=n("./appConfig.js"),f=Object(l.b)(),m=function(e){if(!e||!e.length)throw"PostMessage - target not set!"},b=function(e,t){var n=void 0,o=Array.isArray(t.target)?t.target:[t.target],r=t.types,a=function(e){if(~o.indexOf(e.origin)){n=e.origin;var a=function(e,t){var n=null;try{n="string"==typeof e?JSON.parse(e):e}catch(n){f.warn("[postmessage]: failed to parse data from "+t,e,n.message)}return n}(e.data,e.origin);a&&a.type&&r[a.type]&&(f.log("[postmessage]: found matching handler for '"+a.type+"' event from: "+e.origin),r[a.type](a.data,a.type,e,t))}};return m(o),self.addEventListener("message",a,!1),{send:function(t){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).target||o[0]||n;m(r);try{f.log("[postmessage]: posting message to: "+r),e.postMessage(JSON.stringify(t),r)}catch(e){f.error("[postmessage]: failed to post message to target: "+r,e)}},close:function(){return self.removeEventListener("message",a)}}},E=n("./uploader/store/actions.js"),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h=this;var _=Object(l.b)(),O=function(e){var t,n,o,r,a=((t={})[s.PRE_BATCH]=[],t[s.PREPARE]=[],t),i=function(e,t){return a[e].splice(0).forEach(function(e){return e(t)})},u=(o=regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return _.log("[uploader.externalInterface]: received upload file ",n.type,n.name,n.size),t.t0=e.actions,t.t1=E.b.SET_UPLOADER_ADD_CLIENT_UPLOAD,t.next=5,Object(c.createUploadFileFromData)(n);case 5:t.t2=t.sent,t.t3=n.index,t.t4=n.count,t.t5={file:t.t2,index:t.t3,count:t.t4},t.t0[t.t1].call(t.t0,t.t5);case 10:case"end":return t.stop()}},t,h)}),r=function(){var e=o.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e){return r.apply(this,arguments)}),l=b(self.parent,{target:e.qsParams.pmHost,types:(n={},n[s.INIT]=function(t){_.log("[uploader.externalInterface]: received init message ",t.type,t.name,t.size),e.actions[E.b.SET_UPLOADER_CONFIG]({config:t})},n[s.CONFIG]=function(t){_.log("[uploader.externalInterface]: received updated config ",t.type,t.name,t.size),e.actions[E.b.SET_UPLOADER_CONFIG]({config:t})},n[s.PREPARE]=function(e){_.log("[uploader.externalInterface]: received prepared upload params ",e.type,e.name,e.size),i(s.PREPARE,e)},n[s.SHOW]=function(t){_.log("[uploader.externalInterface]: received show message ",t.type,t.name,t.size),e.actions[E.b.SET_UPLOADER_SHOW](t)},n[s.HIDE]=function(t){_.log("[uploader.externalInterface]: received hide message"),e.actions[E.b.SET_UPLOADER_HIDE]({options:t})},n[s.TAGS]=function(t){_.log("[uploader.externalInterface]: received tags",t.type,t.name,t.size),e.actions[E.b.SET_UPLOADER_RETRIEVED_TAGS](t)},n[s.UPLOAD_PRESETS]=function(t){_.log("[uploader.externalInterface]: received upload-presets",t),e.actions[E.b.SET_UPLOADER_RETRIEVED_UPLOAD_PRESETS](t)},n[s.MINIMIZE]=function(){_.log("[uploader.externalInterface]: received minimize message"),e.actions[E.b.SET_UPLOADER_MINIMIZE]()},n[s.FILE]=u,n[s.PRE_BATCH]=function(e){e=e||{},_.log("[uploader.externalInterface]: received pre-batch callback ",e.type,e.name,e.size),i(s.PRE_BATCH,e)},n)}),d=function(e,t,n){return a[e].push(t),l.send(g({},n,{type:e}))};return{emitEvent:function(e){return l.send(g({type:s.EVENT},e))},requestPrepareParams:function(e,t){return d(s.PREPARE,e,t)},sendPreBatch:function(e,t){return d(s.PRE_BATCH,e,t)},requestTags:function(e){return l.send(g({type:s.TAGS},e))},requestUploadPresets:function(e){l.send(g({type:s.UPLOAD_PRESETS},e))},sendHide:function(e){return l.send(g({type:s.HIDE},e))}}},S=n("./services/index.js"),v=n("../node_modules/voca/index.js"),j=n("./utils/domUtils.js"),T=n("../node_modules/fbemitter/index.js"),I=n("../node_modules/lodash/pick.js"),x=n.n(I),C=n("../node_modules/lodash/isBoolean.js"),y=n.n(C),A=n("../node_modules/jquery/dist/jquery.js"),R=n.n(A),L=n("./uploader/common/widgetParams.js"),w=Object(l.c)(),D=function(e){var t=e.uploadPrefix||p.a.api.uploadBase;return t+=""+p.a.api.uploadVersion+e.cloudName+"/",e.resourceType&&(t+=e.resourceType+"/"),t+p.a.api.upload},P=function(e){var t=x()(e,L.UPLOAD_PARAMS);return Object.keys(t).reduce(function(t,n){var r,a=e[n];return(y()(a)||a&&!Object(v.isBlank)(a))&&(t[(r=n,o.a.SNAKE_API_SERVER_PARAMS[r]||r)]=a),t},{})},U=function(e,t,n,o){w.log("[uploader.uploadField]: rendering cloudinary upload tag with upload options: ",o);var r,a=D(n);return e.unsigned_cloudinary_upload(n.uploadPreset,o,{url:a,cloud_name:n.cloudName,dropZone:R()(t),multiple:n.multiple,acceptFileTypes:Object(c.getAcceptFileTypes)(n.clientAllowedFormats),autoUpload:!1,previewCanvas:!1,minFileSize:0,maxFileSize:n.maxFileSize||0,maxChunkSize:(r=n,Math.max(p.a.upload.minChunkSize,r.maxChunkSize||p.a.upload.maxChunkSize)),disableImageResize:!(n.maxImageWidth||n.maxImageHeight),imageMaxWidth:n.maxImageWidth||n.maxImageHeight&&0,imageMaxHeight:n.maxImageHeight||n.maxImageWidth&&0,imageMinWidth:n.minImageWidth,imageMinHeight:n.minImageHeight,loadImageMaxFileSize:p.a.upload.maxImageSize,disableImageReferencesDeletion:!0,previewThumbnail:!1,disableImagePreview:!0})},N=function(e,t,n){w.log("[uploader.uploadField]: about to update form data with prepared params: ",n);var o=Object(c.getUploadFieldFormData)(e);n.signature?(o.signature=n.signature,o.timestamp=n.timestamp||o.timestamp):delete o.signature,o.api_key=n.apiKey||t.apiKey,o.upload_preset=n.uploadPreset||o.upload_preset;var r=P(n);Object.keys(r).forEach(function(e){o[e]=r[e]});var a=function(e,t,n){var o=Object(c.getUploadFieldFromContainer)(e),r=o.fileupload("option","url");if(Object(v.isString)(n.uploadHost)&&!Object(v.isBlank)(n.uploadHost)){var a=D({uploadPrefix:"//"+n.uploadHost+"/",cloudName:t.cloudName});r!==a&&(r=a,w.log("[uploader.uploadField]: updating upload url to new one received from prepared data = "+a),o.fileupload("option","url",a))}return r}(e,t,n);return{formData:o,uploadUrl:a}},M=function(e,t,n){var o=P(n);o.timestamp=o.uploadSignatureTimestamp,delete o.uploadSignatureTimestamp;var r,a,s,i=U(e,t,n,o);a=n,s=(r=i).fileupload("option","processQueue"),(a.minImageWidth||a.minImageHeight)&&(s.push({action:"validateImageMinSize"}),r.fileupload("option","processQueue",s)),a.validateMaxWidthHeight&&(s.push({action:"validateMaxWidthHeight"}),r.fileupload("option","processQueue",s))},F=n("./common/i18n.js"),k=n("./utils/fileUtils.js"),B=n("../node_modules/reselect/lib/index.js"),G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},H=function(e){return e.uploader.queues},V=function(e){var t=e.uploader.queues;return t[t.length-1]},W=function(e){return e.uploader.queues.find(function(e){return e.status===o.a.QUEUE_STATUS.NONE})},q=function(e){return e.uploader.queues.find(function(e){return e.status===o.a.QUEUE_STATUS.RUNNING})},z=Object(B.createSelector)(V,function(e){return e&&e.config}),Q=function(e){return{publicId:e.uploader.uploadPublicId,tags:e.uploader.uploadTags,uploadPreset:e.uploader.uploadPreset}},X=Object(B.createSelector)(H,function(e){return e.reduce(function(e,t){return e.files=G({},e.files,t.files),e.filesData=G({},e.filesData,t.filesData),e},{files:{},filesData:{}})}),Y=Object(B.createSelector)(H,function(e){return e?e.reduce(function(e,t){return G({},e,t.filesData)},{}):{}}),K=Object(B.createSelector)(function(e){return e.uploader.onConsole},function(e){return e.uploader.onDevConsole},function(e,t){return{onConsole:e,onDevConsole:t}}),Z=Object(B.createSelector)(function(e){return e.uploader.cloudInfo},K,function(e,t){return{info:e,onConsole:t.onConsole,onDevConsole:t.onDevConsole}}),$=function(e){return e.uploader.successCounter},J=(Object(B.createSelector)(q,function(e){return e?e.ids.reduce(function(t,n){return e.filesData[n].paused&&(t[n]=e.files[n]),t},{}):{}}),Object(B.createSelector)(H,function(e){return e.reduce(function(e,t){return t.ids.forEach(function(n){e[n]=G({},t.filesData[n],{getPreviewObject:t.files[n].getPreviewObject})}),e},{})})),ee=function(e){return e&&{id:e.queueId,config:e.config,sameConfig:e.sameConfig,status:e.status,pendingPreCalls:e.pendingPreCalls,ids:e.ids}},te=Object(B.createSelector)(W,ee),ne=Object(B.createSelector)(q,ee),oe=Object(B.createSelector)(W,function(e){return e&&e.ids}),re=Object(B.createSelector)(q,function(e){return e&&e.ids}),ae=Object(B.createSelector)(V,ee),se=function(e){return e.uploader.showCounter},ie=function(e){return{options:e.uploader.hideOptions,counter:e.uploader.hideCounter}},ce=function(e){return e.uploader.minimizeCounter},ue=function(e){return{source:e.uploader.source,options:e.uploader.showOptions}},le=function(e){return e.uploader.retrievedTags},de=function(e){return e.uploader.retrievedUploadPresets},pe=function(e){return!!e.uploader.queues.find(function(e){return!!Object.values(e.filesData).find(function(e){return!e.done&&!e.aborted&&!e.failed})})},fe=function(e){return e.uploader.clientUploadBatch},me=function(e){return e.uploader.fileQueueIndex},be=function(e){return e.uploader.fileVersions},Ee=Object(B.createSelector)(Q,function(e){return e.uploader.publicIdCounters},function(e,t){return e.publicId?{publicId:e.publicId,counter:t[e.publicId]||0}:null}),ge=Object(B.createSelector)(W,function(e){return e&&e.config.folder}),he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe=Object(l.c)(),Se=function(e,t){var n=me(t)[e];return~n||Object(d.e)("[uploader.uploadFileMethods]: didnt find queue for file with id: "+e),n},ve=function(e,t){var n=t.getState(),o=Se(e,n),r=H(n),a=void 0;if(~o&&r[o]){var s=r[o].files[e];s&&(a=s.getFileObject())}else Oe.warn("[uploader.uploadFileMethods]: couldn't find queue for file id: "+e);return a||Object(d.e)("[uploader.uploadFileMethods]: didnt find file object for id: "+e),a},je=function(e,t){var n=t.getState(),o=Se(e,n),r=H(n)[o],a=void 0;if(r&&r.filesData&&(a=r.filesData[e]),!a)throw new Error("[uploader.uploadFileMethods]: didnt find file data for file with id: "+e);return a},Te=function(e,t){var n=t.getState(),o=Se(e,n);return~o?H(n)[o].config:null},Ie=function(e,t){var n=t.getState(),o=re(n),r=!1;if(o)r=o&&~o.indexOf(e);else{var a=oe(n);r=a&&~a.indexOf(e)}return!!r},xe=function(e,t){var n=me(t.getState())[e];return n||0===n},Ce=function(e,t,n){var r,a,s,i,c,u=void 0;if(t&&(t.resource_type===o.a.RESOURCE_TYPES.IMAGE||t.resource_type===o.a.RESOURCE_TYPES.VIDEO)){var l=Te(e,n);if(l&&!1!==l.thumbnails){var d=(r=t,a=l,s=Z(n.getState()).info||{},i={cloud_name:a.cloudName,private_cdn:s["data-private-cdn"],cname:s["data-cname"],secure_distribution:a.secureDistribution?a.secureDistribution:s["data-secure-distribution"],format:"png"===r.format?"png":"jpg",version:r.version,resource_type:r.resource_type,secure:!0},(c=a.thumbnailTransformation)?Object(v.isString)(c)?i.raw_transformation=c:i.transformation=c:(i.width=90,i.height=60,i.crop="limit"),i);u=R.a.cloudinary.url(t.public_id,d)}return u}},ye=function(e,t,n,o){if(t&&"object"===(void 0===n?"undefined":_e(n))){var r=Ce(e,n,o);r&&(n=he({},n,{thumbnail_url:r}))}o.actions[E.b.SET_UPLOADER_FILE_DONE]({id:e,success:t,result:n});var s=je(e,o);Oe.log("[uploader.uploadFileMethods]: retrieved file data for finalized upload [id: "+e+"]",s),o.sendExternalEvent({event:a.FILE_FINISH,info:s})},Ae=function(e,t,n){n.actions[E.b.SET_UPLOADER_FILE_DATA_METHODS]({id:e,methods:{submitUpload:t.submit.bind(t),abortUpload:t.abort&&t.abort.bind(t)}})},Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Le=/got (\d*)\. maximum is (\d*)\./i,we=Object(l.c)(),De=Math.round,Pe={FILE_UPLOAD_PROGRESS:"fileuploadprogress",FILE_UPLOAD_PROCESS_DONE:"fileuploadprocessdone",FILE_UPLOAD_PROCESS_FAIL:"fileuploadprocessfail",FILE_PROCESS_ALWAYS:"fileuploadprocessalways",FILE_UPLOAD_ADDED:"fileuploadadd",FILE_UPLOAD_FAIL:"fileuploadfail",FILE_UPLOAD_DONE:"fileuploaddone",FILE_UPLOAD_CHANGE:"fileuploadchange",FILE_UPLOAD_PASTE:"fileuploadpaste",FILE_UPLOAD_DROP:"fileuploaddrop",FILE_UPLOAD_SUBMIT:"fileuploadsubmit"},Ue=function(e,t){var n,o,r,a,s,i=(n=e,r=(o=t).getUploadOptions(),a=r.tags?r.tags.join(","):"",s=je(n.uniqueId,o),{tags:Object(v.isBlank)(a)?void 0:a,publicId:Object(v.isBlank)(s.publicId)?void 0:s.publicId,uploadPreset:Object(v.isBlank)(r.uploadPreset)?void 0:r.uploadPreset});if(i.tags?e.formData.tags=i.tags:delete e.formData.tags,i.publicId?e.formData.public_id=i.publicId:delete e.formData.public_id,i.uploadPreset&&(e.formData.upload_preset=i.uploadPreset),e.files&&e.files.length&&e.files[0]){var u=ve(e.uniqueId,t);Object(v.isString)(u)&&(e.formData.file=u)}delete e.formData.callback,e.formData.source||(e.formData.source=Object(c.getUploadSource)(K(t.getState())));var l,d,p=t.updatePreparedParams((l=e.uniqueId,je(l,t).preparedParams)),f=(d=e.uniqueId,je(d,t).customCoordinates),m=Te(e.uniqueId,t);f&&m&&(e.formData[m.croppingCoordinatesMode+"_coordinates"]=Object(c.getCoordinatesString)(f)),e.url=p.uploadUrl!==e.url?p.uploadUrl:e.url},Ne=function(e){var t=JSON.parse(e).error.message,n=Le.exec(t);return n&&n.length>2&&(t=function(e,t){var n=null;try{var o=Object(k.b)(parseInt(e)),r=Object(k.b)(parseInt(t));n=Object(F.b)("uploader.errors.file_too_large",{size:Object(F.b)("uploader.filesize."+o.text,o),allowed:Object(F.b)("uploader.filesize."+r.text,r)})}catch(e){we.warn("[uploader.uploadCallbacks]: failed to format file too large error message")}return n}(n[1],n[2])||t),t},Me=function(e,t,n,o){var r=o.files[0].id;if(r){we.log("[uploader.uploadCallbacks]: upload added with id: "+r+" ",o);var a=ve(r,t);o.uniqueId=r,a?(o.files[0]=a,Ae(r,o,t),function(e,t,n,o){var r=function(e){Object(c.getUploadFieldFromContainer)(n).fileupload("option","acceptFileTypes",e)};if(Object(v.isString)(t))Oe.log("[uploader.uploadFileMethods]: turning off file type option for url based upload"),r(null);else if(je(e,o).camera)Oe.log("[uploader.uploadFileMethods]: turning off accepted-file-types config for Camera based upload"),r(null);else{Oe.log("[uploader.uploadFileMethods]: turning on file accepted-file-types config for File based upload");var a=Te(e,o);a&&r(Object(c.getAcceptFileTypes)(a.clientAllowedFormats))}}(r,a,e,t)):we.warn("[uploader.callbacks] -UPLOAD_ADD-: failed to get file object for id: "+r,o)}else we.error("[uploader.callbacks] -UPLOAD_ADD-: invalid data information added !!!!!!!! ",o)},Fe=function(e,t,n,o){var r,a,s=Math.round(100*o.loaded/o.total);we.log("[uploader.uploadCallbacks] -UPLOAD_PROGRESS-: upload progress update for file: "+o.uniqueId+", progress: "+s),r=o.uniqueId,a=s,t.actions[E.b.SET_UPLOADER_FILE_PROGRESS]({id:r,progress:a})},ke=function(e,t,n,o){var r,a;we.log("[uploader.uploadCallbacks] -UPLOAD_PROCESS_DONE-: processing done for file: "+o.uniqueId),o.files&&o.files.length&&xe(o.uniqueId,t)&&(!function(e,t){if(e.preview){var n=je(e.uniqueId,t),o=n.imageDimensions;if(n.customCoordinates){var r=!1,a=Re({},n.customCoordinates);if(n.coordinatesResize)t.actions[E.b.SET_UPLOADER_FILE_COORDINATES]({id:e.uniqueId,customCoordinates:a,coordinatesResize:!1});else{if(e.preview.width<o[0]){var s=e.preview.width/o[0];a.x>0&&(a.x=De(a.x*s)),a.width=De(a.width*s),r=!0}if(e.preview.height<o[1]){var i=e.preview.height/o[1];a.y>0&&(a.y=De(a.y*i)),a.height=De(a.height*i),r=!0}r&&(we.log("[uploader.uploadCallbacks] crop coordinates have changed!",{prev:n.customCoordinates,next:a}),t.actions[E.b.SET_UPLOADER_FILE_COORDINATES]({id:e.uniqueId,customCoordinates:a,coordinatesResize:!0}))}}}}(o,t),Ae(o.uniqueId,o,t),r=o.uniqueId,a=o,t.actions[E.b.SET_UPLOADER_FILE_PREVIEW]({id:r,preview:a.preview||a.files[0].preview,img:a.img,exif:a.exif}))},Be=function(e,t,n,o){var r=function(e){var t="error";if("json"===e.dataType&&e.jqXHR&&e.jqXHR.responseText)try{t=Ne(e.jqXHR.responseText)}catch(e){we.warn("[uploader.uploadCallbacks]: failed to parse fail message")}else e.jqXHR&&e.jqXHR.statusText?t=e.jqXHR.statusText:e.errorThrown&&(t=e.errorThrown);return t}(o);we.warn("[uploader.uploadCallbacks] -UPLOAD_FAILED-: encountered upload failure for file: "+o.uniqueId,r,o),xe(o.uniqueId,t)&&ye(o.uniqueId,!1,r,t)},Ge=function(e,t){we.log("[uploader.callbacks]: setting up callbacks on uploader");var n=function(){return Object(c.getUploadFieldFromContainer)(e).fileupload("option","add",function(e,n){!function(e,t,n,o,r){if(!n.isDefaultPrevented()&&(r=R()(r),o.process(function(){return r.fileupload("process",o)}),"string"==typeof o.files[0]&&t.config.multiple)){var a=r.fileupload("option","processQueue");a.push({action:"debounce"}),r.fileupload("option","processQueue",a)}}(0,t,e,n,this)})},o=Pe;return Object(c.getUploadFieldFromContainer)(e).on(o.FILE_UPLOAD_ADDED,Me.bind(null,e,t)).on(o.FILE_UPLOAD_PROGRESS,Fe.bind(null,e,t)).on(o.FILE_UPLOAD_FAIL,Be.bind(null,e,t)).on(o.FILE_UPLOAD_PROCESS_DONE,ke.bind(null,e,t)).on(o.FILE_UPLOAD_PROCESS_FAIL,function(e,t,n,o){var r=o.files[0].error;r?(we.warn("[uploader.uploadCallbacks] -UPLOAD_PROCESS_FAIL-: \n                encountered upload processing failure for file: "+o.uniqueId),ye(o.uniqueId,!1,r,t)):(we.warn("[uploader.uploadCallbacks]: process failed without error message",o),ke(0,t,0,o))}.bind(null,e,t)).on(o.FILE_PROCESS_ALWAYS,function(e,t,n,o){Ie(o.uniqueId,t)&&(we.log("[uploader.uploadCallbacks] -UPLOAD_PROCESSED-: upload processed for file: "+o.uniqueId+" ",o),t.actions[E.b.SET_UPLOADER_QUEUE_RUNNING_FOR_FILE]({id:o.uniqueId}),o.formData&&Ue(o,t),o.files[0].error||o.submit())}.bind(null,e,t)).on(o.FILE_UPLOAD_SUBMIT,function(e,t,n,o){var r=!0;if(we.log("[uploader.uploadCallbacks] -UPLOAD_SUBMIT-: about to submit file: "+o.uniqueId),Ie(o.uniqueId,t)){var a=je(o.uniqueId,t);a.coordinatesResize&&t.getDelayPrepareAfterProcessing(a.customCoordinates)&&(r=!1,we.log("[uploader.uploadCallbacks] -UPLOAD_SUBMIT-: delaying submit - coordinates changed due to resize"),setTimeout(function(){t.handleUpload({files:[a],cropInfo:[a.customCoordinates]},!0,!0)},1))}return r}.bind(null,e,t)).on(o.FILE_UPLOAD_DONE,function(e,t,n,o){we.log("[uploader.callbacks] -UPLOAD_DONE-: upload done for file: "+o.uniqueId),ye(o.uniqueId,!0,o.result,t)}.bind(null,e,t)).on(o.FILE_UPLOAD_DROP+" "+o.FILE_UPLOAD_CHANGE+" "+o.FILE_UPLOAD_PASTE,function(e,t,n){return we.log("[uploader.callbacks]: new batch ["+n.files.length+"] was added to be uploaded"),e.handleUpload(n,!0),!1}.bind(null,t)),n(),{useCustomAddMethod:n}},He=n("../node_modules/react-device-detect/dist/index.js"),Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe=Object(l.c)(),ze=!1,Qe=["sources"],Xe=["styles","palette","images"],Ye=function(e){var t=Ve({sources:i.a.sources},e,{cloudName:void 0}),n="";try{n=function e(t){return Object.keys(t).reduce(function(n,o){var r=t[o];return Array.isArray(r)?n.concat(r.map(function(e){return o+"[]="+e})):"object"===(void 0===r?"undefined":We(r))?n.concat(e(r)):n.concat(o+"="+r)},[])}(function e(t){return Object.keys(t).reduce(function(n,o){var r=t[o];return void 0!==r&&(null!==r&&~Xe.indexOf(o)?n[o]=e(r):Array.isArray(r)&&~Qe.indexOf(o)?n[o]=r:n[o]=r?1:0),n},{})}(t)).join("&")}catch(e){qe.error("[uploader.cloudInfo]: failed to serialize config for info request",e)}return n+"&version="+(p.a.uwVersion+"."+self.__uwBuild)+"&browser="+(He.browserName+"-"+He.browserVersion)+"&device="+(He.isMobile?He.mobileVendor+"-"+He.mobileModel:"desktop")+"&os="+(He.osName+"-"+He.osVersion)},Ke=function(e,t){var n=void 0;if(!ze){var o=e.cloudName;ze=!0,qe.log("[uploader]: about to fetch cloud info for cloud: "+o);var r=Ye(e);n=Object(S.getCloudInfo)(o,r).then(function(e){return ze=!1,qe.log("[uploader]: retrieved cloud info for cloud: "+o+": ",e),t[E.b.SET_UPLOADER_CLOUD_INFO]({cloudName:o,info:e}),e}).catch(function(){ze=!1})}return n||Promise.resolve(null)},Ze=this,$e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var Je,et,tt=Object(l.c)(),nt=function(e,t,n,o){if(!e.uploader.clearQueuesInProgress){var s=function(e,t){var n=be(t),o=be(e),r={},a=[];if(o!==n){var s=te(e),i=s&&s.pendingPreCalls,c=J(e);Object.keys(o).forEach(function(e){void 0!==n[e]&&o[e]===n[e]||i&&~s.ids.indexOf(e)||(a.push(e),r[e]=c[e])})}return{ids:a,files:r,hadPrevious:n&&Object.keys(n).length}}(e,t);s.ids.length&&n(r.UPLOADER_FILE_STATUS,{ids:s.ids,files:s.files}),s.hadPrevious&&(i=e,pe(t)&&!pe(i)&&o({event:a.QUEUES_END,info:{}}))}var i},ot=(Je=regeneratorRuntime.mark(function e(t,n,o,a){var s,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((s=Z(t)).onDevConsole||s.info&&s.info.cloudName===n.cloudName){e.next=6;break}return e.next=4,Ke(n,a);case 4:(i=e.sent)&&(tt.log("[uploader.stateProcessors]: received cloud info from server: ",i),o(r.UPLOADER_CLOUD_INFO,$e({},s,{info:i})));case 6:case"end":return e.stop()}},e,Ze)}),et=function(){var e=Je.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e,t,n,o){return et.apply(this,arguments)}),rt=function(e,t,n,o,a){var s,i,c,u,l,d,p,f,m,b,g,h,_,O,S,v,j,T,I,x,C,y,A,R,L,w,D,P,U,N,M,F,k;s=e,i=t,c=n.emit,u=z(i),l=z(s),!u&&l&&c(r.UPLOADER_READY),u&&u!==l&&c(r.UPLOADER_UPDATE_SETTINGS,l),nt(e,t,n.emit,o),function(e,t,n){if(se(e)>se(t)){var o=ue(e),a={source:void 0};o.source!==ue(t).source&&(a.source=o.source),o.options&&o.options.fileDialog&&(tt.log("[uploader.stateProcessors]: showing file dialog with show event"),n.showFileDialog()),tt.log("[uploader.stateProcessors]: received show event data ",a),n.emit(r.UPLOADER_SHOW,a)}}(e,t,n),d=e,p=t,f=n.emit,(m=ie(d)).counter>ie(p).counter&&(tt.log("[uploader.stateProcessors]: received client hide event with options: ",m.options),f(r.UPLOADER_CLIENT_HIDE)),b=e,g=t,h=n.emit,ce(b)>ce(g)&&(tt.log("[uploader.stateProcessors]: received client minimize event"),h(r.UPLOADER_CLIENT_MINIMIZE)),function(e,t,n,o){if(n.getHasRenderedUploadField()){var r=te(e),a=ne(e),s=ne(t),i=te(t),c=n.getLoadedQueueId();E=r,(!a&&E&&c!==E.id&&!E.pendingPreCalls||(d=r,p=i,(!(f=a)||d&&f.id===d.id)&&p&&d&&d.id===p.id&&(d.config!==p.config||(b=p,(m=d)&&(b&&!m.pendingPreCalls&&b.pendingPreCalls&&m.id===b.id||!m.pendingPreCalls&&(!b||m.id!==b.id)))))||(l=a,(u=s)&&l&&l.id===u.id&&!l.pendingPreCalls&&u.pendingPreCalls))&&(r?(ot(e,r.config,n.emit,o),tt.log("[uploader.stateProcessors]: new queue ("+r.id+") with new config is now active, will re-render upload field"),n.reRenderUploadField(r.id),n.loadFilesFromActiveQueue()):a&&(tt.log("[uploader.stateProcessors]: reloading files from pending running queue: "+a.id),n.loadFilesFromRunningQueue()))}var u,l,d,p,f,m,b,E}(e,t,n,a),_=e,O=t,S=n.emit,(v=le(_))!==le(O)&&(tt.log("[uploader.stateProcessors]: received new tags from client"),S(r.UPLOADER_CLIENT_TAGS,{tags:v})),j=e,T=t,I=n.emit,(x=de(j))!==de(T)&&(tt.log("[uploader.stateProcessors]: received new upload presets from client"),I(r.UPLOADER_CLIENT_UPLOAD_PRESETS,{uploadPresets:x})),C=t,y=n,A=a,R=fe(e),L=fe(C),!R||L&&R.files.length===L.files.length||(tt.log("[uploader.stateProcessors]: client uploads batch changed, new batch has "+R.files.length+" files"),1===R.files.length&&R.count>1?(y.emit(r.UPLOADER_BATCH_STARTED),y.emit(r.UPLOADER_FILE_STATUS,{ids:[],files:{},simulated:!0})):R.files.length===R.count&&(A[E.b.CLEAR_UPLOADER_CLIENT_BATCH](),y.addToQueue({files:R.files,cropInfo:R.cropInfo?R.cropInfo:[]}))),w=e,D=n.emit,P=a,(U=z(w))&&ot(w,U,D,P),N=e,M=t,F=n.emit,(k=$(N))!==$(M)&&F(r.UPLOADER_SUCCESS_COUNTER,{count:k})},at=n("../node_modules/lodash/fp.js"),st=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},it=this;var ct,ut=Object(l.b)(),lt=function(e){var t,n,r=e.getState,s=e.actions,i=function(){var e=r(),t=ie(e).options,n=!0;if(!t||!t.quiet){var o=re(e);(o=o&&o.length?o:oe(e))&&o.length&&(n=confirm("There are running uploads. Click OK to abort."))}return n},c=function(t,n,r){return t.map(function(t){var a=void 0;if(r[t]&&!r[t].done){var s=n[t];if(s){ut.log("[uploader.queuesManager]: aborting upload for file with id: "+t),a=s.abortUpload&&s.abortUpload();try{ye(t,!1,o.a.ABORTED,e)}catch(e){ut.error("[uploader.queuesManager]: finalize file upload with abort status failed! "+e.message,e)}}}var i=void 0;if(a){var c=a;i=new Promise(function(e){return c.error(function(e){ut.log("[uploader.queuesManager]: upload abort error occurred - ",e)}).then(e)})}else i=Promise.resolve();return i})},u=function(){var t=[];return H(r()).forEach(function(n){if(n.status!==o.a.QUEUE_STATUS.FINISHED){var r=c(n.ids,n.files,n.filesData);t=t.concat(r),e.actions[E.b.SET_UPLOADER_QUEUE_FINISHED]({id:n.queueId})}}),e.sendExternalEvent({event:a.ABORT,info:{ids:null,all:!0}}),Promise.all(t)},l=function(e){return 1===e.length&&"*"===e[0][0]},d=function(e){var t;return st({},e,((t={}).__uw_upload_file__=!0,t))},p=function(e){var t=[],n=e(r());return n&&n.length&&(ut.log("[uploader]: found ["+n.length+"] paused files from queue"),t=n.map(function(e){return d({id:e})})),t},f=function(e){var t=r(),n=ge(t)||"";return e.map(function(e){return d({id:e.id,name:Object(v.isString)(e.file)?e.file:e.file.name,publicId:e.publicId,folder:e.file.name?(t=n,o=e.file.name,r=dt(o).folder,r?t?t+"/"+r:r:t):n,customCoordinates:e.customCoordinates});var t,o,r})};return{getPausedFilesFromActiveQueue:function(){return p(oe)},getPausedFilesFromRunningQueue:function(){return p(re)},clearQueues:(t=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=i())){e.next=14;break}return ut.log("[uploader.queuesManager]: clear queues about to abort all active uploads"),e.prev=3,s[E.b.START_CLEAR_QUEUES](),e.next=7,u();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),ut.error("[uploader.queuesManager]: encountered error while aborting files for clearQueues: "+e.t0.message,e.t0);case 12:s[E.b.CLEAR_UPLOADER_QUEUES](),s[E.b.END_CLEAR_QUEUES]();case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}},e,it,[[3,9]])}),n=function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(){return n.apply(this,arguments)}),abortUploads:function(t){var n,o;l(t)?(ut.log("[uploader.queuesManager]: received request to abort ALL uploads"),u()):t.length&&(ut.log("[uploader.queuesManager]: received request to abort uploads with ids: ",t),n=t,o=X(r()),c(n,o.files,o.filesData),e.sendExternalEvent({event:a.ABORT,info:{ids:n.slice(),all:!1}}))},processRetries:function(t){var n=l(t);n?ut.log("[uploader.queuesManager]: received request to retry ALL uploads"):t.length&&ut.log("[uploader.queuesManager]: received request to retry uploads with ids: ",t),e.sendExternalEvent({event:a.RETRY,info:{ids:n?null:t,all:n}}),s[E.b.SET_UPLOADER_RETRY_FILES]({ids:t,retryAll:n})},addNewBatchData:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments[2],s=r(),i=Object(at.uniqueId)("uw-batch"),c=Ee(s),u=c&&c.publicId,l=c&&c.counter||2;!o&&t.files.length>1&&(ut.log("[uploader.queuesManager]: multiple uploads disabled -\n            taking first file from batch of: "+t.files.length),t.files=[t.files[0]]);var d=t.files.map(function(o,r){var s,d,p,f,m,b,E=Object(at.uniqueId)("uw-file"),g=u||"";return u&&(r||c&&c.counter)&&(g=u+"-"+l,l+=1),s=E,d=i,p=g,f=o,e.sendExternalEvent({event:a.FILE_ADDED,info:{id:s,batchId:d,publicId:p,file:Object(k.c)(f)?{lastModified:f.lastModified,lastModifiedDate:f.lastModifiedDate,name:f.name,size:f.size,type:f.type}:f}}),{id:E,file:o,partOfBatch:t.files.length>1,delayed:n,batchId:i,publicId:g,publicIdCounter:(m=g,b=l,m?b>2?b-1:0:-1),customCoordinates:function(e,t){var n=void 0;if(e.cropInfo&&e.cropInfo[t]&&e.cropInfo[t].pixelCrop){var o=e.cropInfo[t];100===o.width&&100===o.height||(n=o.pixelCrop)}return n}(t,r),imageDimensions:function(e,t){var n=[];if(e.cropInfo&&e.cropInfo[t]&&e.cropInfo[t].pixelCrop){var o=e.cropInfo[t];100===o.width&&100===o.height||(n=o.dimensions)}return n}(t,r)}});return e.actions[E.b.SET_UPLOADER_FILE_QUEUED]({files:d,pendingPreCalls:n}),u&&e.actions[E.b.SET_UPLOADER_PID_COUNTER]({publicId:u,counter:l}),f(d)},getBatchFilesData:f}},dt=function(e){var t=/^(.+[/])?([^/]+)$/.exec(e)||[];t.splice(0,1);var n=t[0],o=t[1];return{folder:n&&n.slice(0,-1),name:o}},pt=n("../node_modules/lodash/lodash.js"),ft=function(e,t){return 0===t?e:e.substr(0,1).toUpperCase()+e.substr(1)},mt=function(e){return Object.keys(e).reduce(function(t,n){return t[n.indexOf("_")>0?n.split("_").map(ft).join(""):n]=e[n],t},{})},bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Et=Object(l.b)(),gt=/^([^?&#\\%<>]|%[0-9a-fA-F]{2})*$/i,ht=["publicId","customCoordinates","folder"],_t=function(e,t){return bt({},e,{folder:t.folder||e.folder,public_id:t.publicId||void 0,custom_coordinates:t.customCoordinates?Object(c.getCoordinatesString)(t.customCoordinates):void 0})},Ot=function(e,t){return new Promise(function(n){var o,r,a,s,i,u,l=(o=e[0].id,a=(r=t).getUploadOptions(),s=Te(o,r)||{},i=a.tags.length?a.tags.join(","):void 0,u=a.uploadPreset||void 0,{timestamp:s.uploadSignatureTimestamp||Object(c.getTimestamp)(),tags:i,folder:s.folder||void 0,use_filename:s.useFilename,unique_filename:s.uniqueFilename,invalidate:s.invalidate,upload_preset:u||s&&s.uploadPreset||void 0,source:Object(c.getUploadSource)(K(r.getState()))}),d=null;d=function(e){var t=!1;if(e.length>1){var n=Object(pt.transform)(e,function(e,t){return ht.forEach(function(n){return t[n]&&Object(pt.set)(e,n+"."+t[n],t[n])})},{});for(var o in n)Object(pt.keys)(n[o]).length>1&&(t=!0)}return t}(e)?e.map(function(e){return _t(l,e)}):_t(l,e[0]),t.externalApi.requestPrepareParams(function(e){n({timestamp:l.timestamp,data:e})},{widgetId:t.getWidgetId(),request:d})})},St=function(e,t,n,o){var r,a,s=[t?(r=e,a=o,new Promise(function(e,t){Et.log("[uploader.batchHandler]: pre-batch handler is configured - will delay loading of batch"),a.externalApi.sendPreBatch(function(n){!0===(n=n||{}).cancel?t({cancel:!0}):e(n)},{widgetId:a.getWidgetId(),request:{files:r}})})):null,n?Ot(e,o):null];return Promise.all(s).then(function(t){!function(e,t,n){if(t){var o=t;Et.log("[uploader.batchHandler]: handling response for prepare request: ",o);var r=e.reduce(function(e,t,n){return n=o.data.length>1?n:0,e[t.id]=bt({timestamp:o.timestamp},mt(o.data[n])),e},{});n.actions[E.b.SET_UPLOADER_BATCH_PREPARED]({files:r})}}(e,t[1],o),o.actions[E.b.SET_UPLOADER_QUEUE_PRECALLS_PENDING]({files:e,pending:!1})}).catch(function(t){Et.log("[uploader.batchHandler]: pre-requests failed or cancelled - canceling batch!",t),o.actions[E.b.CANCEL_UPLOADER_FILES]({files:e}),o.notifyBatchCancelled()})},vt=((ct={})[o.a.BATCH_CANCEL_REASONS.MAX_EXCEEDED]=function(e,t,n){return!t.maxFiles||e.files.length<=t.maxFiles-$(n.getState())},ct[o.a.BATCH_CANCEL_REASONS.INVALID_PUBLIC_ID]=function(e,t,n){var o,r=!0;if(t.showAdvancedOptions){var a=Q(n.getState()).publicId;o=a,r=Object(v.isBlank)(o)||gt.test(o)}return r},ct),jt=function(e){return{handleBatchAdded:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Et.log("[uploader.batchHandler]: "+(n?"existing":"new")+" upload batch was added - ",t);var o,r,a,s,i=e.getLatestConfig(),c=!1,u=!1,l=null,d=n||(o=t,r=i,a=e,{isValid:!(s=Object.keys(vt).find(function(e){return!vt[e](o,r,a)})),reason:s});if(!0===d||d.isValid){var p=ae(e.getState()).id,f=i.usePreBatchCallback,m=i.requirePrepareParams,b=n||!e.getDelayPrepareAfterProcessing(t.cropInfo&&t.cropInfo[0]);c=b&&(f||m);var g=n?t.files:e.queuesManager.addNewBatchData(t,c,i.multiple);if(b?(n&&(Et.log("[uploader.batchHandler]: setting queue as pending for existing batch"),e.actions[E.b.SET_UPLOADER_QUEUE_PRECALLS_PENDING]({files:g,pending:!0})),St(g,f,m,e).catch(function(e){Et.log("[uploader.batchHandler]: pre flows handling failed with: ",e)})):Et.log("[uploader.batchHandler]: not running prebatch or prepare now because of potential change in params due to image processing"),t.files=g,!c){var h=e.getLoadedQueueId();c=!h||h!==p}}else u=!0,l=d.reason;return{result:!(c||u),cancelled:u,reason:l}}}},Tt=this,It=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var xt=Object(l.c)(),Ct=function(e){var t,n,s=e.getState,i=e.actions,u=e.externalApi,l=void 0,f=null,m=null,b=null,g=null,h=null,_=function(e){e=e||{};var t=new T.EventEmitter;return e.emit=function(n){for(var o=arguments.length,r=Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return Object(j.b)(function(){return t.emit.apply(t,[n].concat(r))},1),e},e.on=function(n,o,r){return t.addListener(n,o,r),e},e.once=function(n,o,r){return t.once(n,o,r),e},e.off=function(n){return t.removeAllListeners(n),e},e}(),O=function(){var e;return l||(e=s(),l=e.uploader.id),l},S=function(e){return u.emitEvent(It({widgetId:O()},e))},I=lt(It({},e,{sendExternalEvent:S})),x=function(e){return H(s()).find(function(t){return t.queueId===e})},C=function(){return h},y=function(e){return I.abortUploads(e)},A=function(e){if(m){var t=Object(c.getUploadFieldFromContainer)(m.container);e.files.forEach(function(e){Object(j.b)(function(){try{t.fileupload("add",{files:[e]})}catch(e){xt.warn("[uploader]: received error when using 'add' method of file upload widget",e),Object(d.e)(e)}},10)})}},L=function(){return C()?x(C()).config:z(s())},D=function(){return Q(s())},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2];_.emit(r.UPLOADER_BATCH_CANCELLED,{reason:e,info:n}),S({event:a.QUEUES_END,info:{}}),t&&S({event:a.BATCH_CANCELED,info:{reason:e}})},U=function(e){var t=L();return!(!t.requirePrepareParams||!e||t.validateMaxWidthHeight||!t.maxImageWidth&&!t.maxImageHeight)},F=jt(It({},e,{abortUploads:y,getLoadedQueueId:C,queuesManager:I,getLatestConfig:L,getWidgetId:O,getUploadOptions:D,getDelayPrepareAfterProcessing:U,notifyBatchCancelled:function(){return P(o.a.BATCH_CANCEL_REASONS.INTEGRATION)},actions:i})),k=function(e,t){return e.cancelled?(xt.log("[uploader]: batch handling cancelled because of: "+(e.reason||"")),P(e.reason,!0,t)):(_.emit(r.UPLOADER_BATCH_STARTED),S({event:a.QUEUES_START,info:{}})),e.result},B=function(e){var t,n,o,r=L();return r.cropping&&!((o=e).files&&o.files.length&&!Object(v.isString)(o.files[0])&&o.files[0].type&&p.a.crop.blackList.find(function(e){return e.test(o.files[0].type)}))&&(n=r,!((t=e).files&&t.files.length&&Object(v.isString)(t.files[0])&&(n.secure&&/^http:\/\//.test(t.files[0])||!n.secure&&/^https:\/\//.test(t.files[0]))))&&!(e.cropInfo&&e.cropInfo.length)},G=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return B(e)?(t=e,_.emit(r.UPLOADER_CROP_STARTED,t),!1):function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=F.handleBatchAdded(e,n),r=k(o,e);return t&&r&&A(e),r}(e,n,o)},V=function(e){return m&&m.updatePreparedParams(e)},W=(t=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.clearQueues();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,Tt)}),n=function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(){return n.apply(this,arguments)});return It({},_,{isShowingOnStart:function(){return s().uploader.showOnStart},getConfig:function(){return L().asMutable({deep:!0})},isReady:function(){return!!L()},getLoadedQueueId:C,clearQueues:W,addToQueue:function(e){G(e)?(xt.log("[uploader]: received info for programmatically added upload: ",e),A(e)):xt.log("[uploader]: delaying addition of files to queue as it will be loaded once the upload field is re-rendered")},renderUploadField:function(t,n){if(!m){xt.log("[uploader]: rendering upload field");var o=ae(s()),r=o.config.asMutable();h=o.id,m=function(e,t,n){w.log("[uploader.uploadField]: initializing upload field with options: ",n);var o=n,r=R()(e);return M(Object(c.getUploadFieldFromContainer)(r),t,o),{update:function(e){o=e;var n=Object(c.getUploadFieldFromContainer)(r);n.fileupload("destroy").removeData(),M(n,t,e)},updatePreparedParams:function(e){return N(r,o,e)},container:r}}(t,n,r),b=Ge(m.container,(a=r,It({widgetId:O(),getUploadOptions:D,sendExternalEvent:S,getDelayPrepareAfterProcessing:U,handleUpload:G,updatePreparedParams:V},e,{config:a}))),f=t,n}var a},abortUploads:y,loadFilesFromActiveQueue:function(){var e=I.getPausedFilesFromActiveQueue();e&&e.length&&A({files:e})},loadFilesFromRunningQueue:function(){var e=I.getPausedFilesFromRunningQueue();e&&e.length&&A({files:e})},showFileDialog:function(){f&&Object(c.getUploadFieldFromContainer)(f).trigger("click")},processStateChange:function(e,t){var n,o,r;g||(n=this,o=S,r=i,g=function(e,t){return rt(e,t,n,o,r)}),g(e,t)},reRenderUploadField:function(e){var t=x(e);m&&m.update(t.config.asMutable()),b&&b.useCustomAddMethod(),h=t.queueId},getHasRenderedUploadField:function(){return!!f},setCurrentSource:function(e){i[E.b.SET_UPLOADER_CURRENT_SOURCE]({source:e}),S({event:a.SOURCE_CHANGED,info:{source:e}})},retrieveClientTags:function(t){e.externalApi.requestTags({widgetId:O(),prefix:t})},retrieveClientUploadPresets:function(){e.externalApi.requestUploadPresets({widgetId:O()})},setUploadTags:function(e){i[E.b.SET_UPLOADER_TAGS]({tags:e}),S({event:a.TAGS,info:{tags:e}})},setUploadPreset:function(e){i[E.b.SET_UPLOADER_UPLOAD_PRESET]({uploadPreset:e}),S({event:a.UPLOAD_PRESETS,info:{uploadPreset:e}})},setUploadPublicId:function(e){i[E.b.SET_UPLOADER_PUBLICID]({id:e}),S({event:a.PUBLICID,info:{id:e}})},retryUploads:function(e){I.processRetries(e)},hide:function(){e.externalApi.sendHide({widgetId:O()})},setWidgetViewType:function(e){S({event:a.WIDGET_VIEW_TYPE_CHANGE,info:{type:e}})},sendShowCompleted:function(e){var t=Y(s()),n=Object.keys(t).reduce(function(n,o){return~e.indexOf(o)?n.concat(t[o]):n},[]);S({event:a.SHOW_COMPLETED,info:{items:n}})},getStore:function(){return e.store},uploadFieldClick:function(){m&&Object(c.getUploadFieldFromContainer)(m.container).click()}})},yt=n("./uploader/store/index.js"),At=n("./services/imagesPrefetcher.js"),Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt=Object(l.b)(),wt=function(e,t,n){var o=R.a.Deferred(),r=e.files[0];return"object"===(void 0===r?"undefined":Rt(r))?e.img?n(e.img,o):o.resolveWith(t,[e]):"string"==typeof r&&Object(At.b)(r,r).then(function(r){r.success?n(r.img,o):o.resolveWith(t,[e])}),o.promise()},Dt=function(e,t){return wt(t,e,function(n,o){var r,a,s,i,c=n.naturalWidth,u=n.naturalHeight,l=t.imageMaxWidth,d=t.imageMaxHeight;l&&c>l||d&&u>d?(Lt.log("[bluimp.extensions]: validation check on width/height failed - image:("+c+"/"+u+") max:("+l+"/"+d+")"),t.files.error=!0,t.files[0]={error:(r=c,a=u,s=l,i=d,Object(F.b)("uploader.errors.max_dimensions_validation",{width:r,height:a,maxWidth:s||Object(F.b)("uploader.errors.unavailable"),maxHeight:i||Object(F.b)("uploader.errors.unavailable")}))},o.rejectWith(e,[t])):o.resolveWith(e,[t])})},Pt=function(e,t){return wt(t,e,function(n,o){var r,a,s,i,c,u,l,d=n.naturalWidth,p=n.naturalHeight,f=t.imageMinWidth,m=t.imageMinHeight;if(a=m,s=!0,(r=f)&&d<r&&(s=!1),s&&a&&p<a&&(s=!1),s)o.resolveWith(e,[t]);else{var b=(i=d,c=p,u=t.imageMinWidth,l=t.imageMinHeight,Object(F.b)("uploader.errors.min_dimensions_validation",{width:i,height:c,minWidth:u||Object(F.b)("uploader.errors.unavailable"),minHeight:l||Object(F.b)("uploader.errors.unavailable")}));t.files.error=!0,t.files[0]={error:b},o.rejectWith(e,[t])}})},Ut=function(){R.a.widget("blueimp.fileupload",R.a.blueimp.fileupload,{processActions:{debounce:function(e){return t=this,n=e,o=R.a.Deferred(),setTimeout(function(){o.resolveWith(t,[n])},1e3),o.promise();var t,n,o},validateImageMinSize:function(e){return Pt(this,e)},validateMaxWidthHeight:function(e){return Dt(this,e)}}})},Nt=Object(l.c)(),Mt=Object(l.c)(),Ft=function(e){var t=null;return e.pmHost?(Mt.log("[uploaderInitializer]: awaiting for init msg from external code"),t=function(e){Nt.log("[uploader]: creating uploader instance with options: ",e);var t=Object(yt.default)(),n=Object(E.a)(t.dispatch);n[E.b.SET_UPLOADER_QS_PARAMS]({params:e.qsParams});var o,r,a,s=e.createExternalInterface({qsParams:e.qsParams,actions:n}),i=Ct({actions:n,getState:t.getState,externalApi:s,store:t});return o=t,r=i.processStateChange.bind(i),a=o.getState(),o.subscribe(function(){var e=o.getState();if(e!==a){var t=a;a=e,r(e,t)}}),Ut(),i}({createExternalInterface:O,qsParams:e,appConfig:p.a})):Mt.warn("[uploaderInitializer]: can't create uploader without pmHost param! - qs = "+self.location.search),t},kt=function(){var e,t,n=void 0,o={debug:(e=Object(u.parse)(self.location.search,{ignoreQueryPrefix:!0})).debug,cloudName:e.cloudName,authFlow:e.authFlow,pmHost:e.pmHost};return o.debug&&Object(l.d)(l.a.LOG),Mt.log("[uploaderInitializer]: loaded qs params : ",o),o.authFlow?(Mt.log("[uploaderInitializer]: initializing dummy uploader for auth flow"),n={on:function(e,t){e===r.UPLOADER_READY&&t()},renderUploadField:t=function(){},isShowingOnStart:function(){return!1},setCurrentSource:t,getStore:function(){return{}},getConfig:function(){return{cloudName:"!!dummy_uploader!!"}}}):(Mt.log("[uploaderInitializer]: initializing uploader instance from post message"),n=Ft(o)),n},Bt=n("./uploader/configParser.js");n.d(t,"EVENT_TYPES",function(){return r}),n.d(t,"MESSAGE_TYPES",function(){return s}),n.d(t,"EXT_EVENTS",function(){return a}),n.d(t,"consts",function(){return o.a}),n.d(t,"defaults",function(){return i.a}),n.d(t,"utils",function(){return c}),n.d(t,"initializeUploader",function(){return kt}),n.d(t,"widgetParams",function(){return L}),n.d(t,"configParser",function(){return Bt})},"./uploader/store/actions.js":function(e,t,n){"use strict";n.d(t,"b",function(){return r});var o=n("./common/actionsBase.js"),r={SET_UPLOADER_CONFIG:"SET_UPLOADER_CONFIG",SET_UPLOADER_CLOUD_INFO:"SET_UPLOADER_CLOUD_INFO",SET_UPLOADER_QS_PARAMS:"SET_UPLOADER_QS_PARAMS",SET_UPLOADER_CURRENT_SOURCE:"SET_UPLOADER_CURRENT_SOURCE",SET_UPLOADER_BATCH_PREPARED:"SET_UPLOADER_BATCH_PREPARED",SET_UPLOADER_FILE_PROGRESS:"SET_UPLOADER_FILE_PROGRESS",SET_UPLOADER_FILE_PAUSED:"SET_UPLOADER_FILE_PAUSED",SET_UPLOADER_QUEUE_RUNNING_FOR_FILE:"SET_UPLOADER_QUEUE_RUNNING_FOR_FILE",SET_UPLOADER_FILE_DONE:"SET_UPLOADER_FILE_DONE",SET_UPLOADER_FILE_DATA_METHODS:"SET_UPLOADER_FILE_DATA_METHODS",SET_UPLOADER_FILE_PREVIEW:"SET_UPLOADER_FILE_PREVIEW",SET_UPLOADER_FILE_COORDINATES:"SET_UPLOADER_FILE_COORDINATES",SET_UPLOADER_SHOW:"SET_UPLOADER_SHOW",SET_UPLOADER_HIDE:"SET_UPLOADER_HIDE",SET_UPLOADER_MINIMIZE:"SET_UPLOADER_MINIMIZE",SET_UPLOADER_QUEUE_FINISHED:"SET_UPLOADER_QUEUE_FINISHED",SET_UPLOADER_PUBLICID:"SET_UPLOAD_PUBLICID",SET_UPLOADER_TAGS:"SET_UPLOAD_TAGS",SET_UPLOADER_UPLOAD_PRESET:"SET_UPLOAD_UPLOAD_PRESET",SET_UPLOADER_RETRIEVED_TAGS:"SET_UPLOADER_RETRIEVED_TAGS",SET_UPLOADER_RETRIEVED_UPLOAD_PRESETS:"SET_UPLOADER_RETRIEVED_UPLOAD_PRESETS",SET_UPLOADER_RETRY_FILES:"SET_UPLOADER_RETRY_FILES",SET_UPLOADER_FILE_QUEUED:"SET_UPLOADER_FILE_QUEUED",SET_UPLOADER_ADD_CLIENT_UPLOAD:"SET_UPLOADER_ADD_CLIENT_UPLOAD",SET_UPLOADER_PID_COUNTER:"SET_UPLOADER_PID_COUNTER",SET_UPLOADER_QUEUE_PRECALLS_PENDING:"SET_UPLOADER_QUEUE_PRECALLS_PENDING",CLEAR_UPLOADER_QUEUES:"CLEAR_UPLOADER_QUEUES",CLEAR_UPLOADER_CLIENT_BATCH:"CLEAR_UPLOADER_CLIENT_BATCH",CANCEL_UPLOADER_FILES:"CANCEL_UPLOADER_FILES",START_CLEAR_QUEUES:"START_CLEAR_QUEUES",END_CLEAR_QUEUES:"END_CLEAR_QUEUES"};t.a=Object(o.d)(r,{})},"./uploader/store/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("../node_modules/redux/es/redux.js"),a=n("../node_modules/redux-thunk/lib/index.js"),s=n.n(a),i=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),c=n.n(i),u=n("../node_modules/lodash/fp.js"),l=n("../node_modules/voca/index.js"),d=n("../node_modules/fbjs/lib/shallowEqual.js"),p=n.n(d),f=n("./common/logger.js"),m=n("./common/reducerBase.js"),b=n("./utils/seamlessUtils.js"),E=n("./uploader/common/utils.js"),g=n("./uploader/configParser.js"),h=n("./uploader/common/consts.js"),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},O=n("./uploader/store/actions.js"),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},v=Object(f.b)(),j=/(dev|demo)?\.?cloudinary\.com$/,T=/^https:\/\//,I=function(e,t){var n=t.fileQueueIndex[e];if(!~n)throw new Error("UPLOADER.REDUCER - impossible state transition! no queue in store contains file with id: "+e);return n},x=function(e,t){var n,o=t.file,r=0,a="",s=null;return Object(l.isString)(o)?s=Object(E.getFileNameFromUrl)(o):(s=o.name,r=o.size,a=o.type),n={id:e,name:s,size:r,type:a,folder:t.folder,partOfBatch:t.partOfBatch,paused:t.delayed,batchId:t.batchId,publicId:t.publicId,publicIdCounter:t.publicIdCounter,camera:!!o.camera,customCoordinates:t.customCoordinates,imageDimensions:t.imageDimensions},c()(_({id:"",batchId:"",name:"",size:0,type:"",folder:"",imageDimensions:[0,0],status:null,progress:0,done:!1,failed:!1,aborted:!1,paused:!1,partOfBatch:!1,publicId:"",preparedParams:{},camera:!1,customCoordinates:null,coordinatesResize:!1},n))},C=function(e,t){var n=e;return T.test(e)||(n=!0===t.showInsecurePreview?n:null),n},y=function(e,t){return{getPreviewObject:function(){return Object(l.isString)(e)?{url:C(e,t)}:{preview:e.preview,url:C(e.file,t)}},getFileObject:function(){return Object(l.isString)(e)?e:e.file||e}}},A=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o=o||I(t,e);var r,a,s,i,c=e.queues[o];c?(c=c.merge({filesData:(r={},r[t]=S({},n,{statusText:(a=n,s=a.status,i="",s&&(Object(l.isString)(s)&&s!==h.a.ABORTED?i=s:s.error&&s.error.message&&(i=s.error.message)),i)}),r)},{deep:!0}),e=Object(b.c)(e,["queues"],o,1,c)):v.log("[uploader.reducer]: setFileData - couldnt find queue for file id: "+t,n);return e},R=function(e,t,n,o){return e.setIn(["queues",t,"files",n,"getPreviewObject"],o)},L=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(e=A(e,t,n,o)).setIn(["fileVersions",t],e.fileVersions[t]+1)},w=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=S({sameConfig:!(n.config||!e),config:e?e.config:null},n),c()(_({queueId:Object(u.uniqueId)("u-queue"),config:null,sameConfig:!1,files:{},filesData:{},ids:[],status:h.a.QUEUE_STATUS.NONE,pendingPreCalls:!1},t))},D=function(e,t,n,o){return(o=Object(b.c)(o,"ids",o.ids.indexOf(t),1).asMutable()).files=c.a.without(o.files,t),o.filesData=c.a.without(o.filesData,t),e=Object(b.c)(e,["queues"],n,1,o),Object(b.d)(e,"fileQueueIndex",t)},P=function(e,t,n){var o,r,a,s,i,c,u,l=e.id,d=x(l,e),p=n.queues.findIndex(function(e){return e.status===h.a.QUEUE_STATUS.NONE});if(~p)o=n,r=l,a=d,s=y(e.file,n.queues[p].config),i=t,c=p,u=(u=(u=(u=o.queues[c]).setIn(["filesData",r],a)).setIn(["files",r],s)).set("pendingPreCalls",i),u=Object(b.b)(u,"ids",r),n=o.setIn(["queues",c],u);else{var f,m,E=n.queues.length,g=n.queues[E-1];if(!g)throw new Error("UPLOADER.REDUCER - impossible state transition! no queue in store when adding a new file");n=Object(b.b)(n,"queues",w(g,{filesData:(f={},f[l]=d,f),files:(m={},m[l]=y(e.file,g.config),m),ids:[l],pendingPreCalls:t})),p=E}return n.setIn(["fileQueueIndex",l],p).setIn(["fileVersions",l],0)},U=function(e,t,n){var o=e.queues.length,r={},a={},s=[],i={},c={};n.forEach(function(n){var u,l=e.queues[t];r[n]=(u=l.filesData[n],S({},u,{status:null,progress:0,done:!1,failed:!1,aborted:!1,paused:!1})),a[n]=l.files[n],s.push(n),i[n]=o,c[n]=0,e=D(e,n,t,l)});var u=e.queues[t];return(e=Object(b.b)(e,"queues",w(u,{filesData:r,files:a,ids:s}))).merge({fileQueueIndex:i},{deep:!0}).merge({fileVersions:c},{deep:!0})},N=function(e,t){return""===e||e&&t.uploadPublicId!==e?t.set("uploadPublicId",e||""):t},M=function(e,t){return e&&!p()(t.uploadTags,e)?t.set("uploadTags",e):t},F=function(e,t){return t.set("clearQueuesInProgress",e)},k=Object(m.a)(c()({__record:"UploaderRecord",id:null,showOnStart:!1,qsParams:null,cloudInfo:null,source:null,showCounter:0,minimizeCounter:0,showOptions:null,hideCounter:0,hideOptions:null,queues:[],retrievedTags:[],retrievedUploadPresets:[],uploadPublicId:null,uploadTags:[],uploadPreset:null,clientUploadBatch:null,fileQueueIndex:{},fileVersions:{},publicIdCounters:{},onDevConsole:!1,onConsole:!1,successCounter:0,clearQueuesInProgress:!1,cropSources:[]}),((o={})[O.b.SET_UPLOADER_CONFIG]=function(e,t){var n=t.payload,o=e.queues.length,r=e.id||n.config.widgetId||Object(u.uniqueId)("uw"),a=n.config.showOnStart,s=o?{}:e.qsParams,i=null,c=Object(g.configMerger)({},n.config,s);return o&&(i=e.queues[o-1],c=Object(g.configMerger)({},i.config,c)),c=Object(g.default)(c),e=!o||e.queues[o-1].ids.length?Object(b.b)(e,"queues",w(i,{config:c})):e.setIn(["queues",o-1,"config"],c),e=N(c.publicId,e),(e=M(c.tags,e)).merge({id:r,showOnStart:a})},o[O.b.SET_UPLOADER_CLOUD_INFO]=function(e,t){var n=t.payload;return e.set("cloudInfo",S({cloudName:n.cloudName},n.info))},o[O.b.SET_UPLOADER_QS_PARAMS]=function(e,t){var n=t.payload,o=n.params.pmHost.match(j);return o&&"demo"===o[1]&&(o=null),e.merge({qsParams:n.params,onConsole:!!o,onDevConsole:!(!o||!o[1])})},o[O.b.SET_UPLOADER_CURRENT_SOURCE]=function(e,t){var n=t.payload;return e.set("source",n.source)},o[O.b.SET_UPLOADER_FILE_QUEUED]=function(e,t){var n=t.payload;return n.files.forEach(function(t){e=P(t,n.pendingPreCalls,e)}),e},o[O.b.SET_UPLOADER_BATCH_PREPARED]=function(e,t){var n=t.payload;return Object.keys(n.files).forEach(function(t){e=A(e,t,{preparedParams:n.files[t]})}),e},o[O.b.SET_UPLOADER_SHOW]=function(e,t){var n=t.payload;return e.merge({showCounter:e.showCounter+1,showOptions:n?n.options:null,source:n&&n.source||e.source})},o[O.b.SET_UPLOADER_MINIMIZE]=function(e){return e.set("minimizeCounter",e.minimizeCounter+1)},o[O.b.SET_UPLOADER_QUEUE_RUNNING_FOR_FILE]=function(e,t){var n=t.payload,o=e.queues.findIndex(function(e){return e.status===h.a.QUEUE_STATUS.RUNNING});if(~o){if(!~e.queues[o].ids.indexOf(n.id))throw new Error("UPLOADER.REDUCER - impossible state transition! cant set more than one running queue at a time. file id = "+n.id)}else{var r=I(n.id,e);e=e.setIn(["queues",r,"status"],h.a.QUEUE_STATUS.RUNNING)}return e},o[O.b.SET_UPLOADER_FILE_DONE]=function(e,t){var n=t.payload,o=I(n.id,e);e=L(e,n.id,{status:n.success?"success":n.result,uploadInfo:n.success?n.result:null,aborted:n.result===h.a.ABORTED,failed:!n.success,done:!0,paused:!1}),function(e,t,n,o){var r=!1;if(e&&e.secure_url&&"image"===e.resource_type&&!/.pdf$/.test(e.secure_url)){var a=t.queues[n].files[o].getPreviewObject();r=!a||!a.preview&&!a.img}return r}(n.result,e,o,n.id)&&(e=R(e,o,n.id,function(){return{url:n.result.secure_url}}));var r=e.queues[o];return Object.values(r.filesData).find(function(e){return!e.done})||(e=e.setIn(["queues",o,"status"],h.a.QUEUE_STATUS.FINISHED)),n.success&&(e=e.set("successCounter",e.successCounter+1)),e},o[O.b.SET_UPLOADER_FILE_PROGRESS]=function(e,t){var n=t.payload;return L(e,n.id,{progress:n.progress,paused:!1})},o[O.b.SET_UPLOADER_HIDE]=function(e,t){var n=t.payload;return e.merge({hideOptions:n.options||null,hideCounter:e.hideCounter+1})},o[O.b.CLEAR_UPLOADER_QUEUES]=function(e){var t=e.queues[e.queues.length-1];return e.merge({queues:[w(t)],fileQueueIndex:{},fileVersions:{},publicIdCounters:{},successCounter:0,uploadPublicId:t&&t.config?t.config.publicId||null:null,uploadTags:t&&t.config?t.config.tags||[]:[],uploadPreset:null})},o[O.b.SET_UPLOADER_RETRIEVED_TAGS]=function(e,t){var n=t.payload;return e.set("retrievedTags",n.tags||[])},o[O.b.SET_UPLOADER_RETRIEVED_UPLOAD_PRESETS]=function(e,t){var n=t.payload;return e.set("retrievedUploadPresets",n.uploadPresets||[])},o[O.b.SET_UPLOADER_PUBLICID]=function(e,t){var n=t.payload;return N(n.id,e)},o[O.b.SET_UPLOADER_TAGS]=function(e,t){var n=t.payload;return M(n.tags,e)},o[O.b.SET_UPLOADER_UPLOAD_PRESET]=function(e,t){var n=t.payload;return e.set("uploadPreset",n.uploadPreset)},o[O.b.SET_UPLOADER_QUEUE_FINISHED]=function(e,t){var n,o=t.payload,r=(n=o.id,e.queues.findIndex(function(e){return e.id===n}));return~r?e.setIn(["queues",r,"status"],h.a.QUEUE_STATUS.FINISHED):e},o[O.b.SET_UPLOADER_RETRY_FILES]=function(e,t){var n=t.payload,o=Object.keys(e.fileQueueIndex).reduce(function(t,o){if(n.retryAll||~n.ids.indexOf(o)){var r=e.fileQueueIndex[o];e.queues[r].filesData[o].failed&&(t[r]=t[r]?t[r].concat(o):[o])}return t},{});return Object.keys(o).forEach(function(t){e=U(e,parseInt(t),o[t])}),e},o[O.b.SET_UPLOADER_ADD_CLIENT_UPLOAD]=function(e,t){var n=t.payload;return e=e.clientUploadBatch?Object(b.b)(e,["clientUploadBatch","files"],n.file):e.set("clientUploadBatch",{files:[n.file],count:n.count})},o[O.b.CLEAR_UPLOADER_CLIENT_BATCH]=function(e){return e.set("clientUploadBatch",null)},o[O.b.SET_UPLOADER_FILE_PAUSED]=function(e,t){var n=t.payload;return L(e,n.id,{paused:!0})},o[O.b.SET_UPLOADER_FILE_DATA_METHODS]=function(e,t){var n,o,r,a,s,i,c=t.payload;return n=e,o=c.id,r=c.methods,s=I(o,n),i=n.queues[s].merge({files:(a={},a[o]=r,a)},{deep:!0}),Object(b.c)(n,["queues"],s,1,i)},o[O.b.SET_UPLOADER_FILE_PREVIEW]=function(e,t){var n,o=t.payload,r=o.id,a=I(r,e);if((o.preview||o.img)&&(e=L(e,r,{dimensions:(n=o,n.preview&&n.preview.width?[n.preview.width,n.preview.height]:[n.img.width,n.img.height])},a)),o.img){var s={img:o.img};e=R(e,a,r,function(){return s})}return e},o[O.b.SET_UPLOADER_PID_COUNTER]=function(e,t){var n=t.payload;return e.setIn(["publicIdCounters",n.publicId],n.counter)},o[O.b.SET_UPLOADER_QUEUE_PRECALLS_PENDING]=function(e,t){var n=t.payload,o=I(n.files[0].id,e);if(!n.pending&&e.queues[o].pendingPreCalls){var r=e.queues[o].ids,a=e.fileVersions,s=r.reduce(function(e,t){return e[t]=a[t]+1,e},{});e=e.merge({fileVersions:s},{deep:!0})}return e.setIn(["queues",o,"pendingPreCalls"],n.pending)},o[O.b.CANCEL_UPLOADER_FILES]=function(e,t){var n,o,r,a,s,i,c,u,l=t.payload,d=I(l.files[0].id,e);return n=e,o=l.files,r=d,i=n.queues[r].filesData[o[0].id],c=i.publicIdCounter,u=void 0,~c&&(c?(a=i.publicId,s=c,u=a.substr(0,a.length-(1+s.toString().length))):u=i.publicId,n=n.setIn(["publicIdCounters",u],c)),e=n,l.files.forEach(function(t){var n,o,r,a;n=e,o=t.id,r=d,a=e.queues[d],n=D(n,o,r,a),e=Object(b.d)(n,"fileVersions",o)}),e},o[O.b.START_CLEAR_QUEUES]=function(e){return F(!0,e)},o[O.b.END_CLEAR_QUEUES]=function(e){return F(!1,e)},o[O.b.SET_UPLOADER_FILE_COORDINATES]=function(e,t){var n=t.payload;return L(e,n.id,{customCoordinates:n.customCoordinates,coordinatesResize:n.coordinatesResize})},o)),B=Object(f.b)(),G=[s.a,function(e){return function(t){return function(n){var o=void 0,r=!1;if(B.getLevel()===f.a.LOG)try{var a=e.getState();o=t(n);var s=e.getState();B.groupCollapsed("Uploader Store Log For -> "+n.type),r=!0,B.log("%c dispatched action TYPE - "+n.type,"color:#057aff;"),n.payload&&B.log("%c dispatched action PAYLOAD - ","color:#20b832;",n.payload),s!==a?(B.log("previous state - ",a.uploader),B.log("next state - ",s.uploader)):(B.log("%c state hasn't changed after action","color:#5b616a"),B.log("%c state - ","color:#5b616a",s.uploader))}catch(e){B.warn("[Store Logger] failed to log store action details",e)}return r&&B.groupEnd(),o||t(n)}}}],H=Object(r.createStore)(Object(r.combineReducers)({uploader:k}),r.applyMiddleware.apply(void 0,G));t.default=function(){return H}},"./uploader/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{uploader:{filesize:{na:"N/A",b:"{{size}} Bytes",k:"{{size}} KB",m:"{{size}} MB",g:"{{size}} GB",t:"{{size}} TB"},errors:{file_too_large:"File size ({{size}}) exceeds maximum allowed ({{allowed}})",max_dimensions_validation:"Image dimensions ({{width}}X{{height}}) are bigger than the maximum allowed: ({{maxWidth}}X{{maxHeight}})",min_dimensions_validation:"Image dimensions ({{width}}X{{height}}) are smaller than the minimum required: ({{minWidth}}X{{minHeight}})",unavailable:"NA"}}}}}},"./utils/binaryToFile.js":function(e,t,n){"use strict";var o=n("./utils/domUtils.js"),r=this;var a,s,i=function(e){if(!e.indexOf("data:")){var t=e.match(/.*,(.*)/);e=t&&t[1]||e,e=atob(e)}return e},c=function(e,t){return new Blob([e],{type:t.type})};t.a=(a=regeneratorRuntime.mark(function e(t,n){var a,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i(t),a=new Uint8Array(t.length),s=0;s<t.length;s++)a[s]=t.charCodeAt(s);u=void 0;try{u=Object(o.e)()?c(a,n):(r=n,new File([a],r.name,{type:r.type,lastModified:r.lastModified}))}catch(e){u=c(a,n)}return e.abrupt("return",u);case 6:case"end":return e.stop()}var r},e,r)}),s=function(){var e=a.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e,t){return s.apply(this,arguments)})},"./utils/camera.js":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return a});var o={PermissionDeniedError:"PERMISSION_DENIED",DevicesNotFoundError:"NO_DEVICE",Unknown:"UNKNOWN"},r=function(e){return o[e.name]||o.Unknown},a=function(){return self.navigator.mediaDevices&&self.navigator.mediaDevices.getUserMedia||self.navigator.getUserMedia};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return self.navigator.mediaDevices&&self.navigator.mediaDevices.getUserMedia?self.navigator.mediaDevices.getUserMedia(e).catch(function(e){return Promise.reject({reason:r(e)})}):new Promise(function(t,n){self.navigator.getUserMedia(e,t,function(e){n({reason:r(e)})})})}},"./utils/colorUtils.js":function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"a",function(){return _});var o=n("../node_modules/voca/index.js"),r=(n.n(o),n("../node_modules/css-color-names/css-color-names.json")),a=n.n(r),s=n("../node_modules/wcag-contrast/index.mjs"),i=n("../node_modules/rgb/index.js"),c=n.n(i),u=[0,0,0,1],l=[255,255,255,1],d=Object.freeze({AA:"AA",AAA:"AAA",F:"F"}),p=Math.round,f=Math.max,m=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=a.a[e]||e,c()(e,t)},b=function(e){return e.length<4||e[3]>=1},E=function(e,t){var n=e.slice();if(!b(n)){for(var o=n[3],r=0;r<3;r++)n[r]=n[r]*o+t[r]*t[3]*(1-o);n[3]=o+t[3]*(1-o)}return n},g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Object(o.isString)(e)||!Object(o.isString)(t))throw new Error("getContrastRating - color values must be strings");var r,a,i,c,g,h,_,O,S,v,j,T,I=m(e),x=m(t),C=void 0;return b(x)?C=Object(s.b)(I,x):(r=I,i=E(a=x,u),c=E(a,l),g=Object(s.b)(r,i),h=Object(s.b)(r,c),_=f(g,h),O=Object(s.a)(r),S=Object(s.a)(i)>O?g:Object(s.a)(c)<O?h:1,C=p((S+_)/2)),v=C,j=n,T=d.F,v>=7?T=d.AAA:v>=4.5?T=j?d.AAA:d.AA:j&&v>=2.6&&(T=d.AA),T},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return g(e,t,n)!==d.F},_=function(e){var t=!1;try{t=!!m(e)}finally{}return t}},"./utils/domUtils.js":function(e,t,n){"use strict";var o=n("../node_modules/mobile-detect/mobile-detect.js"),r=n.n(o),a=function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=(r=r||self).document.createElement(e);if(t=t||{},n&&(t.class=n),t){var s=t;Object.keys(s).forEach(function(e){return a.setAttribute(e,s[e])})}if(o){var i=o;Object.keys(i).forEach(function(e){return a.dataset[e]=i[e]})}return a},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=t||self,"string"==typeof e?t.document.querySelector(e):e},i=function(e){e.parentNode&&e.parentNode.removeChild(e)},c=function(e,t){(t||document.body).appendChild(e)},u=n("../node_modules/voca/index.js"),l=function(e,t){var n=null,o=function(){if(!n)try{if(e in self){(n=self[e]).setItem("__ssTest","xx"),n.removeItem("__ssTest")}}catch(e){}finally{n||(n=self[t]=(o={},{_fake:!0,setItem:function(e,t){return o[e]=t},removeItem:function(e){o.hasOwnProperty(e)&&delete o[e]},getItem:function(e){return o.hasOwnProperty(e)?o[e]:null},clear:function(){o={}}}))}var o;return n};return{setItem:function(e,t){return Object(u.isString)(t)||(t=JSON.stringify(t)),o().setItem(e,t)},removeItem:function(e){return o().removeItem(e)},getItem:function(e){return o().getItem(e)},clear:function(){return o().clear()},isFake:function(){return!!o()._fake}}},d=l("sessionStorage",Symbol()),p=l("localStorage",Symbol()),f=n("./utils/camera.js");n.d(t,"e",function(){return g}),n.d(t,"d",function(){return E}),n.d(t,"f",function(){return h}),n.d(t,"b",function(){return _}),n.d(t,"h",function(){return O}),n.d(t,"j",function(){return S}),n.d(t,"i",function(){return d}),n.d(t,"g",function(){return p}),n.d(t,"c",function(){return f.b}),n.d(t,"a",function(){return a}),n.d(t,!1,function(){return s}),n.d(t,!1,function(){return i}),n.d(t,!1,function(){return c});var m=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),b=null,E=function(){if(null===b){var e=new r.a(self.navigator.userAgent);b=!!e.mobile()}return b},g=function(){return m},h=function(e,t){var n=self.matchMedia(e);return n.addListener(t),n},_=function(e,t){var n=setTimeout(e,t);return function(){return clearTimeout(n)}},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:570,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:440,r="width="+n+",height="+o+",\n            top="+((self.outerHeight-o)/2).toString()+",\n            left="+((self.outerWidth-n)/2).toString();return self.open(e,t,r)},S=function(e){var t=function(){e(self.orientation)};return self.addEventListener("orientationchange",t),t(),function(){self.removeEventListener("orientationchange",t)}}},"./utils/envUtils.js":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"e",function(){return p});var o=n("../node_modules/lodash/fp.js"),r=(n.n(o),"development"),a="staging",s=function(){return i()?r:self.location&&0===self.location.host.indexOf("widget-staging")?a:"production"},i=function(){return!!~self.location.search.indexOf("dev=true")},c=function(){return s()===r||i()},u=function(e,t,o){var r=Object({NODE_ENV:"production",REDUCERS:["src/pages/crop/reducers","src/queue/reducers","src/root/reducers","src/tabs/Camera/reducers","src/tabs/Dropbox/reducers","src/tabs/Facebook/reducers","src/tabs/GoogleDrive/reducers","src/tabs/ImageSearch/reducers","src/tabs/Instagram/reducers"],ROUTES:["src/pages/about/routes","src/pages/crop/routes","src/queue/routes","src/tabs/Camera/routes","src/tabs/Dropbox/routes","src/tabs/Facebook/routes","src/tabs/ImageSearch/routes","src/tabs/Instagram/routes","src/tabs/Local/routes","src/tabs/URL/routes"],TRANSLATIONS:["src/pages/crop/translations","src/queue/translations","src/root/translations","src/tabs/Camera/translations","src/tabs/Dropbox/translations","src/tabs/Facebook/translations","src/tabs/GoogleDrive/translations","src/tabs/ImageSearch/translations","src/tabs/Instagram/translations","src/tabs/Local/translations","src/tabs/URL/translations","src/uploader/translations"]})[e]||[];return("string"==typeof r?r.split(","):r).reduce(function(e,t){var r=t.slice(4),a=n("./ recursive ^\\.\\/.*\\/index\\.js$")("./"+r+"/index.js").default;return o(e,a,t)},t)},l=function(e,t){return u(e,{},function(e,n,r){return t?e=Object(o.merge)(e,n):e[r]=n,e})},d=function(e){return u(e,[],function(e,t){return e.concat(t)})},p=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n]}},"./utils/fileUtils.js":function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u});var o=n("./common/logger.js"),r="FileReader"in self&&"FileList"in self&&"Blob"in self,a=Object(o.b)(),s=["b","k","m","g","t"],i={"application/vnd.openxmlformats-officedocument.presentationml.presentation":"powerpoint","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"word","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"excel"},c=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r="na",i=e;if(e&&e>0)try{var c=(t=parseInt(e),n=1024,Math.floor(Math.log(t)/Math.log(n)));r=s[c],c>0&&(i=parseFloat((e/Math.pow(1024,c)).toFixed(o)))}catch(t){a.error("[fileUtils]: failed to parse bytes ("+e+") into file size",t)}return{text:r,size:i}},u=function(e){var t="";return e.type?t=(t=i[e.type]||e.type).replace(/^.*\//,"").replace(/\+.*$/,"").toUpperCase():e.name&&(t=e.name.replace(/^.*\./,"").replace(/\?.*$/,"").toUpperCase()),t.replace("JPEG","JPG")},l=function(e){return r&&(e instanceof File||"[object File]"===e.toString())}},"./utils/sassVarsUtils.js":function(e,t,n){"use strict";var o=n("../assets/scss/tachyons/_variables.scss"),r=n.n(o),a=/(^"+|"+$)/g,s={ns:r.a.breakpointNotSmall.replace(a,""),m:r.a.breakpointMedium.replace(a,""),l:r.a.breakpointLarge.replace(a,""),ls:r.a.landscape.replace(a,"")};t.a=function(e){return"@media only "+s[e]}},"./utils/seamlessUtils.js":function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return c}),n.d(t,"d",function(){return l});var o=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),r=n.n(o),a=n("../node_modules/voca/index.js"),s=(n.n(a),function(e,t,n){return e.updateIn(Array.isArray(t)?t:[t],function(e){return e.concat(n)})}),i=function(e,t,n){for(var o=arguments.length,r=Array(o>4?o-4:0),a=4;a<o;a++)r[a-4]=arguments[a];var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return e.updateIn(Array.isArray(t)?t:[t],function(e){return function(e,t,n){for(var o=arguments.length,r=Array(o>3?o-3:0),a=3;a<o;a++)r[a-3]=arguments[a];var s;return(s=e=e.asMutable()).splice.apply(s,[t,n].concat(r)),e}.apply(void 0,[e,n,s].concat(r))})},c=function(e,t,n){return e.updateIn(Array.isArray(t)?t:[t],function(e){return e.asMutable().filter(n)})},u=function(e){return null===e||void 0===e||Array.isArray(e)?0===e.length:Object(a.isString)(e)&&Object(a.isBlank)(e)},l=function(e,t,n){for(var o=arguments.length,a=Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];t=Array.isArray(t)?t:u(t)?null:[t],n=Array.isArray(n)?n.concat(a):[n].concat(a);var i=function(e){return r.a.without(e,n)};return u(t)?r.a.without(e,n):t.length>1?e.setIn(t,e.updateIn(t,i)):e.set(t[0],i(e[t[0]]))}},0:function(e,t,n){e.exports=n("./startApp.js")}},[0]);
//# sourceMappingURL=app.c05da99896a6b7ec2be9.js.map